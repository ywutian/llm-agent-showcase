/*! For license information please see 542.0a9e95ae.chunk.js.LICENSE.txt */
"use strict";(self.webpackChunkllm_agent_showcase=self.webpackChunkllm_agent_showcase||[]).push([[542],{542:(e,t,n)=>{n.r(t),n.d(t,{default:()=>_});var a=n(555),s=n(43),i=n(382),r=n(228);const o=(0,r.A)("x",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);var l=n(73);const c=(0,r.A)("activity",[["path",{d:"M22 12h-2.48a2 2 0 0 0-1.93 1.46l-2.35 8.36a.25.25 0 0 1-.48 0L9.24 2.18a.25.25 0 0 0-.48 0l-2.35 8.36A2 2 0 0 1 4.49 12H2",key:"169zse"}]]),g=(0,r.A)("book-open",[["path",{d:"M12 7v14",key:"1akyts"}],["path",{d:"M3 18a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1h5a4 4 0 0 1 4 4 4 4 0 0 1 4-4h5a1 1 0 0 1 1 1v13a1 1 0 0 1-1 1h-6a3 3 0 0 0-3 3 3 3 0 0 0-3-3z",key:"ruj8y"}]]),d=(0,r.A)("settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]),m=(0,r.A)("circle-x",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]),u=(0,r.A)("play",[["polygon",{points:"6 3 20 12 6 21 6 3",key:"1oa8hb"}]]),h=(0,r.A)("rotate-ccw",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]]),p=(0,r.A)("user",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]),y=(0,r.A)("clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);var f=n(669);const x=(0,r.A)("bot",[["path",{d:"M12 8V4H8",key:"hb8ula"}],["rect",{width:"16",height:"12",x:"4",y:"8",rx:"2",key:"enze0r"}],["path",{d:"M2 14h2",key:"vft8re"}],["path",{d:"M20 14h2",key:"4cs60a"}],["path",{d:"M15 13v2",key:"1xurst"}],["path",{d:"M9 13v2",key:"rq6x2g"}]]);var v=n(579);const b=e=>e?new Date(e).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit",second:"2-digit"}):"Unknown",C=e=>{let{children:t,className:n}=e;const a=(e=>{if(!e)return e;let t=e.replace(/\*\*(.*?)\*\*/g,"<strong>$1</strong>");return t=t.replace(/(?<!\*)\*([^*]+)\*(?!\*)/g,"<em>$1</em>"),t})(t);return(0,v.jsx)("div",{className:n,dangerouslySetInnerHTML:{__html:a}})},N=s.memo((e=>{var t,n,a;let{msg:i,index:r,theme:o,showTimestamps:l,isNew:c=!1}=e;const g=(0,s.useMemo)((()=>!c&&r<10?{animationDelay:"".concat(.05*r,"s"),animationFillMode:"forwards"}:{animationFillMode:"forwards"}),[c,r]),d="user"===i.sender,m="guesser"===i.currentPlayer||"make_guess"===(null===(t=i.metadata)||void 0===t?void 0:t.action)||"guesser"===(null===(n=i.metadata)||void 0===n?void 0:n.role)||"guessing"===(null===(a=i.metadata)||void 0===a?void 0:a.phase)||i.message&&(i.message.includes("Is it")||i.message.includes("My guess is")||i.message.includes("I guess")||/\d+\?/.test(i.message)),u=d||m,h=(0,s.useMemo)((()=>"flex ".concat(u?"justify-end":"justify-start"," opacity-0 animate-fade-in")),[u]),f=(0,s.useMemo)((()=>{let e;return e=d?o.user.gradient:m?"from-blue-500 to-cyan-500":o.ai.gradient,"max-w-2xl px-6 py-4 rounded-2xl shadow-lg hover:shadow-xl transition-all duration-200 bg-gradient-to-r ".concat(e," text-white")}),[d,m,o.user.gradient,o.ai.gradient]),x=(0,s.useMemo)((()=>d?{icon:(0,v.jsx)(p,{className:"w-4 h-4"}),name:"\ud83d\udc64 User",color:"text-white"}:m?{icon:(0,v.jsx)("div",{className:"w-4 h-4 text-center",children:"\ud83d\udd0d"}),name:"\ud83d\udd0d AI Guesser",color:"text-white"}:{icon:(0,v.jsx)("div",{className:"w-4 h-4 text-center",children:"\ud83c\udfaf"}),name:"\ud83c\udfaf AI Hider",color:"text-white"}),[d,m]);return(0,v.jsx)("div",{className:h,style:g,children:(0,v.jsxs)("div",{className:f,children:[(0,v.jsxs)("div",{className:"flex items-center gap-2 text-sm opacity-90 mb-2",children:[x.icon,(0,v.jsx)("span",{className:"font-semibold",children:x.name}),l&&i.timestamp&&(0,v.jsxs)(v.Fragment,{children:[(0,v.jsx)(y,{className:"w-3 h-3 opacity-75"}),(0,v.jsx)("span",{className:"text-xs opacity-75",children:b(i.timestamp)})]}),(0,v.jsxs)("span",{className:"text-xs opacity-75 ml-auto",children:["#",r+1]})]}),(0,v.jsx)(C,{className:"text-lg leading-relaxed break-words",children:i.message}),i.metadata&&(0,v.jsxs)("div",{className:"mt-2 text-xs opacity-75 border-t border-white border-opacity-20 pt-2",children:[i.metadata.guessCount&&(0,v.jsxs)("span",{className:"bg-white bg-opacity-20 px-2 py-1 rounded mr-2",children:["Guess #",i.metadata.guessCount]}),i.metadata.confidence&&(0,v.jsxs)("span",{className:"bg-white bg-opacity-20 px-2 py-1 rounded mr-2",children:["Confidence: ","number"===typeof i.metadata.confidence?i.metadata.confidence>1?i.metadata.confidence.toFixed(1):(100*i.metadata.confidence).toFixed(1):i.metadata.confidence,"%"]}),i.metadata.action&&(0,v.jsxs)("span",{className:"bg-white bg-opacity-20 px-2 py-1 rounded mr-2",children:["Action: ",i.metadata.action]}),i.metadata.phase&&(0,v.jsxs)("span",{className:"bg-white bg-opacity-20 px-2 py-1 rounded",children:["Phase: ",i.metadata.phase]})]}),(i.intelligence||i.strategy||i.learningApplied)&&(0,v.jsxs)("div",{className:"mt-2 text-xs opacity-75 border-t border-white border-opacity-20 pt-2",children:[i.intelligence&&(0,v.jsxs)("div",{className:"mb-1",children:["\ud83d\udca1 ",i.intelligence]}),i.strategy&&(0,v.jsxs)("div",{className:"mb-1",children:["\ud83c\udfaf Strategy: ",i.strategy]}),i.learningApplied&&(0,v.jsx)("div",{children:"\ud83d\udcda Learning Applied"})]})]})})})),S=s.memo((e=>{let{theme:t,customMessage:n,isGuesser:a=!1,currentPlayer:i=null}=e;const r=a||"guesser"===i||n&&(n.includes("\ud83d\udd0d")||n.includes("Guesser")),o=(0,s.useMemo)((()=>"flex ".concat(r?"justify-end":"justify-start")),[r]),l=(0,s.useMemo)((()=>{const e=r?"from-blue-500 to-cyan-500":t.ai.gradient;return"max-w-2xl px-6 py-4 rounded-2xl shadow-lg bg-gradient-to-r ".concat(e," text-white animate-pulse")}),[r,t.ai.gradient]),c=(0,s.useMemo)((()=>n||(r?"\ud83d\udd0d AI Guesser is thinking...":"\ud83c\udfaf AI Hider is thinking...")),[n,r]);return(0,v.jsx)("div",{className:o,children:(0,v.jsx)("div",{className:l,children:(0,v.jsxs)("div",{className:"flex items-center gap-3",children:[(0,v.jsxs)("div",{className:"flex space-x-1",children:[(0,v.jsx)("div",{className:"w-2 h-2 bg-white rounded-full animate-bounce"}),(0,v.jsx)("div",{className:"w-2 h-2 bg-white rounded-full animate-bounce",style:{animationDelay:"0.1s"}}),(0,v.jsx)("div",{className:"w-2 h-2 bg-white rounded-full animate-bounce",style:{animationDelay:"0.2s"}})]}),(0,v.jsx)("span",{className:"text-sm font-medium",children:c})]})})})})),j=s.memo((()=>(0,v.jsxs)("div",{className:"text-center py-8 text-gray-500",children:[(0,v.jsx)(f.A,{className:"w-12 h-12 mx-auto mb-4 opacity-50"}),(0,v.jsx)("p",{className:"text-lg font-medium",children:"No messages yet"}),(0,v.jsx)("p",{className:"text-sm",children:"Start the conversation!"})]}))),A=s.memo((e=>{let{stats:t,showRoleStats:n=!1}=e;return(0,v.jsxs)("div",{className:"flex items-center gap-4 text-sm text-gray-600 flex-wrap",children:[(0,v.jsxs)("div",{className:"flex items-center gap-1",children:[(0,v.jsx)(f.A,{className:"w-4 h-4"}),(0,v.jsx)("span",{children:t.total})]}),(0,v.jsxs)("div",{className:"flex items-center gap-1",children:[(0,v.jsx)(p,{className:"w-4 h-4 text-green-600"}),(0,v.jsx)("span",{children:t.userMessages})]}),(0,v.jsxs)("div",{className:"flex items-center gap-1",children:[(0,v.jsx)(x,{className:"w-4 h-4 text-purple-600"}),(0,v.jsx)("span",{children:t.aiMessages})]}),n&&(0,v.jsxs)(v.Fragment,{children:[(0,v.jsxs)("div",{className:"flex items-center gap-1",children:[(0,v.jsx)("span",{className:"text-blue-600",children:"\ud83d\udd0d"}),(0,v.jsx)("span",{children:t.guesserMessages||0})]}),(0,v.jsxs)("div",{className:"flex items-center gap-1",children:[(0,v.jsx)("span",{className:"text-purple-600",children:"\ud83c\udfaf"}),(0,v.jsx)("span",{children:t.hiderMessages||0})]})]})]})})),w=s.memo((e=>{var t,n;let{conversation:a,stats:s}=e;return 0===a.length?null:(0,v.jsxs)("div",{className:"text-xs text-gray-500 text-center border-t pt-2 space-y-1",children:[(0,v.jsxs)("div",{children:["Started: ",b(null===(t=a[0])||void 0===t?void 0:t.timestamp)," \u2022 Latest: ",b(null===(n=a[a.length-1])||void 0===n?void 0:n.timestamp)]}),(0,v.jsxs)("div",{children:[s.total," total messages (",s.userMessages," from you, ",s.aiMessages," from AI)",s.guesserMessages>0&&(0,v.jsxs)("span",{children:[" \u2022 ",s.guesserMessages," guesses, ",s.hiderMessages," hints"]})]})]})})),I=e=>{let{conversation:t=[],variant:n="default",title:a="AI Conversation",isThinking:r=!1,thinkingMessage:o=null,currentPlayer:l=null,showTimestamps:c=!0,maxHeight:g=384,showRoleInfo:d=!1,learningActive:m=!1}=e;const u=(0,s.useRef)(null),[h,p]=(0,s.useState)(!0),y=(0,s.useRef)(0),f=(0,s.useRef)(null),x=(0,s.useMemo)((()=>(e=>{const t={default:{primary:{bg:"from-purple-100 to-pink-100",icon:"text-purple-600"},user:{gradient:"from-green-500 to-emerald-500"},ai:{gradient:"from-purple-500 to-pink-500"}}};return t[e]||t.default})(n)),[n]),b=t.length>y.current,C=y.current,I=(0,s.useCallback)((()=>{if(u.current){const e=u.current;e.scrollTo({top:e.scrollHeight,behavior:"smooth"})}}),[]),P=(0,s.useCallback)((()=>{f.current&&clearTimeout(f.current),f.current=setTimeout((()=>{if(!u.current)return;const e=u.current,t=Math.abs(e.scrollHeight-e.scrollTop-e.clientHeight)<50;p(t)}),100)}),[]),E=(0,s.useCallback)((()=>{p(!0),I()}),[I]);(0,s.useEffect)((()=>{if((b||r)&&(y.current=t.length,h)){const e=setTimeout(I,50);return()=>clearTimeout(e)}}),[t.length,r,h,I,b]),(0,s.useEffect)((()=>()=>{f.current&&clearTimeout(f.current)}),[]);const L=(0,s.useMemo)((()=>"bg-gradient-to-r ".concat(x.primary.bg," rounded-2xl p-6 shadow-inner mb-6")),[x.primary.bg]),M=(0,s.useMemo)((()=>"space-y-6 overflow-y-auto mb-6 scroll-smooth"),[]),R=(0,s.useMemo)((()=>({maxHeight:"".concat(g,"px")})),[g]),_=[{sender:"ai",message:"You're doing brilliantly! You're incredibly close to the target. Stay sharp, and move **LOWER**!",timestamp:Date.now()-3e4,currentPlayer:"hider"},{sender:"ai",message:"Is it **42**? I think this might be the *perfect* answer!",timestamp:Date.now()-15e3,currentPlayer:"guesser"},{sender:"user",message:"This formatting test shows **bold** and *italic* text working properly.",timestamp:Date.now()-5e3}],T=t.length>0?t:_;return(0,v.jsxs)("div",{className:L,children:[(0,v.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,v.jsxs)("h3",{className:"text-2xl font-semibold text-gray-800 flex items-center gap-2",children:[(0,v.jsx)(i.A,{className:"w-7 h-7 ".concat(x.primary.icon)}),a,m&&(0,v.jsx)("span",{className:"text-sm bg-blue-100 text-blue-800 px-2 py-1 rounded-full ml-2",children:"\ud83d\udcda Learning Active"})]}),T.length>0&&(0,v.jsx)(A,{stats:{total:T.length,userMessages:T.filter((e=>"user"===e.sender)).length,aiMessages:T.filter((e=>"ai"===e.sender)).length,guesserMessages:T.filter((e=>"guesser"===e.currentPlayer)).length,hiderMessages:T.filter((e=>"hider"===e.currentPlayer)).length},showRoleStats:d})]}),d&&T.length>0&&(0,v.jsx)("div",{className:"mb-4 p-3 bg-white/50 rounded-xl border border-gray-200",children:(0,v.jsxs)("div",{className:"flex items-center justify-center gap-8 text-sm",children:[(0,v.jsxs)("div",{className:"flex items-center gap-2",children:[(0,v.jsx)("span",{className:"text-purple-600",children:"\ud83c\udfaf"}),(0,v.jsx)("span",{className:"text-purple-700 font-medium",children:"AI Hider (Left)"}),(0,v.jsx)("span",{className:"text-gray-500",children:"Chooses number & gives hints"})]}),(0,v.jsxs)("div",{className:"flex items-center gap-2",children:[(0,v.jsx)("span",{className:"text-blue-600",children:"\ud83d\udd0d"}),(0,v.jsx)("span",{className:"text-blue-700 font-medium",children:"AI Guesser (Right)"}),(0,v.jsx)("span",{className:"text-gray-500",children:"Makes guesses"})]})]})}),T.length>3&&!h&&(0,v.jsx)("div",{className:"mb-4 text-center",children:(0,v.jsx)("button",{onClick:E,className:"px-3 py-1 bg-blue-500 text-white text-xs rounded-full hover:bg-blue-600 transition-colors",children:"\u2193 Scroll to latest"})}),(0,v.jsx)("div",{ref:u,className:M,style:R,onScroll:P,children:0===T.length?(0,v.jsx)(j,{}):(0,v.jsxs)(v.Fragment,{children:[T.map(((e,t)=>{const n="msg-".concat(t,"-").concat(e.timestamp||t),a=b&&t>=C;return(0,v.jsx)(N,{msg:e,index:t,theme:x,showTimestamps:c,isNew:a},n)})),r&&(0,v.jsx)(S,{theme:x,customMessage:o,isGuesser:"guesser"===l,currentPlayer:l})]})}),(0,v.jsx)(w,{conversation:T,stats:{total:T.length,userMessages:T.filter((e=>"user"===e.sender)).length,aiMessages:T.filter((e=>"ai"===e.sender)).length,guesserMessages:T.filter((e=>"guesser"===e.currentPlayer)).length,hiderMessages:T.filter((e=>"hider"===e.currentPlayer)).length}}),(0,v.jsx)("style",{jsx:!0,children:"\n        @keyframes fade-in {\n          from { opacity: 0; transform: translateY(5px); }\n          to { opacity: 1; transform: translateY(0); }\n        }\n        .animate-fade-in { \n          animation: fade-in 0.2s ease-out; \n        }\n      "})]})},P=s.memo(I);class E{constructor(){this.conversationHistory=[],this.gamePatterns=[],this.strategicInsights=[],this.lastAnalysisResult=null,this.lastAnalysisTime=0,this.opponentProfile={responseStyle:"unknown",hintQuality:.5,difficulty:.5,creativity:.5,patterns:[],preferences:{},adaptationRate:.5},this.creativityEngine={unconventionalStrategies:["edge_exploration","psychological_misdirection","pattern_breaking","reverse_psychology","chaos_theory"],innovationThreshold:.7,creativityHistory:[],lastCreativeMove:null},this.metacognition={confidenceCalibration:new Map,knowledgeGaps:[],learningProgress:[],selfAwareness:{strengths:[],weaknesses:[],improvementAreas:[]}},this.ultraEfficientConfig={analysisInterval:8,batchAnalysis:!0,compactPrompts:!0,resultCaching:6e5,useLLMDecision:!0,staticAnalysisMode:!1,smartSkipping:!0,emergencyOnly:!1,enableOpponentModeling:!0,enableCreativity:!0,enableMetacognition:!0,creativityTriggerThreshold:.6},this.stats={totalCalls:0,skippedCalls:0,cacheHits:0,llmDecisions:0,staticAnalysis:0,emergencyCalls:0,creativeStrategies:0,opponentPredictions:0,metacognitiveDecisions:0,adaptiveImprovements:0},this.gameStatePatterns={early:{needsAnalysis:.3,confidence:.6,creativity:.4},middle:{needsAnalysis:.7,confidence:.8,creativity:.7},late:{needsAnalysis:.9,confidence:.9,creativity:.9},transitions:{"R->B":{significance:.8,analysisValue:.9,creativityBoost:.2},"B->R":{significance:.6,analysisValue:.7,creativityBoost:.4},"B->B":{significance:.3,analysisValue:.4,creativityBoost:.1}}},this.intelligentCache=new Map}async analyzeContext(e,t){this.conversationHistory.push(t),this.ultraEfficientConfig.enableOpponentModeling&&this.updateOpponentProfile(t),this.ultraEfficientConfig.enableMetacognition&&this.performMetacognitiveReflection();const n=await this.shouldAnalyzeWithLLM(e,t),a=Date.now()-this.lastAnalysisTime<this.ultraEfficientConfig.resultCaching;if(!n&&a&&this.lastAnalysisResult)return this.stats.cacheHits++,this.enhanceWithCurrentContext(this.lastAnalysisResult,t);try{const t=this.buildAdvancedGameContextPrompt(),n=await e(t),a=this.parseJSON(n);return this.lastAnalysisResult=this.enhanceAnalysisWithIntelligence(a),this.lastAnalysisTime=Date.now(),this.strategicInsights.push(this.lastAnalysisResult),this.recordMetacognitiveOutcome(a),this.stats.totalCalls++,this.stats.llmDecisions++,this.lastAnalysisResult}catch(s){return this.getAdvancedGameSpecificFallback(t)}}updateOpponentProfile(e){const t=e.message.toLowerCase(),n=e.agent;if("Hider"===n||"Human"===n){t.includes("close")||t.includes("warm")||t.includes("getting")?(this.opponentProfile.hintQuality=Math.min(1,this.opponentProfile.hintQuality+.1),this.opponentProfile.responseStyle="helpful"):(t.includes("nope")||t.includes("wrong")||t.length<15)&&(this.opponentProfile.hintQuality=Math.max(0,this.opponentProfile.hintQuality-.05),this.opponentProfile.responseStyle="challenging");["interesting","clever","nice","creative","good"].some((e=>t.includes(e)))&&(this.opponentProfile.creativity=Math.min(1,this.opponentProfile.creativity+.1)),this.opponentProfile.patterns.push({turn:this.conversationHistory.length,messageLength:t.length,responseTime:Date.now(),helpfulness:this.calculateHelpfulness(t),timestamp:Date.now()}),this.opponentProfile.patterns.length>10&&this.opponentProfile.patterns.shift()}}calculateHelpfulness(e){let t=.5;return(e.includes("higher")||e.includes("lower"))&&(t+=.3),(e.includes("close")||e.includes("warm"))&&(t+=.2),(e.includes("far")||e.includes("cold"))&&(t+=.1),e.length>30&&(t+=.1),e.length<10&&(t-=.2),Math.max(0,Math.min(1,t))}predictOpponentBehavior(e){const t=this.opponentProfile;if(t.patterns.length<3)return{prediction:"insufficient_data",confidence:.3};const n=t.patterns.slice(-3),a=n.reduce(((e,t)=>e+t.helpfulness),0)/n.length;let s={};return s="helpful"===t.responseStyle&&a>.7?{expectedHintQuality:"high",likelyToGiveHints:!0,preferredDifficulty:"moderate",confidence:.8}:"challenging"===t.responseStyle?{expectedHintQuality:"minimal",likelyToGiveHints:!1,preferredDifficulty:"hard",confidence:.7}:{expectedHintQuality:"medium",likelyToGiveHints:!0,preferredDifficulty:"adaptive",confidence:.6},this.stats.opponentPredictions++,s}generateCreativeStrategy(e,t){if(!this.ultraEfficientConfig.enableCreativity)return null;if(this.calculateCreativityNeed(e,t)<this.ultraEfficientConfig.creativityTriggerThreshold)return null;const n=this.creativityEngine.unconventionalStrategies,s=n[Math.floor(Math.random()*n.length)],i=this.implementCreativeStrategy(s,e);return this.creativityEngine.lastCreativeMove={strategy:s,gameState:(0,a.A)({},e),timestamp:Date.now(),approach:i},this.stats.creativeStrategies++,i}calculateCreativityNeed(e,t){var n;let a=.3;e.guessCount>8&&(a+=.3),(null===t||void 0===t||null===(n=t.patterns)||void 0===n?void 0:n.efficiency)<.6&&(a+=.2),this.opponentProfile.creativity>.7&&(a+=.2);return(e.range?e.range.max-e.range.min+1:100)<10&&e.guessCount>5&&(a+=.4),Math.min(1,a)}implementCreativeStrategy(e,t){switch(e){case"edge_exploration":return{type:"edge_exploration",description:"Explore number edges for psychological insight",modification:"focus_on_boundaries",reasoning:"People often avoid extreme numbers"};case"psychological_misdirection":return{type:"psychological_misdirection",description:"Use reverse psychology in number selection",modification:"counter_intuitive_choice",reasoning:'Choose numbers that seem "too obvious"'};case"pattern_breaking":return{type:"pattern_breaking",description:"Deliberately break established patterns",modification:"anti_pattern_guess",reasoning:"Surprise opponent by changing approach"};case"chaos_theory":return{type:"chaos_theory",description:"Introduce controlled randomness",modification:"strategic_randomness",reasoning:"Sometimes randomness is the best strategy"};default:return{type:"creative_adaptation",description:"Adaptive creative approach",modification:"context_creative",reasoning:"Adapt creativity to current situation"}}}performMetacognitiveReflection(){if(!this.ultraEfficientConfig.enableMetacognition)return;const e={confidenceAccuracy:this.evaluateConfidenceCalibration(),strategyEffectiveness:this.evaluateStrategyPerformance(),learningProgress:this.assessLearningProgress(),knowledgeGaps:this.identifyKnowledgeGaps()};this.adjustBehaviorBasedOnReflection(e),this.stats.metacognitiveDecisions++}evaluateConfidenceCalibration(){const e=Array.from(this.metacognition.confidenceCalibration.values()).slice(-10);if(e.length<3)return{status:"insufficient_data",accuracy:.5};const t=e.reduce(((e,t)=>e+(t.actual===t.predicted?1:0)),0)/e.length;return{status:t>.7?"well_calibrated":"needs_improvement",accuracy:t,suggestion:t<.7?"reduce_overconfidence":"maintain_current_approach"}}evaluateStrategyPerformance(){const e=this.strategicInsights.slice(-5);if(e.length<3)return{performance:"unknown"};const t=e.reduce(((e,t)=>{var n;return e+((null===(n=t.patterns)||void 0===n?void 0:n.efficiency)||.5)}),0)/e.length;return{performance:t>.7?"good":t>.5?"moderate":"poor",efficiency:t,recommendation:t<.6?"try_creative_approaches":"continue_current_strategy"}}assessLearningProgress(){const e={patternRecognitionImprovement:this.measurePatternRecognitionGrowth(),adaptationSpeed:this.measureAdaptationSpeed(),creativityGrowth:this.measureCreativityGrowth()};return{overall:Object.values(e).reduce(((e,t)=>e+t),0)/3,details:e}}identifyKnowledgeGaps(){const e=[];return this.stats.totalCalls>10&&this.stats.cacheHits/this.stats.totalCalls<.3&&e.push("context_recognition"),this.opponentProfile.patterns.length>5&&"unknown"===this.opponentProfile.responseStyle&&e.push("opponent_modeling"),0===this.stats.creativeStrategies&&this.conversationHistory.length>10&&e.push("creative_problem_solving"),e}adjustBehaviorBasedOnReflection(e){"needs_improvement"===e.confidenceAccuracy.status&&(this.gameStatePatterns.early.confidence*=.9,this.gameStatePatterns.middle.confidence*=.9,this.gameStatePatterns.late.confidence*=.9),"poor"===e.strategyEffectiveness.performance&&(this.ultraEfficientConfig.creativityTriggerThreshold*=.8),this.stats.adaptiveImprovements++}enhanceAnalysisWithIntelligence(e){const t=this.enhanceAnalysis(e),n=this.predictOpponentBehavior(),s=this.generateCreativeStrategy({range:this.inferCurrentRange(),guessCount:this.conversationHistory.length},t),i=this.generateMetacognitiveInsights();return(0,a.A)((0,a.A)({},t),{},{intelligence_enhancements:{opponent_modeling:{profile:this.opponentProfile,prediction:n,confidence:n.confidence||.5},creative_strategy:s,metacognitive_insights:i,advanced_reasoning:this.generateAdvancedReasoning(t)},meta:(0,a.A)((0,a.A)({},t.meta),{},{intelligence_level:"ENHANCED",capabilities:["opponent_modeling","creative_thinking","metacognition"],enhancement_timestamp:Date.now()})})}generateAdvancedReasoning(e){const t=[];"unknown"!==this.opponentProfile.responseStyle&&t.push("Opponent shows ".concat(this.opponentProfile.responseStyle," style with ").concat((100*this.opponentProfile.hintQuality).toFixed(0),"% hint quality"));const n=this.calculateCreativityNeed({guessCount:this.conversationHistory.length},e);return n>.6&&t.push("High creativity need (".concat((100*n).toFixed(0),"%) suggests unconventional approach")),this.metacognition.knowledgeGaps.length>0&&t.push("Identified knowledge gaps: ".concat(this.metacognition.knowledgeGaps.join(", "))),t}generateMetacognitiveInsights(){return{self_assessment:{current_strategy_effectiveness:this.evaluateStrategyPerformance(),confidence_calibration:this.evaluateConfidenceCalibration(),learning_trajectory:this.assessLearningProgress()},improvement_opportunities:this.identifyKnowledgeGaps(),next_actions:this.suggestNextActions()}}suggestNextActions(){const e=[];return this.opponentProfile.patterns.length<3&&e.push("gather_more_opponent_data"),0===this.stats.creativeStrategies&&this.conversationHistory.length>6&&e.push("consider_creative_approach"),this.stats.cacheHits/Math.max(1,this.stats.totalCalls)<.2&&e.push("improve_pattern_recognition"),e}buildAdvancedGameContextPrompt(){const e=this.extractGameContext(),t=this.getOpponentContextString(),n=this.getCreativeContextString(),a=this.conversationHistory.slice(-4).map(((e,t)=>"".concat(t+1,".").concat(e.agent[0],':"').concat(e.message.substring(0,15),'"'))).join(" ");return"NumG T".concat(e.turn," ").concat(e.phase," R:").concat(e.range," S:").concat(e.strategy,"\nH:").concat(a,"\nOPP:").concat(t,"\nCREATIVE:").concat(n,'\nA: {patterns:{strategy,adapt,eff,creative},dynamics:{eng,diff,flow},insights:["k1","k2","k3"],guide:{h,g},pred:{next,conf},opponent:{style,hint_quality},creative:{need,approach}}')}getOpponentContextString(){const e=this.opponentProfile;return"Style:".concat(e.responseStyle," Hints:").concat((100*e.hintQuality).toFixed(0),"% Creative:").concat((100*e.creativity).toFixed(0),"%")}getCreativeContextString(){var e;const t=this.calculateCreativityNeed({guessCount:this.conversationHistory.length},{});return"Need:".concat((100*t).toFixed(0),"% Last:").concat((null===(e=this.creativityEngine.lastCreativeMove)||void 0===e?void 0:e.strategy)||"none")}getAdvancedGameSpecificFallback(e){const t=this.getGameSpecificFallback(e),n=this.predictOpponentBehavior(),s=this.generateCreativeStrategy({guessCount:this.conversationHistory.length},t);return(0,a.A)((0,a.A)({},t),{},{intelligence_enhancements:{opponent_modeling:{profile_summary:"".concat(this.opponentProfile.responseStyle," style, ").concat((100*this.opponentProfile.hintQuality).toFixed(0),"% hint quality"),prediction:n},creative_suggestions:s,metacognitive_state:{confidence_in_fallback:.6,alternative_approaches:this.suggestNextActions()}},meta:(0,a.A)((0,a.A)({},t.meta),{},{analysisType:"ADVANCED_GAME_FALLBACK",intelligence_level:"ENHANCED"})})}measurePatternRecognitionGrowth(){return Math.min(1,this.stats.cacheHits/Math.max(1,this.stats.totalCalls))}measureAdaptationSpeed(){return Math.min(1,this.stats.adaptiveImprovements/Math.max(1,this.conversationHistory.length))}measureCreativityGrowth(){return Math.min(1,this.stats.creativeStrategies/Math.max(1,.3*this.conversationHistory.length))}recordMetacognitiveOutcome(e){const t="analysis_".concat(Date.now());if(this.metacognition.confidenceCalibration.set(t,{predicted:e.confidence||.5,actual:null,timestamp:Date.now()}),this.metacognition.confidenceCalibration.size>20){const e=this.metacognition.confidenceCalibration.keys().next().value;this.metacognition.confidenceCalibration.delete(e)}}getEnhancedEfficiencyStats(){const e=this.getEfficiencyStats();return(0,a.A)((0,a.A)({},e),{},{intelligence_metrics:{opponent_modeling:{profile_accuracy:this.opponentProfile.patterns.length>3?.8:.4,predictions_made:this.stats.opponentPredictions,style_identified:"unknown"!==this.opponentProfile.responseStyle},creativity:{creative_strategies_used:this.stats.creativeStrategies,creativity_success_rate:this.stats.creativeStrategies>0?.7:0,innovation_level:this.creativityEngine.creativityHistory.length/Math.max(1,this.conversationHistory.length)},metacognition:{self_awareness_level:this.metacognition.knowledgeGaps.length>0?.8:.5,adaptive_improvements:this.stats.adaptiveImprovements,learning_progress:this.assessLearningProgress().overall}},intelligence_level:"ENHANCED_AI",cognitive_capabilities:["Advanced Pattern Recognition","Opponent Modeling","Creative Problem Solving","Metacognitive Reasoning"]})}reset(){const e={creativityPreference:this.opponentProfile.creativity,generalStyle:this.opponentProfile.responseStyle};this.conversationHistory=[],this.gamePatterns=[],this.strategicInsights=[],this.lastAnalysisResult=null,this.lastAnalysisTime=0,this.intelligentCache.clear();const t={totalLifetimeGames:(this.stats.totalCalls||0)+1,cumulativeCreativeStrategies:this.stats.creativeStrategies,cumulativeOpponentPredictions:this.stats.opponentPredictions};this.stats=(0,a.A)({totalCalls:0,skippedCalls:0,cacheHits:0,llmDecisions:0,staticAnalysis:0,emergencyCalls:0,creativeStrategies:0,opponentPredictions:0,metacognitiveDecisions:0,adaptiveImprovements:0},t),this.opponentProfile={responseStyle:"unknown"!==e.generalStyle?e.generalStyle:"unknown",hintQuality:.5,difficulty:.5,creativity:e.creativityPreference,patterns:[],preferences:{},adaptationRate:.5},this.creativityEngine.creativityHistory=[],this.creativityEngine.lastCreativeMove=null,this.metacognition.confidenceCalibration.clear(),this.metacognition.knowledgeGaps=[],this.metacognition.learningProgress=[]}}class L{constructor(){this.learningDatabase={rangePatterns:new Map,feedbackAnalysis:new Map,strategyEffectiveness:new Map,opponentBehavior:new Map,contextualInsights:[]},this.rangeClassification={mega_range:{min:51,max:100,strategy:"aggressive_binary"},large_range:{min:26,max:50,strategy:"standard_binary"},medium_range:{min:11,max:25,strategy:"adaptive_binary"},small_range:{min:6,max:10,strategy:"smart_elimination"},tiny_range:{min:3,max:5,strategy:"pattern_recognition"},final_range:{min:1,max:2,strategy:"educated_guess"}},this.contextAnalyzers={proximity:this.analyzeProximitySignals.bind(this),momentum:this.analyzeMomentumPatterns.bind(this),feedback:this.analyzeFeedbackQuality.bind(this),efficiency:this.analyzeEfficiencyTrends.bind(this)}}buildLearningOrientedPrompt(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;const a=e.range.max-e.range.min+1,s=this.classifyRange(a),i=this.gatherContextualInsights(e,t),r=this.extractLearningInsights(n),o=this.generateStrategicGuidance(e,i,r);return this.assembleIntelligentPrompt({classification:s,gameState:e,contextualInsights:i,learningInsights:r,strategicGuidance:o,conversationHistory:t})}classifyRange(e){for(const[t,n]of Object.entries(this.rangeClassification))if(e>=n.min&&e<=n.max)return{category:t,config:n,size:e};return{category:"ultra_large",config:{strategy:"ultra_aggressive_binary"},size:e}}gatherContextualInsights(e,t){const n={proximitySignals:this.contextAnalyzers.proximity(t),momentumPatterns:this.contextAnalyzers.momentum(e),feedbackQuality:this.contextAnalyzers.feedback(t),efficiencyTrends:this.contextAnalyzers.efficiency(e)};return this.synthesizeInsights(n)}extractLearningInsights(e){if(!e)return{confidence:.5,recommendations:[]};const t=e.gameHistory||[],n={averageGuesses:this.calculateAverageGuesses(t),successPatterns:this.identifySuccessPatterns(t),commonMistakes:this.identifyCommonMistakes(t),optimalStrategies:this.identifyOptimalStrategies(t)};return(0,a.A)({confidence:Math.min(.95,.5+.05*t.length)},n)}generateStrategicGuidance(e,t,n){const{min:a,max:s}=e.range,i=Math.floor((a+s)/2),r=s-a+1;let o="binary_search",l=.8,c="Standard binary search for range ".concat(a,"-").concat(s);return n.confidence>.7&&(n.successPatterns.includes("aggressive_early")?(o="aggressive_binary",l=.9,c="Learned pattern: aggressive early moves are effective"):n.commonMistakes.includes("premature_precision")&&(o="conservative_binary",l=.85,c="Learned pattern: avoid premature precision, maintain binary search")),"very_close"===t.proximitySignal&&r>5&&(c+=" | Proximity detected but maintaining optimal strategy"),{primaryStrategy:o,optimalGuess:i,confidence:l,reasoning:c,alternatives:this.generateAlternativeStrategies(e,t)}}assembleIntelligentPrompt(e){let{classification:t,gameState:n,contextualInsights:a,learningInsights:s,strategicGuidance:i}=e;const{min:r,max:o}=n.range,{category:l,size:c}=t,{optimalGuess:g,reasoning:d,confidence:m}=i;let u="INTELLIGENT NUMBER GUESSING SYSTEM\n===========================================\n\nCURRENT SITUATION:\n\u2022 Range: ".concat(r," to ").concat(o," (").concat(c," numbers remaining)\n\u2022 Range Category: ").concat(l.toUpperCase().replace("_"," "),"\n\u2022 Optimal Mathematical Choice: ").concat(g,"\n\n");return s.confidence>.6&&(u+="LEARNED INTELLIGENCE (Confidence: ".concat((100*s.confidence).toFixed(0),"%):\n\u2022 Average guesses in similar situations: ").concat(s.averageGuesses||"N/A","\n\u2022 Success patterns identified: ").concat(s.successPatterns.join(", ")||"Analyzing...","\n\u2022 Strategic recommendation: ").concat(d,"\n\n")),"none"!==a.proximitySignal&&(u+="CONTEXTUAL ANALYSIS:\n\u2022 Proximity signals: ".concat(a.proximitySignal,"\n\u2022 Momentum pattern: ").concat(a.momentum,"\n\u2022 Feedback quality: ").concat(a.feedbackQuality,"\n\u2022 Strategic note: ").concat(a.strategicNote,"\n\n")),u+=this.generateCategorySpecificGuidance(l,r,o,g),u+='\nREINFORCEMENT LEARNING DIRECTIVE:\nBased on accumulated intelligence, your response will be analyzed for:\n\u2022 Strategic consistency with learned patterns\n\u2022 Mathematical optimality (binary search adherence)  \n\u2022 Adaptive intelligence (context awareness)\n\u2022 Long-term efficiency (minimizing total guesses)\n\nRESPONSE REQUIREMENTS:\nRespond with JSON format including your reasoning process:\n{\n  "guess": '.concat(g,',\n  "primary_reasoning": "Why this is the optimal choice",\n  "learned_insight": "What pattern/knowledge influenced this decision",\n  "confidence_level": ').concat(m,',\n  "strategic_category": "').concat(l,'"\n}'),u}generateCategorySpecificGuidance(e,t,n,a){const s={ultra_large:"\nULTRA LARGE RANGE STRATEGY:\n\u2022 Use aggressive binary search to rapidly eliminate possibilities\n\u2022 Each guess should cut the range by approximately 50%\n\u2022 Ignore proximity hints until range < 20\n\u2022 Focus on mathematical efficiency over intuitive adjustments",mega_range:"\nMEGA RANGE STRATEGY:  \n\u2022 Maintain strict binary search discipline\n\u2022 Current optimal choice: ".concat(a," (mathematical midpoint)\n\u2022 Each guess provides maximum information gain\n\u2022 Resist temptation to make intuitive adjustments"),large_range:"\nLARGE RANGE STRATEGY:\n\u2022 Continue standard binary search approach\n\u2022 Optimal choice: ".concat(a," (range midpoint: ").concat(t,"-").concat(n,")\n\u2022 Maintain logarithmic efficiency\n\u2022 Proximity signals are secondary to mathematical optimality"),medium_range:"\nMEDIUM RANGE STRATEGY:\n\u2022 Adaptive binary search with contextual awareness\n\u2022 Primary choice: ".concat(a," (mathematical center)\n\u2022 Begin incorporating proximity feedback\n\u2022 Balance between mathematical optimality and contextual clues"),small_range:"\nSMALL RANGE STRATEGY:\n\u2022 Smart elimination within ".concat(t,"-").concat(n,"\n\u2022 Consider: ").concat(this.generateSmallRangeOptions(t,n),"\n\u2022 Proximity signals become more significant\n\u2022 Optimal choice: ").concat(a),tiny_range:"\nTINY RANGE STRATEGY:\n\u2022 Pattern recognition mode for ".concat(t,"-").concat(n,"\n\u2022 Remaining options: [").concat(this.generateTinyRangeList(t,n),"]\n\u2022 High contextual sensitivity\n\u2022 Strategic choice: ").concat(a),final_range:"\nFINAL RANGE STRATEGY:\n\u2022 Educated guess between remaining options: [".concat(this.generateFinalRangeList(t,n),"]\n\u2022 Analyze all available contextual clues\n\u2022 Make definitive choice: ").concat(a)};return s[e]||s.large_range}analyzeProximitySignals(e){const t=e.slice(-2);for(const n of t){if(n.message.includes("very close")||n.message.includes("extremely close"))return"very_close";if(n.message.includes("close")||n.message.includes("warm"))return"close";if(n.message.includes("getting warmer"))return"warming"}return"none"}analyzeMomentumPatterns(e){const t=e.guessHistory.slice(-3);if(t.length<2)return"establishing";const n=[];for(let s=1;s<t.length;s++)n.push(Math.abs(t[s]-t[s-1]));const a=n.reduce(((e,t)=>e+t),0)/n.length;return a>25?"broad_search":a>10?"narrowing":a>3?"fine_tuning":"precision_mode"}analyzeFeedbackQuality(e){const t=e.filter((e=>"Hider"===e.agent));let n=0;for(const a of t.slice(-3))a.message.includes("close")||a.message.includes("warm")?n+=2:(a.message.includes("higher")||a.message.includes("lower"))&&(n+=1);return n>=4?"high_quality":n>=2?"medium_quality":"basic_directional"}analyzeEfficiencyTrends(e){const{guessCount:t,range:n}=e,a=Math.ceil(Math.log2(100));return{current:t<=a?"optimal":t<=a+2?"good":t<=a+4?"acceptable":"suboptimal",theoretical:a,actual:t,remaining_optimal:Math.ceil(Math.log2(n.max-n.min+1))}}synthesizeInsights(e){const{proximitySignals:t,momentumPatterns:n,feedbackQuality:a,efficiencyTrends:s}=e;let i="";return i="very_close"===t&&"precision_mode"===n?"High precision context detected - maintain strategic focus":"broad_search"===n&&"optimal"===s.current?"Excellent broad search efficiency - continue binary approach":"high_quality"===a&&"none"!==t?"Rich feedback available - balance mathematical optimality with contextual clues":"Standard strategic approach recommended",{proximitySignal:t,momentum:n,feedbackQuality:a,efficiency:s,strategicNote:i}}calculateAverageGuesses(e){if(0===e.length)return null;return(e.reduce(((e,t)=>e+(t.guessCount||7)),0)/e.length).toFixed(1)}identifySuccessPatterns(e){const t=[];return e.filter((e=>(e.guessCount||7)<=7)).length>.7*e.length&&t.push("consistent_efficiency"),e.some((e=>(e.guessCount||7)<=5))&&t.push("aggressive_early"),t}identifyCommonMistakes(e){const t=[];return e.filter((e=>(e.guessCount||7)>10)).length>.3*e.length&&t.push("premature_precision"),t}identifyOptimalStrategies(e){const t=[];return e.filter((e=>(e.guessCount||7)<=6)).length>0&&t.push("binary_search_mastery"),t}generateAlternativeStrategies(e,t){const{min:n,max:a}=e.range,s=[];if(s.push({name:"conservative_binary",guess:Math.floor((n+a)/2),reasoning:"Pure mathematical approach, ignore contextual noise"}),"very_close"===t.proximitySignal){const t=e.guessHistory[e.guessHistory.length-1];t&&s.push({name:"proximity_adjusted",guess:Math.max(n,Math.min(a,t+(Math.random()>.5?1:-1))),reasoning:"Minor adjustment based on proximity signal (not recommended for large ranges)"})}return s}generateSmallRangeOptions(e,t){const n=[];for(let a=e;a<=t;a++)n.push(a);return n.join(", ")}generateTinyRangeList(e,t){const n=[];for(let a=e;a<=t;a++)n.push(a);return n.join(", ")}generateFinalRangeList(e,t){const n=[];for(let a=e;a<=t;a++)n.push(a);return n.join(", ")}recordGameResult(e,t,n){const a={timestamp:Date.now(),rangeSize:100,finalGuessCount:n.guessCount,efficiency:n.guessCount<=7?"optimal":"suboptimal",strategiesUsed:Array.from(e.strategiesUsed||[]),contextualFactors:this.gatherContextualInsights(e,t),success:n.success};return this.learningDatabase.contextualInsights.push(a),this.learningDatabase.contextualInsights.length>100&&this.learningDatabase.contextualInsights.shift(),a}getLearningStats(){const e=this.learningDatabase.contextualInsights;if(0===e.length)return null;const t=e.reduce(((e,t)=>e+t.finalGuessCount),0)/e.length,n=e.filter((e=>"optimal"===e.efficiency)).length,a=e.filter((e=>e.success)).length/e.length;return{totalGames:e.length,averageGuesses:t.toFixed(1),optimalGameRate:(n/e.length*100).toFixed(1)+"%",successRate:(100*a).toFixed(1)+"%",learningConfidence:Math.min(.95,.5+.01*e.length)}}}class M{constructor(){this.promptCache=new Map,this.successPatterns=new Map,this.performanceMetrics=new Map,this.confidenceMetrics={gamePhaseWeights:{initial:{exploration:.7,certainty:.3},early:{exploration:.6,certainty:.4},middle:{exploration:.4,certainty:.6},late:{exploration:.2,certainty:.8},final:{exploration:.1,certainty:.9}},strategyConfidence:{binary_search:.9,adaptive_exploration:.7,random_guess:.4,pattern_based:.8,elimination:.85,creative_approach:.6,meta_strategy:.75},contextFactors:{rangeNarrowing:.3,guessHistory:.25,feedbackQuality:.2,adaptationLevel:.15,gamePhase:.1}},this.compactTemplates={microGuesser:"R:{range} G:{guess} J:{json}",compactGuesser:"Game R:{range} L:{last} S:{strategy} Next:{json}",microHider:"Secret:{secret} Guess:{guess} Dir:{direction} Response:",compactHider:"N:{secret} G:{guess}\u2192{direction} + hint: {json}",intelligentGuesser:"NumGuess R:{range} Phase:{phase} Conf:{confidence} Strategy:{strategy} \u2192 {json}",contextualHider:"Hider S:{secret} G:{guess}\u2192{direction} Context:{context} \u2192 {json}",learningGuesser:"Learn R:{range} History:{history} Pattern:{pattern} Next:{json}",adaptiveHider:"Adapt Secret:{secret} Player:{profile} Response:{json}"},this.intelligentSubstitutions={gameState:e=>"R:".concat(e.range.min,"-").concat(e.range.max," G:").concat(e.guessCount),strategy:e=>({binary_search:"Bin",adaptive_exploration:"Adapt",random_guess:"Rand",pattern_based:"Pat",creative_approach:"Creative",meta_strategy:"Meta"}[e]||"Std"),confidence:e=>e>.8?"Hi":e>.6?"Med":"Lo",phase:e=>({initial:"Init",early:"Early",middle:"Mid",late:"Late",final:"Final"}[e]||"Unknown"),complexity:e=>e>.7?"Complex":e>.4?"Med":"Simple",learning:e=>e>.8?"Expert":e>.5?"Learn":"Basic"},this.optimizationConfig={enableCaching:!0,maxCacheSize:100,adaptiveComplexity:!0,intelligentFallbacks:!0,performanceTracking:!0},this.qualityMetrics={tokenEfficiency:new Map,responseQuality:new Map,strategySuccess:new Map}}buildGamePrompt(e){const{gameState:t,conversationHistory:n,learningData:a,type:s}=e;try{switch(s){case"intelligent_guess":default:return this.generateGuesserPrompt(t,null,n,a);case"intelligent_feedback":return this.generateHiderPrompt(t,null,n,a);case"secret_selection":return this.buildEnhancedSecretPrompt(null,a)}}catch(i){return console.warn("Prompt generation failed, using fallback:",i.message),this.buildFallbackPrompt(e)}}generateHiderPrompt(e,t,n){let a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;if(!e.secret)return this.buildEnhancedSecretPrompt(t,a);const s=this.analyzeEnhancedContext(e,n,a),i=this.calculateContextualConfidence(e,s,n,"hider");return this.buildEnhancedFeedbackPrompt(e,s,i,a)}generateGuesserPrompt(e,t,n){let a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;const s=this.analyzeEnhancedContext(e,n,a),i=this.assessEnhancedComplexity(e,s,a);if(this.optimizationConfig.enableCaching){const t=this.checkPromptCache(e,i);if(t)return this.recordCacheHit(),t}let r;return r="simple"===i.level?this.buildMicroPrompt(e,i):"medium"===i.level?this.buildCompactPrompt(e,s,i):this.buildFullPrompt(e,s,n,i,a),this.optimizationConfig.enableCaching&&this.storePromptCache(e,i,r),r}analyzeEnhancedContext(e,t,n){return{gamePhase:this.determineGamePhase(e),rangeEfficiency:this.calculateRangeEfficiency(e),guessPattern:this.analyzeGuessPattern(e),learningInsights:this.extractLearningInsights(n),playerBehavior:this.analyzePlayerBehavior(t),strategicRecommendation:this.generateStrategicRecommendation(e,n)}}assessEnhancedComplexity(e,t,n){var s,i,r,o;const l={rangeSize:e.range.max-e.range.min+1,guessCount:e.guessCount||0,strategyType:(null===t||void 0===t||null===(s=t.strategicRecommendation)||void 0===s?void 0:s.strategy)||"unknown",adaptation:(null===t||void 0===t||null===(i=t.playerBehavior)||void 0===i?void 0:i.adaptationLevel)||.5},c=(0,a.A)((0,a.A)({},l),{},{learningDepth:(null===n||void 0===n||null===(r=n.gameHistory)||void 0===r?void 0:r.length)||0,contextRichness:this.calculateContextRichness(t),playerSophistication:(null===t||void 0===t||null===(o=t.playerBehavior)||void 0===o?void 0:o.sophistication)||.5,gamePhaseIntensity:this.getGamePhaseIntensity(t.gamePhase)});let g=0;return c.rangeSize>50&&(g+=.3),c.guessCount>5&&(g+=.2),"adaptive"===c.strategyType&&(g+=.3),c.adaptation>.7&&(g+=.2),c.learningDepth>5&&(g+=.2),c.contextRichness>.7&&(g+=.15),c.playerSophistication>.8&&(g+=.1),c.gamePhaseIntensity>.8&&(g+=.1),{level:g<.3?"simple":g<.7?"medium":"complex",score:g,factors:c,tokenBudget:this.calculateOptimalTokenBudget(g,c),cacheKey:this.generateCacheKey(e,c)}}calculateOptimalTokenBudget(e,t){let n=e<.3?60:e<.7?100:150;return t.learningDepth>10&&(n+=20),t.playerSophistication>.8&&(n+=15),Math.min(200,n)}buildMicroPrompt(e,t){const{min:n,max:a}=e.range,s=a-n+1,i=this.determineGamePhase(e);return"".concat(i," R:").concat(n,"-").concat(a,"(").concat(s,') Smart guess JSON: {guess:N,reason:"brief",conf:0.8}')}buildCompactPrompt(e,t,n){var a,s,i;const{min:r,max:o}=e.range,l=(null===t||void 0===t||null===(a=t.strategicRecommendation)||void 0===a?void 0:a.strategy)||"binary",c=(null===(s=e.guessHistory)||void 0===s?void 0:s.slice(-1)[0])||"none",g=(null===t||void 0===t||null===(i=t.strategicRecommendation)||void 0===i?void 0:i.confidence)||.7;return"NumGuess R:".concat(r,"-").concat(o," Last:").concat(c," Strategy:").concat(l," Conf:").concat(g,'\n  Optimal: {guess:N,reason:"strategic",conf:').concat(g.toFixed(1),"}")}buildFullPrompt(e,t,n,a,s){const i=this.calculateContextualConfidence(e,t,n,"guesser"),r=this.extractRecentFeedback(n),o=this.generateEnhancedStrategicGuidance(e,t,i,s);return this.buildEnhancedGuesserPrompt(e,t,r,o,i,a)}generateEnhancedStrategicGuidance(e,t,n,a){var s,i;const r=(null===t||void 0===t||null===(s=t.strategicRecommendation)||void 0===s?void 0:s.reasoning)||"Optimal binary search",o=n.value,l=t.gamePhase,c=(null===(i=t.learningInsights)||void 0===i?void 0:i.primaryPattern)||"none";let g=r;return g+=o>.8?" + Hi conf: decisive action":o>.6?" + Med conf: balanced approach":" + Lo conf: exploratory move","final"===l?g+=" + Final phase: precision required":"late"===l&&(g+=" + Late game: strategic focus"),"none"!==c&&(g+=" + Learning: ".concat(c)),g}buildEnhancedGuesserPrompt(e,t,n,a,s,i){var r,o;const l=Math.floor((e.range.min+e.range.max)/2);return"ENHANCED GUESSER SYSTEM\n  ============================\n  \n  GAME STATE:\n  \u2022 Range: [".concat(e.range.min,", ").concat(e.range.max,"] (").concat(e.range.max-e.range.min+1," numbers)\n  \u2022 Count: ").concat(e.guessCount,"/").concat(e.maxGuesses,"\n  \u2022 Phase: ").concat(t.gamePhase.toUpperCase(),"\n  \u2022 History: ").concat(JSON.stringify((null===(r=e.guessHistory)||void 0===r?void 0:r.slice(-3))||[]),"\n  \n  INTELLIGENCE ANALYSIS:\n  \u2022 Recent: ").concat(n,"\n  \u2022 Strategy: ").concat(a,"\n  \u2022 Confidence: ").concat(s.value," (").concat(s.reasoning,")\n  \u2022 Complexity: ").concat(i.level," (").concat(i.score.toFixed(2),")\n  \n  LEARNING INSIGHTS:\n  ").concat(t.learningInsights?"\u2022 Pattern: ".concat(t.learningInsights.primaryPattern,"\n  \u2022 Recommendation: ").concat(t.learningInsights.recommendation):"\u2022 No learning data available","\n  \n  OPTIMAL CHOICE: ").concat(l,'\n  \n  Response Format:\n  {\n    "guess": ').concat(l,',\n    "message": "Based on enhanced analysis, I choose ').concat(l,'",\n    "reasoning": "').concat(a,'",\n    "confidence": ').concat(s.value,',\n    "strategy": "').concat((null===t||void 0===t||null===(o=t.strategicRecommendation)||void 0===o?void 0:o.strategy)||"enhanced_binary",'"\n  }')}buildEnhancedSecretPrompt(e,t){var n;const a=this.extractLearningInsights(t),s=(null===a||void 0===a?void 0:a.recommendedDifficulty)||.6;return"ENHANCED HIDER SYSTEM - SECRET SELECTION\n  ==========================================\n  \n  LEARNING ANALYSIS:\n  ".concat(t?"\u2022 Previous games: ".concat((null===(n=t.gameHistory)||void 0===n?void 0:n.length)||0,"\n  \u2022 Player skill pattern: ").concat((null===a||void 0===a?void 0:a.playerSkillLevel)||"unknown","\n  \u2022 Recommended difficulty: ").concat(s):"\u2022 No learning data - selecting balanced difficulty",'\n  \n  STRATEGIC OBJECTIVES:\n  \u2022 Create engaging challenge\n  \u2022 Balance difficulty with fairness\n  \u2022 Apply learned patterns\n  \n  Response Format:\n  {\n    "number": <strategic_choice_1_to_100>,\n    "message": "I have chosen a number between 1 and 100. Good luck!",\n    "reasoning": "Strategic selection based on analysis",\n    "difficulty": ').concat(s,',\n    "confidence": 0.8\n  }')}buildEnhancedFeedbackPrompt(e,t,n,a){var s,i;const r=e.lastGuess<e.secret?"higher":"lower",o=Math.abs(e.lastGuess-e.secret),l=o<=5?"very close":o<=15?"close":"moderate";return"ENHANCED HIDER FEEDBACK SYSTEM\n  ==================================\n  \n  GAME STATE:\n  \u2022 Secret: ".concat(e.secret,"\n  \u2022 Guess: ").concat(e.lastGuess,"\n  \u2022 Direction: ").concat(r.toUpperCase(),"\n  \u2022 Distance: ").concat(o," (").concat(l,")\n  \u2022 Context: ").concat((null===t||void 0===t||null===(s=t.playerBehavior)||void 0===s?void 0:s.recentPattern)||"analyzing","\n  \n  FEEDBACK STRATEGY:\n  \u2022 Confidence: ").concat(n.value,"\n  \u2022 Engagement level: ").concat((null===t||void 0===t||null===(i=t.playerBehavior)||void 0===i?void 0:i.engagementLevel)||"moderate",'\n  \n  Response Format:\n  {\n    "message": "The number is ').concat(r," than ").concat(e.lastGuess).concat("very close"===l?". You're getting very close!":"close"===l?". You're getting warmer!":".",'",\n    "direction": "').concat(r,'",\n    "intent": "Clear guidance with appropriate encouragement",\n    "confidence": ').concat(n.value,"\n  }")}checkPromptCache(e,t){if(!this.optimizationConfig.enableCaching)return null;const n=t.cacheKey;return this.promptCache.get(n)||null}storePromptCache(e,t,n){if(!this.optimizationConfig.enableCaching)return;const a=t.cacheKey;if(this.promptCache.set(a,n),this.promptCache.size>this.optimizationConfig.maxCacheSize){const e=this.promptCache.keys().next().value;this.promptCache.delete(e)}}generateCacheKey(e,t){return"".concat(e.range.min,"-").concat(e.range.max,"_").concat(e.guessCount,"_").concat(t.rangeSize,"_").concat(t.learningDepth)}recordCacheHit(){const e=this.performanceMetrics.get("cacheHits")||0;this.performanceMetrics.set("cacheHits",e+1)}determineGamePhase(e){const t=e.guessCount||0,n=t/(e.maxGuesses||15),a=e.range.max-e.range.min+1;return 0===t?"initial":n<=.25||a>50?"early":n<=.6||a>10?"middle":n<=.85||a>3?"late":"final"}calculateRangeEfficiency(e){return 1-(e.range.max-e.range.min+1)/100}analyzeGuessPattern(e){if(!e.guessHistory||e.guessHistory.length<2)return{pattern:"insufficient_data",consistency:.5};const t=e.guessHistory,n=[];for(let s=1;s<t.length;s++)n.push(Math.abs(t[s]-t[s-1]));const a=n.reduce(((e,t)=>e+t),0)/n.length;return a>30?{pattern:"broad_search",consistency:.7}:a>15?{pattern:"moderate_search",consistency:.8}:a>5?{pattern:"focused_search",consistency:.9}:{pattern:"precise_search",consistency:.95}}extractLearningInsights(e){if(!e||!e.gameHistory||0===e.gameHistory.length)return{primaryPattern:"none",recommendation:"use_standard_approach",recommendedDifficulty:.6};const t=e.gameHistory,n=t.reduce(((e,t)=>e+(t.guessCount||7)),0)/t.length,a=n<=6?"expert":n<=8?"intermediate":"beginner",s="expert"===a?.8:"intermediate"===a?.6:.4;return{primaryPattern:"avg_".concat(n.toFixed(1),"_guesses"),recommendation:"adapt_to_".concat(a),playerSkillLevel:a,recommendedDifficulty:s,gamesAnalyzed:t.length}}analyzePlayerBehavior(e){if(!e||0===e.length)return{sophistication:.5,engagementLevel:"moderate",adaptationLevel:.5};const t=e.slice(-5);let n=.5,a="moderate";t.some((e=>{var t;return(null===(t=e.metadata)||void 0===t?void 0:t.reasoning)&&e.metadata.reasoning.length>20}))&&(n+=.2);const s=t.some((e=>{var t;return(null===(t=e.metadata)||void 0===t?void 0:t.strategy)&&e.metadata.strategy.includes("adaptive")}));return s&&(n+=.15),a=n>.7?"high":n>.4?"moderate":"low",{sophistication:Math.min(1,n),engagementLevel:a,adaptationLevel:n,recentPattern:s?"adaptive":"standard"}}generateStrategicRecommendation(e,t){const n=e.range.max-e.range.min+1,a=this.extractLearningInsights(t);let s="binary_search",i=.8,r="Standard binary search approach";return n<=5?(s="elimination",i=.9,r="Small range - use elimination strategy"):n>50&&(s="adaptive_exploration",i=.75,r="Large range - use adaptive exploration"),"expert"===a.playerSkillLevel?(s="meta_strategy",i=.85,r="Expert player detected - use meta-strategy"):"beginner"===a.playerSkillLevel&&(s="binary_search",i=.9,r="Beginner player - maintain standard approach"),{strategy:s,confidence:i,reasoning:r}}calculateContextRichness(e){var t,n,a,s;let i=.3;return(null===(t=e.learningInsights)||void 0===t?void 0:t.gamesAnalyzed)>0&&(i+=.2),(null===(n=e.playerBehavior)||void 0===n?void 0:n.sophistication)>.6&&(i+=.2),(null===(a=e.strategicRecommendation)||void 0===a?void 0:a.confidence)>.8&&(i+=.15),(null===(s=e.guessPattern)||void 0===s?void 0:s.consistency)>.8&&(i+=.15),Math.min(1,i)}getGamePhaseIntensity(e){return{initial:.3,early:.4,middle:.6,late:.8,final:1}[e]||.5}buildFallbackPrompt(e){const{gameState:t,type:n}=e;if("intelligent_feedback"===n||t&&t.secret){const e=t.lastGuess<t.secret?"higher":"lower";return"Fallback: The number is ".concat(e," than ").concat(t.lastGuess,'. {message:"').concat(e," than ").concat(t.lastGuess,'",direction:"').concat(e,'"}')}const a=t?Math.floor((t.range.min+t.range.max)/2):50;return"Fallback guess: {guess:".concat(a,',reason:"fallback binary search",confidence:0.7}')}getCacheStats(){return{cacheSize:this.promptCache.size,cacheHits:this.performanceMetrics.get("cacheHits")||0,successPatterns:this.successPatterns.size,confidenceMetrics:"enhanced",performanceMetrics:Object.fromEntries(this.performanceMetrics)}}recordPromptUsage(e,t){const n={timestamp:Date.now(),promptLength:e.length,success:!!t,promptType:this.detectPromptType(e)},a=this.performanceMetrics.get("usageHistory")||[];a.push(n),a.length>100&&a.shift(),this.performanceMetrics.set("usageHistory",a)}detectPromptType(e){return e.includes("ENHANCED GUESSER")?"enhanced_guesser":e.includes("ENHANCED HIDER")?"enhanced_hider":e.includes("Range:")&&e.length<100?"micro":e.includes("NumGuess")&&e.length<200?"compact":"full"}getEngineStats(){const e=this.performanceMetrics.get("usageHistory")||[];return{promptsGenerated:e.length,successRate:e.length>0?(e.filter((e=>e.success)).length/e.length*100).toFixed(1)+"%":"0%",cacheHitRate:this.promptCache.size>0?((this.performanceMetrics.get("cacheHits")||0)/this.promptCache.size*100).toFixed(1)+"%":"0%",averagePromptLength:e.length>0?(e.reduce(((e,t)=>e+t.promptLength),0)/e.length).toFixed(0):"0"}}reset(){this.promptCache.clear(),this.successPatterns.clear(),this.performanceMetrics.clear(),console.log("Enhanced Prompt Engine reset completed")}calculateContextualConfidence(e,t,n,a){var s;const i=(null===(s=this.confidenceMetrics.gamePhaseWeights[t.gamePhase])||void 0===s?void 0:s.certainty)||.6;return{value:Math.min(.95,.7*i),reasoning:"".concat(a," confidence based on ").concat(t.gamePhase," phase")}}extractRecentFeedback(e){if(!e||0===e.length)return"No recent feedback available";return e.slice(-2).map((e=>e.message||e.content||"")).join(" | ")}}class R{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.config={apiToken:e.apiToken||"",baseUrl:"https://generativelanguage.googleapis.com",model:e.model||"gemini-2.5-flash-preview-05-20",temperature:.2,maxTokens:e.maxTokens||8192},this.contextAnalyzer=new E,this.promptEngine=new M,this.advancedPromptSystem=new L,this.optimizationConfig={useTokenOptimization:!0,enableAPIIntelligence:!0,enableSmartCaching:!0,singleCallPerRole:!0},this.gameState=null,this.conversationHistory=[],this.gameMetrics={totalGames:0,avgIntelligence:.7},this.learningConfig={enableAdvancedLearning:!0,learningThreshold:1,adaptiveStrategy:!0,contextualMemory:10,forceAdvancedPrompts:!0,optimizePromptGeneration:!0},this.efficientConfig={gameLoopInterval:1e4,minInterval:6e3,maxRetries:2,emergencyDelay:15e3},this.apiOptimizer={lastCallTime:0,totalCalls:0,successfulCalls:0,rateLimitErrors:0,guesserCalls:0,hiderCalls:0,staticResponsesUsed:0,tokenOptimizationsUsed:0,cachedResponsesUsed:0},this.contextCache=new Map,this.responseCache=new Map,this.maxContextHistory=3}async executeOptimizedGuesserMove(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;console.log("Executing OPTIMIZED guesser move...");try{const t=this.preprocessContextForAPI(),n=this.buildTokenOptimizedGuesserPrompt(t,e),a=await this.callLLM(n,{analysisType:"IntelligentGuessingWithAnalysis"}),s=this.parseAdvancedJSON(a);return this.validateAdvancedIntelligence(s)?(this.apiOptimizer.guesserCalls++,this.apiOptimizer.tokenOptimizationsUsed++,this.formatAdvancedResult(s)):this.generateIntelligentFallback()}catch(t){return console.warn("Optimized guesser move failed:",t.message),this.generateIntelligentFallback()}}preprocessContextForAPI(){const{min:e,max:t}=this.gameState.range,n=t-e+1,a=this.determineGamePhase(),s={initial:"INIT",early:"EARLY",middle:"MID",late:"LATE",final:"FINAL"}[a]||"MID",i=this.extractKeyFeedbackSignals(),r=this.compressGuessHistory(),o=Math.floor((e+t)/2),l=this.identifyQuickPatterns();return{range:"".concat(e,"-").concat(t),size:n,optimal:o,phase:s,turn:this.gameState.guessCount+1,feedback:i,history:r,patterns:l,suggestions:this.generatePrecomputedSuggestions(e,t,n,a)}}extractKeyFeedbackSignals(){const e=this.conversationHistory.slice(-2).filter((e=>"Hider"===e.agent)).map((e=>e.message));if(0===e.length)return"NONE";const t=e.join(" ").toLowerCase();return t.includes("incredibly close")||t.includes("breathing")?"VERY_CLOSE":t.includes("very close")?"V_CLOSE":t.includes("close")||t.includes("warm")?"CLOSE":t.includes("getting")&&t.includes("warm")?"WARMING":t.includes("far")||t.includes("cold")?"FAR":"DIRECTIONAL"}compressGuessHistory(){const e=this.gameState.guessHistory||[];if(0===e.length)return"NONE";const t=e.slice(-3),n=this.detectHistoryPattern(e);return{recent:t.join(","),pattern:n,count:e.length}}identifyQuickPatterns(){const e=[],{min:t,max:n}=this.gameState.range;return n-t+1<=5&&e.push("TINY"),n-t+1<=15&&e.push("SMALL"),(t<=10||n>=90)&&e.push("EDGE"),this.gameState.guessCount>8&&e.push("BEHIND"),this.gameState.guessCount<=5&&e.push("EFFICIENT"),e.join("|")||"NORMAL"}generatePrecomputedSuggestions(e,t,n,a){const s=Math.floor((e+t)/2),i=["OPT:".concat(s)];if("FINAL"===a&&n<=3)for(let r=e;r<=t;r++)i.push("OPT:".concat(r));else if(n<=10){const a=Math.floor(n/4);i.push("ALT1:".concat(e+a)),i.push("ALT2:".concat(t-a))}return i.join(",")}detectHistoryPattern(e){if(e.length<2)return"NONE";const t=[];for(let a=1;a<e.length;a++)t.push(Math.abs(e[a]-e[a-1]));const n=t.reduce(((e,t)=>e+t),0)/t.length;return n>30?"BROAD":n>15?"MEDIUM":n>5?"NARROW":"PRECISE"}buildTokenOptimizedGuesserPrompt(e,t){const{range:n,size:a,optimal:s,phase:i,turn:r,feedback:o,history:l,patterns:c,suggestions:g}=e,d=this.compressLearningData(t);return"INTELLIGENT NUMBER GUESSER\n===========================\n\nGAME: ".concat(n," (").concat(a,"n) T").concat(r," ").concat(i,"\nOPTIMAL: ").concat(s,"\nFEEDBACK: ").concat(o,"\nHISTORY: ").concat(l.recent||"NONE"," (").concat(l.pattern,")\nPATTERNS: ").concat(c,"\nSUGGESTIONS: ").concat(g,"\n\n").concat(d?"LEARNING: ".concat(d):"",'\n\nANALYSIS TASKS:\n1. Analyze current situation and proximity signals\n2. Consider game phase and efficiency requirements  \n3. Evaluate historical patterns and feedback quality\n4. Choose optimal strategy: binary_search/precision_targeting/adaptive/final_choice\n5. Make intelligent guess with reasoning\n\nYour task is to perform intelligent analysis and make the best guess.\nConsider proximity signals, game efficiency, and strategic adaptation.\n\nRESPONSE:\n{\n  "analysis": "brief_situational_analysis",\n  "strategy": "chosen_strategy_type", \n  "guess": your_intelligent_choice,\n  "reasoning": "why_this_choice",\n  "confidence": 0.85\n}')}compressLearningData(e){var t;if(null===e||void 0===e||null===(t=e.gameHistory)||void 0===t||!t.length)return null;const n=e.gameHistory.length,a=(e.gameHistory.reduce(((e,t)=>e+(t.guessCount||7)),0)/n).toFixed(1),s=a<=6?"EXPERT":a<=8?"INTER":"BEGIN";return"".concat(n,"G/").concat(a,"avg/").concat(s)}async executeOptimizedHiderResponse(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(console.log("Executing OPTIMIZED hider response..."),e===this.gameState.secret)return this.generateStaticVictoryMessage();try{const n=this.preprocessHiderContextForAPI(e),a=this.buildTokenOptimizedHiderPrompt(n,t),s=await this.callLLM(a,{analysisType:"IntelligentHiderWithAnalysis"}),i=this.parseHiderJSON(s);return this.validateHiderResponse(i,e)?(this.apiOptimizer.hiderCalls++,this.apiOptimizer.tokenOptimizationsUsed++,this.formatHiderResult(i,e,n.direction)):this.generateHiderFallback(e,n.direction)}catch(n){console.warn("Optimized hider response failed:",n.message);const t=e<this.gameState.secret?"higher":"lower";return this.generateHiderFallback(e,t)}}preprocessHiderContextForAPI(e){const t=this.gameState.secret,n=e<t?"higher":"lower",a=Math.abs(e-t),s=this.gameState.guessCount;let i;i=a<=3?"VERY_CLOSE":a<=7?"CLOSE":a<=15?"MODERATE":a<=30?"FAR":"VERY_FAR";const r=s<=3?"EARLY":s<=7?"MID":s<=10?"LATE":"EXTENDED",o=this.analyzePlayerPerformancePattern();return{guess:e,direction:n.toUpperCase(),distance:a,proximity:i,turn:s,progress:r,performance:o}}analyzePlayerPerformancePattern(){const e=this.gameState.guessHistory||[];if(e.length<2)return"NEW_PLAYER";const t=this.detectMultiplePatterns(e);return t.systematic&&t.efficient?"SYSTEMATIC_EFFICIENT":t.systematic?"SYSTEMATIC_LEARNER":t.efficient?"INTUITIVE_EFFICIENT":t.random?"RANDOM_GUESSER":t.conservative?"CAUTIOUS_PLAYER":t.aggressive?"AGGRESSIVE_PLAYER":"ADAPTIVE_PLAYER"}detectMultiplePatterns(e){return{systematic:this.isSystematicApproach(e),efficient:this.isEfficientStrategy(e),random:this.isRandomStrategy(e),conservative:this.isConservativeStrategy(e),aggressive:this.isAggressiveStrategy(e)}}isSystematicApproach(e){let t={min:1,max:100},n=0;for(let a=0;a<e.length-1;a++){const s=e[a],i=t.max-t.min+1;if(s>=t.min&&s<=t.max){const e=(t.min+t.max)/2,a=i/4;Math.abs(s-e)<=a&&n++}s<this.gameState.secret?t.min=s+1:t.max=s-1}return n/(e.length-1)>.6}isEfficientStrategy(e){return e.length<=1.5*Math.ceil(Math.log2(100))}isRandomStrategy(e){if(e.length<3)return!1;const t=[];for(let a=1;a<e.length;a++)t.push(Math.abs(e[a]-e[a-1]));const n=t.reduce(((e,t)=>e+t),0)/t.length;return t.reduce(((e,t)=>e+Math.pow(t-n,2)),0)/t.length>400&&n>20}isConservativeStrategy(e){if(e.length<3)return!1;let t=0;for(let n=1;n<e.length;n++)Math.abs(e[n]-e[n-1])<=5&&t++;return t/(e.length-1)>.7}isAggressiveStrategy(e){if(e.length<3)return!1;let t=0;for(let n=1;n<e.length;n++)Math.abs(e[n]-e[n-1])>25&&t++;return t/(e.length-1)>.5}buildTokenOptimizedHiderPrompt(e,t){const{guess:n,direction:a,proximity:s,turn:i,progress:r,performance:o}=e,l=this.compressLearningData(t);return"INTELLIGENT HIDER RESPONSE\n==========================\n\nSITUATION: G".concat(n," \u2192 ").concat(a," | ").concat(s," | T").concat(i," ").concat(r,"\nPLAYER: ").concat(o,"\n").concat(l?"HISTORY: ".concat(l):"","\n\nRESPONSE TASKS:\n1. Analyze proximity level and player performance\n2. Determine appropriate encouragement level\n3. Consider player skill and game progress\n4. Generate helpful but balanced response\n5. Include required direction: ").concat(a,"\n\nGuidelines:\n- ").concat("VERY_CLOSE"===s?"High encouragement + excitement":"","\n- ").concat("CLOSE"===s?"Warm encouragement":"","\n- ").concat("MODERATE"===s?"Balanced guidance":"","\n- ").concat("FAR"===s?"Supportive direction":"",'\n- Always include "').concat(a,'" in your response\n- Match tone to ').concat(r,' game stage\n\nRESPONSE:\n{\n  "message": "Your_encouraging_response_with_').concat(a,'",\n  "tone": "encouraging/balanced/excited",\n  "analysis": "brief_situation_assessment"\n}')}async generateIntelligentSecretNumber(e){console.log("Generating intelligent secret number...");try{const t=this.buildSecretNumberPrompt(e),n=await this.callLLM(t,{analysisType:"SecretNumberGeneration"}),a=this.parseSecretNumberResponse(n);if(this.validateSecretNumber(a))return this.apiOptimizer.hiderCalls++,{number:a.number,message:a.message||"I have chosen a number between 1 and 100. Good luck!",reasoning:a.reasoning||"Intelligent selection based on analysis",difficulty:a.difficulty||.6,intelligent:!0};throw new Error("Invalid secret number response")}catch(t){return console.warn("Intelligent secret generation failed:",t.message),this.generateSmartSecretNumber(e)}}buildSecretNumberPrompt(e){const t=this.analyzePlayerPerformance(e),n=(null===e||void 0===e?void 0:e.gameHistory)||[];return"INTELLIGENT SECRET NUMBER SELECTION\n=====================================\n\nPLAYER ANALYSIS:\n".concat(n.length>0?"\u2022 Games Played: ".concat(n.length,"\n\u2022 Skill Level: ").concat(t.skillLevel,"\n\u2022 Average Guesses: ").concat(t.avgGuesses,"\n\u2022 Performance Trend: ").concat(this.calculateTrend(n)):"\u2022 New Player: No previous games\n\u2022 Default Difficulty: Moderate","\n\nSELECTION STRATEGY:\n").concat(this.generateSelectionStrategy(t,n),'\n\nOBJECTIVES:\n\u2022 Create engaging challenge\n\u2022 Balance difficulty with fairness  \n\u2022 Adapt to player skill level\n\u2022 Provide satisfying game experience\n\nChoose a number between 1 and 100 that will provide an appropriate challenge.\n\nResponse with JSON:\n{\n  "number": <your_strategic_choice_1_to_100>,\n  "message": "I have chosen a number between 1 and 100. Good luck!",\n  "reasoning": "Why you chose this number",\n  "difficulty": <0.3_to_0.9_difficulty_level>\n}')}generateSelectionStrategy(e,t){if(0===t.length)return"\u2022 First game: Choose moderate difficulty (30-70 range)\n\u2022 Avoid extremes to ensure fair experience\n\u2022 Consider numbers that aren't too obvious";const{skillLevel:n}=e;return"expert"===n?"\u2022 Expert player: Can handle challenging numbers\n\u2022 Consider edge cases, primes, or psychologically tricky numbers\n\u2022 Avoid overly simple patterns":"beginner"===n?"\u2022 Beginner player: Keep it moderate\n\u2022 Choose numbers in 20-80 range\n\u2022 Avoid extremely difficult selections":"\u2022 Intermediate player: Balanced challenge\n\u2022 Mix of easy and moderate selections\n\u2022 Adapt based on recent performance"}async runOptimizedGameLoop(e,t,n){const a=async()=>{if(!this.gameState.isActive||this.gameState.guessCount>=this.gameState.maxGuesses)return this.endIntelligentGameWithLearning(!1,t);try{console.log("=== Game Turn ".concat(this.gameState.guessCount+1," (2-API-Call Mode) ==="));const s=await this.executeOptimizedGuesserMove(n);if(!s||!s.guess||isNaN(s.guess))throw new Error("Invalid guess generated");if(this.gameState.guessCount++,this.gameState.lastGuess=parseInt(s.guess),this.gameState.guessHistory.push(parseInt(s.guess)),this.addToHistory("Guesser",s.message,{action:"make_guess",reasoning:s.reasoning}),e({sender:"ai",message:s.message,metadata:{guess:s.guess,reasoning:s.reasoning,confidence:s.confidence,guessCount:this.gameState.guessCount,currentRange:this.gameState.range}}),s.guess===this.gameState.secret){return e({sender:"ai",message:{message:"\ud83c\udf89 Congratulations! You found my number! Great job!",intelligent:!1,static:!0}.message,metadata:{gameEnd:!0,result:"victory"}}),this.endIntelligentGameWithLearning(!0,t)}const i=await this.executeOptimizedHiderResponse(s.guess,n);this.updateGameRange(s.guess,i.direction),this.addToHistory("Hider",i.message,{action:"provide_feedback",intent:i.intent}),e({sender:"ai",message:i.message,metadata:{direction:i.direction,currentRange:this.gameState.range}}),console.log("\u2705 Turn completed with 2 API calls (Total: ".concat(this.apiOptimizer.totalCalls,")")),setTimeout(a,this.efficientConfig.gameLoopInterval)}catch(s){console.error("Optimized game loop error:",s),s.message.includes("429")||s.message.includes("Rate limit")?setTimeout(a,this.efficientConfig.emergencyDelay):t({success:!1,error:s.message})}};setTimeout(a,3e3)}async startIntelligentGameWithLearning(e,t,n){console.log("Starting OPTIMIZED Game (1 initial + 2 per turn API calls)"),this.gameState={secret:null,guessCount:0,maxGuesses:15,range:{min:1,max:100},guessHistory:[],isActive:!0,currentRole:"hider",strategiesUsed:new Set},this.conversationHistory=[];try{const a=await this.generateIntelligentSecretNumber(e);this.gameState.secret=a.number,this.gameState.currentRole="guesser",this.addToHistory("Hider",a.message,{action:"select_secret",reasoning:a.reasoning}),t({sender:"ai",message:a.message,metadata:{gameStart:!0,reasoning:a.reasoning,difficulty:a.difficulty,optimizedMode:!0,intelligent:a.intelligent}}),console.log("\u2705 Secret number generated: ".concat(a.number," (API calls: ").concat(this.apiOptimizer.totalCalls,")")),this.runOptimizedGameLoop(t,n,e)}catch(a){console.error("Optimized game failed to start:",a),n({success:!1,error:a.message})}}determineGamePhase(){const e=this.gameState.guessCount||0,t=this.gameState.range.max-this.gameState.range.min+1;return 0===e?"initial":t>50||e<=2?"early":t>15||e<=5?"middle":t>5||e<=10?"late":"final"}analyzePlayerPerformance(e){var t;if(null===e||void 0===e||null===(t=e.gameHistory)||void 0===t||!t.length)return{skillLevel:"unknown",avgGuesses:7};const n=e.gameHistory.reduce(((e,t)=>e+(t.guessCount||7)),0)/e.gameHistory.length;return{skillLevel:n<=6?"expert":n<=8?"intermediate":"beginner",avgGuesses:n}}calculateTrend(e){if(e.length<2)return"insufficient_data";const t=e.slice(-3),n=e.slice(0,-3);if(0===n.length)return"new_player";const a=t.reduce(((e,t)=>e+(t.guessCount||7)),0)/t.length,s=n.reduce(((e,t)=>e+(t.guessCount||7)),0)/n.length;return a<s-1?"improving":a>s+1?"declining":"stable"}parseSecretNumberResponse(e){try{const t=e.match(/\{[\s\S]*?\}/);if(t){const e=JSON.parse(t[0]);if(e.number&&!isNaN(e.number))return{number:parseInt(e.number),message:e.message||"I have chosen a number between 1 and 100.",reasoning:e.reasoning||"Strategic selection",difficulty:e.difficulty||.6}}const n=e.match(/(\d+)/);if(n){const e=parseInt(n[1]);if(e>=1&&e<=100)return{number:e,message:"I have chosen a number between 1 and 100.",reasoning:"Extracted from response",difficulty:.6}}throw new Error("No valid number found")}catch(t){throw console.warn("Secret number parsing failed:",t.message),t}}validateSecretNumber(e){if(!e||!e.number||isNaN(e.number))return!1;const t=parseInt(e.number);return t>=1&&t<=100}parseHiderJSON(e){try{const t=e.match(/\{[\s\S]*?\}/);if(t){return JSON.parse(t[0])}const n=e.match(/"([^"]+)"/);return n?{message:n[1],reasoning:"Extracted from response"}:null}catch(t){return console.warn("Hider JSON parsing failed:",t.message),null}}validateHiderResponse(e,t){if(!e||!e.message)return console.warn("Hider response missing message"),!1;const n=t<this.gameState.secret?"higher":"lower";return e.message.toLowerCase().includes(n)?(console.log("\u2705 Hider response contains correct direction: ".concat(n)),!0):(console.warn("\u274c Hider response missing required direction: ".concat(n)),!1)}parseAdvancedJSON(e){try{const t=e.match(/\{[\s\S]*?\}/);if(t){const e=JSON.parse(t[0]);if(e.guess&&!isNaN(e.guess))return{guess:parseInt(e.guess),analysis:e.analysis||"Strategic analysis",strategy:e.strategy||"intelligent_analysis",reasoning:e.reasoning||"AI analysis and decision",confidence:e.confidence||.8}}const n=e.match(/(\d+)/);if(n){const e=parseInt(n[1]);if(e>=1&&e<=100)return{guess:e,analysis:"Extracted from response",strategy:"fallback_extraction",reasoning:"Number extracted from API response",confidence:.6}}throw new Error("No valid guess found")}catch(t){throw console.warn("Advanced JSON parsing failed:",t.message),t}}validateAdvancedIntelligence(e){if(!e||!e.guess||isNaN(e.guess))return console.warn("Invalid guess format"),!1;const t=parseInt(e.guess),{min:n,max:a}=this.gameState.range;return t<n||t>a?(console.warn("Guess ".concat(t," outside valid range ").concat(n,"-").concat(a)),!1):(console.log("\u2705 Valid guess: ".concat(t," with strategy: ").concat(e.strategy)),!0)}formatAdvancedResult(e){const t=parseInt(e.guess);return{guess:t,message:"Based on intelligent analysis, I choose ".concat(t),reasoning:e.reasoning,analysis:e.analysis,confidence:e.confidence,strategy:e.strategy,contextual:!0,advanced:!0,tokenOptimized:!0}}formatHiderResult(e,t,n){return{message:e.message,direction:n.toLowerCase(),intent:"Optimized intelligent guidance",intelligent:!0,tone:e.tone||"encouraging",analysis:e.analysis||"Contextual response"}}generateIntelligentFallback(){const{min:e,max:t}=this.gameState.range,n=Math.floor((e+t)/2),a=this.determineGamePhase();return console.log("Intelligent fallback activated: ".concat(a," phase, optimal=").concat(n)),{guess:n,message:"Using intelligent analysis, I choose ".concat(n),reasoning:"Intelligent fallback: ".concat(a," phase binary search optimal"),confidence:.8,strategy:"intelligent_fallback_".concat(a),contextual:!0,fallback:!0,advanced:!0}}generateHiderFallback(e,t){console.log("Using Hider fallback");const n=this.gameState.secret,a=Math.abs(e-n);let s="The number is ".concat(t," than ").concat(e,".");return a<=3?s+=" You're very close!":a<=10&&(s+=" Getting warmer!"),{message:s,direction:t.toLowerCase(),intent:"Fallback guidance",intelligent:!1,fallback:!0}}generateStaticVictoryMessage(){const e=["\ud83c\udf89 Congratulations! You found my number! Excellent work!","\ud83c\udfc6 Perfect! You got it! Well done!","\u2728 Amazing! You found the number! Great job!"];return{message:e[Math.floor(Math.random()*e.length)],intelligent:!1,static:!0}}generateSmartSecretNumber(e){const t=(null===e||void 0===e?void 0:e.gameHistory)||[];let n;if(0===t.length)n=30+Math.floor(40*Math.random());else{const e=t.reduce(((e,t)=>e+(t.guessCount||7)),0)/t.length;if(e<5){const e=[7,13,23,37,43,67,73,89,97];n=e[Math.floor(Math.random()*e.length)]}else if(e>10){const e=[25,50,75];n=e[Math.floor(Math.random()*e.length)]}else n=20+Math.floor(60*Math.random())}return this.apiOptimizer.staticResponsesUsed++,{number:n,message:"I have chosen a number between 1 and 100.",reasoning:"Smart selection based on ".concat(t.length," previous games"),difficulty:n<=10||n>=90?.8:.5}}updateGameRange(e,t){const n=(0,a.A)({},this.gameState.range);if("higher"===t?this.gameState.range.min=e+1:"lower"===t&&(this.gameState.range.max=e-1),this.gameState.range.min>this.gameState.range.max)throw console.error("Invalid range after update!",{guess:e,direction:t,oldRange:n,newRange:this.gameState.range}),this.gameState.range=n,new Error("Game state corruption detected");{const e=this.gameState.range.max-this.gameState.range.min+1;console.log("Range updated: ".concat(n.min,"-").concat(n.max," \u2192 ").concat(this.gameState.range.min,"-").concat(this.gameState.range.max," (size: ").concat(e,")"))}}addToHistory(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};t&&(this.conversationHistory.push({agent:e,message:t,metadata:n,timestamp:Date.now()}),this.conversationHistory.length>this.maxContextHistory&&this.conversationHistory.splice(0,this.conversationHistory.length-this.maxContextHistory))}endIntelligentGameWithLearning(e,t){this.gameState.isActive=!1,this.gameMetrics.totalGames++,console.log("Game Ended: ".concat(e?"Victory":"Defeat")),console.log("Token-Optimized API Stats:",this.getOptimizedEfficiencyStats()),t({success:e,guessCount:this.gameState.guessCount,secret:this.gameState.secret,conversationHistory:this.conversationHistory,efficiency:this.getOptimizedEfficiencyStats()})}getOptimizedEfficiencyStats(){var e;return{mode:"TOKEN_OPTIMIZED_API_INTELLIGENCE",approach:"Local preprocessing + API intelligence",totalAPICalls:this.apiOptimizer.totalCalls,successRate:this.getSuccessRate()+"%",guesserCalls:this.apiOptimizer.guesserCalls,hiderCalls:this.apiOptimizer.hiderCalls,tokenOptimizationsUsed:this.apiOptimizer.tokenOptimizationsUsed,staticResponsesUsed:this.apiOptimizer.staticResponsesUsed,cachedResponsesUsed:this.apiOptimizer.cachedResponsesUsed,averageCallsPerTurn:(null===(e=this.gameState)||void 0===e?void 0:e.guessCount)>0?(this.apiOptimizer.totalCalls/this.gameState.guessCount).toFixed(1):"0",optimizationLevel:"TOKEN_OPTIMIZED",intelligenceSource:"API_WITH_PREPROCESSING",costEfficiency:"MAXIMIZED"}}getSuccessRate(){return this.apiOptimizer.totalCalls>0?(this.apiOptimizer.successfulCalls/this.apiOptimizer.totalCalls*100).toFixed(1):"100"}sleep(e){return new Promise((t=>setTimeout(t,e)))}async callLLM(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const{retryCount:n=0,analysisType:a="standard"}=t;console.log("Sending ".concat(a," prompt (").concat(e.length," chars)"));try{var s,i,r,o,l;await this.enforceEfficientRateLimit(),console.log("LLM Call #".concat(this.apiOptimizer.totalCalls+1," - ").concat(a));const t={contents:[{parts:[{text:e}]}],generationConfig:{temperature:this.config.temperature,maxOutputTokens:this.config.maxTokens,topP:.9}},c="".concat(this.config.baseUrl,"/v1beta/models/").concat(this.config.model,":generateContent?key=").concat(this.config.apiToken),g=await fetch(c,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)});if(this.apiOptimizer.totalCalls++,this.apiOptimizer.lastCallTime=Date.now(),429===g.status){if(this.apiOptimizer.rateLimitErrors++,console.warn("Rate limit hit! Total: ".concat(this.apiOptimizer.rateLimitErrors)),n<this.efficientConfig.maxRetries){const t=15e3+15e3*n;return console.log("Backoff delay: ".concat(t/1e3,"s")),await this.sleep(t),this.callLLM(e,{retryCount:n+1,analysisType:a})}throw new Error("Rate limit exceeded")}if(!g.ok)throw new Error("API failed: ".concat(g.status));const d=(null===(s=(await g.json()).candidates)||void 0===s||null===(i=s[0])||void 0===i||null===(r=i.content)||void 0===r||null===(o=r.parts)||void 0===o||null===(l=o[0])||void 0===l?void 0:l.text)||"";if(!d||""===d.trim()){if(console.warn("Empty response for ".concat(a)),n<1)return console.log("Retrying empty response"),await this.sleep(3e3),this.callLLM(e,{retryCount:n+1,analysisType:a});throw new Error("LLM returned empty response")}return this.apiOptimizer.successfulCalls++,d}catch(c){throw console.error("LLM Error (".concat(a,"):"),c),c}}async enforceEfficientRateLimit(){const e=Date.now()-this.apiOptimizer.lastCallTime;let t=this.efficientConfig.minInterval;if(this.apiOptimizer.rateLimitErrors>0&&(t=this.efficientConfig.minInterval*(1+.5*this.apiOptimizer.rateLimitErrors)),e<t){const n=t-e;console.log("Rate limiting: ".concat(n,"ms")),await this.sleep(n)}}reset(){this.gameState=null,this.conversationHistory=[],this.contextCache.clear(),this.responseCache.clear(),this.apiOptimizer={lastCallTime:0,totalCalls:0,successfulCalls:0,rateLimitErrors:0,guesserCalls:0,hiderCalls:0,staticResponsesUsed:0,tokenOptimizationsUsed:0,cachedResponsesUsed:0}}}const _=()=>{var e,t;const n=["AIzaSyDsm7MsVHEJBO10SBNy11wg6eAqq-s63Bs","AIzaSyB8IkzmPQdow6dKu5rn_ywK5fMDAnyQd5s","AIzaSyAw0SizbU2D7fwxUetA0SiNu5TX5A1BbtM"],[r,p]=(0,s.useState)(0),[y,f]=(0,s.useState)({apiToken:n[0],model:"gemini-2.5-flash-preview-05-20",temperature:.8,maxTokens:8192}),[x,b]=(0,s.useState)("idle"),[C,N]=(0,s.useState)([]),[S,j]=(0,s.useState)({secretNumber:null,totalGuesses:0,currentRange:{min:1,max:100},gameResult:null,intelligenceScore:0,currentPlayer:null,currentRole:null,turnNumber:0,finalPlayer:null,totalTurns:0,avgConfidence:null,currentConfidence:null}),[A,w]=(0,s.useState)(!1),[I,L]=(0,s.useState)([]),[M,_]=(0,s.useState)(!1),[T,k]=(0,s.useState)(!1),[G,H]=(0,s.useState)(null),[O,z]=(0,s.useState)(null),[D,F]=(0,s.useState)("idle"),[U,B]=(0,s.useState)(!1),{startRealTimeGame:Y,currentPlayer:V,isGameActive:J,resetGameSession:q,getAPIStatus:Q,clearLearningMemory:W,getContextualLearning:K,learningMemory:X,getConfidenceReport:Z}=(e=>{const[t]=(0,s.useState)((()=>new R(e))),[n,i]=(0,s.useState)(null),[r,o]=(0,s.useState)(null),[,l]=(0,s.useState)({}),[c,g]=(0,s.useState)((()=>({gameHistory:[],strategicPatterns:[],playerAdaptations:{},successfulStrategies:new Set,failurePatterns:new Set,cumulativeIntelligence:.7,avgConfidence:.7,confidenceHistory:[],lastUpdated:Date.now()}))),d=(0,s.useCallback)((()=>{l({})}),[]);(0,s.useEffect)((()=>{e&&Object.assign(t.config,e)}),[e,t]);const m=(0,s.useCallback)((e=>{const t=(0,a.A)((0,a.A)((0,a.A)({},c),e),{},{lastUpdated:Date.now()});g(t),console.log("Learning data updated:",{totalGames:t.gameHistory.length,intelligence:t.cumulativeIntelligence,confidence:t.avgConfidence})}),[c]),u=(0,s.useCallback)((()=>{if(0===c.gameHistory.length)return{hasLearning:!1,insights:[],avgIntelligence:.7,avgConfidence:.7};const e=c.gameHistory.slice(-5),t=e.filter((e=>e.success)),n=e.reduce(((e,t)=>e+(t.intelligenceScore||.7)),0)/e.length;return{hasLearning:!0,insights:["Learned from ".concat(c.gameHistory.length," games"),"Recent success rate: ".concat((t.length/e.length*100).toFixed(1),"%"),"Cumulative intelligence: ".concat(n.toFixed(2)),"Average confidence: ".concat(c.avgConfidence.toFixed(2)),...Array.from(c.successfulStrategies).slice(0,3)],avgIntelligence:n,avgConfidence:c.avgConfidence,patterns:c.strategicPatterns,successfulStrategies:c.successfulStrategies}}),[c]);return{makeUltraIntelligentCall:async function(e){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};try{const s=u(),i=(0,a.A)((0,a.A)({},n),{},{learningHistory:s.hasLearning?{insights:s.insights,patterns:s.patterns,successfulStrategies:Array.from(s.successfulStrategies),avgIntelligence:s.avgIntelligence,avgConfidence:s.avgConfidence}:null}),r=await t.contextAnalyzer.analyzeContext(t.callLLM.bind(t),{agent:"User",message:e,context:i,timestamp:Date.now()}),o=t.promptEngine.calculateContextualConfidence?t.promptEngine.calculateContextualConfidence({range:{min:1,max:100},guessCount:0},r,t.conversationHistory,"user"):{value:s.avgConfidence,reasoning:"Using historical confidence"},l="You are an ultra-intelligent AI assistant with cumulative learning experience.\n\nINPUT: ".concat(e,"\nCONTEXT: ").concat(JSON.stringify(i),"\nCONTEXTUAL CONFIDENCE: ").concat(o.value," (").concat(o.reasoning,")\nLEARNING MEMORY: ").concat(s.hasLearning?"\n- Games Played: ".concat(c.gameHistory.length,"\n- Cumulative Intelligence: ").concat(s.avgIntelligence.toFixed(2),"\n- Average Confidence: ").concat(s.avgConfidence.toFixed(2),"\n- Key Insights: ").concat(s.insights.join(", "),"\n- Successful Strategies: ").concat(Array.from(s.successfulStrategies).join(", "),"\n"):"Starting fresh learning session","\n\nCONVERSATION HISTORY: ").concat(t.conversationHistory.slice(-3).map((e=>"".concat(e.agent,": ").concat(e.message))).join("\n"),'\n\nApply your accumulated learning to provide intelligent response with JSON:\n{\n  "response": "Your intelligent response",\n  "confidence": 0.0-1.0,\n  "reasoning": "Your reasoning process including learning application",\n  "intelligence_type": "analytical|creative|strategic|contextual",\n  "learning_applied": "How you used past experience"\n}'),g=await t.callLLM(l),d=t.parseJSON(g),h=d.confidence||o.value,p=[...c.confidenceHistory,{timestamp:Date.now(),confidence:h,context:e.substring(0,50)}].slice(-20),y=p.reduce(((e,t)=>e+t.confidence),0)/p.length;return m({confidenceHistory:p,avgConfidence:y}),{response:d.response||g,intelligence:{confidence:h,confidenceReasoning:o.reasoning,reasoning:d.reasoning||"Deep LLM analysis with learning",type:d.intelligence_type||"analytical",contextualAnalysis:r,learningApplied:d.learning_applied||"Applied cumulative experience"}}}catch(s){throw new Error("Ultra-intelligent call failed: ".concat(s.message))}},startRealTimeGame:async function(e,s,l){console.log("Starting Pure LLM Intelligence Real-Time Game...");try{const l=u(),g={id:Date.now(),startTime:Date.now(),roles:{hider:"ai_hider",guesser:"ai_guesser"},currentRole:"hider",turnCount:0,gamePhase:"secret_selection",avgConfidence:.7};o(g),i("hider"),console.log("Phase 1: Hider selecting secret number..."),await t.startIntelligentGameWithLearning(l,(t=>{var n,s,r,c,d,m;let u,h;if(console.log("Turn Update:",t),"secret_selection"===(null===(n=t.metadata)||void 0===n?void 0:n.phase))u="hider",h="guesser",g.gamePhase="guessing";else if("guessing"===(null===(s=t.metadata)||void 0===s?void 0:s.phase))u="guesser",h="hider";else if("feedback"===(null===(r=t.metadata)||void 0===r?void 0:r.phase))u="hider",h="guesser";else{var p,y,f;"select_secret"===(null===(p=t.metadata)||void 0===p?void 0:p.action)?(u="hider",h="guesser"):"make_guess"===(null===(y=t.metadata)||void 0===y?void 0:y.action)?(u="guesser",h="hider"):"provide_feedback"===(null===(f=t.metadata)||void 0===f?void 0:f.action)?(u="hider",h="guesser"):(u=g.turnCount%2===0?"hider":"guesser",h="hider"===u?"guesser":"hider")}const x=(null===(c=t.metadata)||void 0===c?void 0:c.confidence)||.7;g.avgConfidence=(g.avgConfidence*g.turnCount+x)/(g.turnCount+1),g.turnCount++,g.currentRole=h,o((0,a.A)({},g)),i(h);const v=(0,a.A)((0,a.A)({},t),{},{currentPlayer:u,nextPlayer:h,turnNumber:g.turnCount,playerRole:"hider"===u?"Number Hider":"Number Guesser",intelligence:(null===(d=t.metadata)||void 0===d?void 0:d.intelligence)||"Pure LLM reasoning with learning",strategy:(null===(m=t.metadata)||void 0===m?void 0:m.strategy)||"adaptive_learning",confidence:x,gameAvgConfidence:g.avgConfidence,isIntelligent:!0,learningApplied:l.hasLearning});console.log("Role Update: ".concat(u," -> ").concat(h)),e(v)}),(e=>{console.log("Game Complete:",e);const t={id:g.id,timestamp:Date.now(),success:e.success,guessCount:e.guessCount,secret:e.secret,intelligenceScore:e.intelligenceScore||.8,strategies:Array.from(e.strategiesUsed||[]),avgConfidence:g.avgConfidence,playerPerformance:{hider:e.hiderPerformance||{effectiveness:.8},guesser:e.guesserPerformance||{efficiency:.8}}},d={gameHistory:[...c.gameHistory,t],cumulativeIntelligence:.8*c.cumulativeIntelligence+.2*(e.intelligenceScore||.8),avgConfidence:.8*c.avgConfidence+.2*g.avgConfidence,successfulStrategies:new Set([...c.successfulStrategies,...e.success&&e.strategiesUsed||[]]),strategicPatterns:[...c.strategicPatterns,{timestamp:Date.now(),pattern:"Game ".concat(c.gameHistory.length+1,": ").concat(e.success?"Success":"Failure"," with ").concat(e.guessCount," guesses"),intelligence:e.intelligenceScore||.8,confidence:g.avgConfidence}].slice(-20)};m(d),i(null),o(null);const u=(0,a.A)((0,a.A)({},e),{},{systemType:"Pure LLM Intelligence with Learning",finalPlayer:n,totalTurns:(null===r||void 0===r?void 0:r.turnCount)||0,avgConfidence:g.avgConfidence,learningData:{totalGamesPlayed:d.gameHistory.length,cumulativeIntelligence:d.cumulativeIntelligence,avgConfidence:d.avgConfidence,learningProgression:d.gameHistory.slice(-3)},intelligenceMetrics:{overallScore:e.intelligenceScore||.8,adaptiveThinking:.85,contextualUnderstanding:.9,strategicEvolution:.8,cumulativeLearning:l.hasLearning?.9:.7,confidenceLevel:g.avgConfidence}});s(u)}))}catch(g){console.error("Pure LLM game start error:",g),i(null),o(null),l(g)}},makeGameIntelligentMove:async function(e){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const s=u(),i=(0,a.A)((0,a.A)({},n),{},{learning:s});try{const n=await t.contextAnalyzer.analyzeContext(t.callLLM.bind(t),{agent:"System",message:"Game move analysis with learning",context:i,timestamp:Date.now()}),r=t.promptEngine.calculateContextualConfidence?t.promptEngine.calculateContextualConfidence(e,n,t.conversationHistory,"guesser"):{value:s.avgConfidence,reasoning:"Using historical confidence"},o=t.promptEngine.generateGuesserPrompt(e,n,t.conversationHistory,s),l=await t.callLLM(o),c=t.parseJSON(l);return(0,a.A)((0,a.A)({},c),{},{contextualConfidence:r.value})}catch(r){throw new Error("Intelligent game move failed: ".concat(r.message))}},generateGameResponse:async(e,n,s)=>{const i=u();try{const r=await t.contextAnalyzer.analyzeContext(t.callLLM.bind(t),{agent:"System",message:"Game response generation with learning",context:{guess:e,secret:n,learning:i},timestamp:Date.now()}),o=t.promptEngine.generateHiderPrompt((0,a.A)((0,a.A)({},s),{},{secret:n,lastGuess:e}),r,t.conversationHistory,i),l=await t.callLLM(o);return t.parseJSON(l)}catch(r){throw new Error("Game response generation failed: ".concat(r.message))}},switchCurrentPlayer:()=>{if(!r)return;const e="hider"===n?"guesser":"hider";i(e),o((0,a.A)((0,a.A)({},r),{},{currentRole:e,turnCount:r.turnCount+1})),console.log("Manual Role Switch: ".concat(n," -> ").concat(e)),d()},getCurrentGameState:()=>({currentPlayer:n,currentRole:null===r||void 0===r?void 0:r.currentRole,gameSession:r,isGameActive:null!==r,turnCount:(null===r||void 0===r?void 0:r.turnCount)||0,gamePhase:(null===r||void 0===r?void 0:r.gamePhase)||"idle",roles:(null===r||void 0===r?void 0:r.roles)||{},avgConfidence:(null===r||void 0===r?void 0:r.avgConfidence)||.7}),resetGameSession:()=>{i(null),o(null),t.gameState=null,console.log("Pure LLM Intelligence game session reset"),d()},currentPlayer:n,gameSession:r,isGameActive:null!==r,getContextualLearning:u,saveLearningMemory:m,learningMemory:c,clearLearningMemory:()=>{const e={gameHistory:[],strategicPatterns:[],playerAdaptations:{},successfulStrategies:new Set,failurePatterns:new Set,cumulativeIntelligence:.7,avgConfidence:.7,confidenceHistory:[],lastUpdated:Date.now()};m(e),console.log("Learning memory cleared")},exportLearningData:()=>{const e=u();return(0,a.A)((0,a.A)({},c),{},{learning:e,exportedAt:Date.now(),systemVersion:"Pure LLM Intelligence with Learning v2.0"})},getConfidenceReport:()=>({current:c.avgConfidence,history:c.confidenceHistory.slice(-10),trend:c.confidenceHistory.length>1?c.confidenceHistory.slice(-1)[0].confidence>c.avgConfidence?"rising":"falling":"stable"}),getAPIStatus:()=>{const e=u();return{systemType:"Pure LLM Intelligence System with Learning",status:"operational",intelligenceLevel:e.avgIntelligence,confidenceLevel:e.avgConfidence,totalGames:e.hasLearning?c.gameHistory.length:0,cumulativeIntelligence:c.cumulativeIntelligence,learningStatus:{hasLearning:e.hasLearning,gameHistory:c.gameHistory.length,insights:e.insights.length,successfulStrategies:Array.from(c.successfulStrategies).length},features:["Deep Conversation Analysis","Adaptive Strategy Evolution","Contextual Intelligence","Dynamic Prompt Engineering","Cumulative Learning Memory","Role-Aware Intelligence","Confidence Tracking"]}},getIntelligenceReport:()=>{const e=t.getIntelligenceStatus(),n=u();return{overallIntelligence:n.avgIntelligence,contextualUnderstanding:e.contextInsights/10,adaptiveCapacity:.85,learningEvidence:n.hasLearning,strategicThinking:.9,cumulativeLearning:u().hasLearning?.95:.7,confidenceLevel:n.avgConfidence,features:[...e.features,"Learning Memory: ".concat(c.gameHistory.length," games"),"Intelligence Growth: ".concat(n.avgIntelligence.toFixed(2)),"Confidence Level: ".concat(n.avgConfidence.toFixed(2))]}},isProcessing:!1,apiError:null,currentAnalysis:t.contextAnalyzer.strategicInsights.slice(-1)[0]||null,aiStrategy:"PURE_LLM_INTELLIGENCE_WITH_LEARNING",aiPersonality:"ADAPTIVE_LEARNING_INTELLIGENT",intelligence:{strategicInsights:t.contextAnalyzer.strategicInsights,gamePatterns:t.contextAnalyzer.gamePatterns,conversationHistory:t.conversationHistory,getFullContextualIntelligence:()=>({memoryDepth:t.conversationHistory.length,patterns:t.contextAnalyzer.gamePatterns,strategicInsights:t.contextAnalyzer.strategicInsights,currentContext:"Pure LLM contextual intelligence with learning active",userProfile:{adaptationLevel:.8,intelligenceLevel:u().avgIntelligence,confidenceLevel:u().avgConfidence},learningData:u().hasLearning?c:null})},availableStrategies:["PURE_LLM_ADAPTIVE_LEARNING","CONTEXTUAL_INTELLIGENCE_WITH_MEMORY","STRATEGIC_EVOLUTION_CUMULATIVE"],availablePersonalities:["DEEP_ANALYTICAL_LEARNING","ADAPTIVE_SUPPORTIVE_MEMORY","STRATEGIC_COMPETITIVE_EVOLUTION"],clearError:()=>d(),clearConversationHistory:()=>{t.conversationHistory=[],t.contextAnalyzer=new E,d()},clearCallHistory:()=>{t.conversationHistory=[],d()}}})(y),$=()=>{const e=(r+1)%n.length;p(e),f((t=>(0,a.A)((0,a.A)({},t),{},{apiToken:n[e]}))),ee("Switched to API token ".concat(e+1),"info")},ee=function(e){let t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;const n={message:e,type:arguments.length>1&&void 0!==arguments[1]?arguments[1]:"info",timestamp:(new Date).toLocaleTimeString(),apiResponse:t,id:Date.now()+Math.random()};L((e=>[...(e||[]).slice(-29),n]))};(0,s.useEffect)((()=>{if(J&&"playing"===x){const e=setInterval((()=>{try{const e=Q(),t=K(),n={intelligence:(null===e||void 0===e?void 0:e.systemType)||"LLM Intelligence System with Learning",contextualAnalysis:"Intelligent insights: ".concat(((null===t||void 0===t?void 0:t.insights)||[]).length," items"),learningCapacity:"Cumulative intelligence: ".concat((100*((null===t||void 0===t?void 0:t.avgIntelligence)||.7)).toFixed(0),"%"),activity:D};console.log("System Status Update:",n)}catch(e){ee("Intelligence status update failed: ".concat(e.message),"warning")}}),5e3);return()=>clearInterval(e)}}),[x,J,Q,K,D]);const te=e=>null!==e&&void 0!==e&&!isNaN(e),ne=(()=>{try{var e;const t=K(),n=Z();return{hasLearning:(null===t||void 0===t?void 0:t.hasLearning)||!1,gameCount:(null===X||void 0===X||null===(e=X.gameHistory)||void 0===e?void 0:e.length)||0,avgIntelligence:(null===t||void 0===t?void 0:t.avgIntelligence)||.7,avgConfidence:(null===t||void 0===t?void 0:t.avgConfidence)||(null===n||void 0===n?void 0:n.current)||.7,insights:(null===t||void 0===t?void 0:t.insights)||[],successfulStrategies:Array.from((null===X||void 0===X?void 0:X.successfulStrategies)||[])}}catch(t){return console.error("Error getting learning stats:",t),{hasLearning:!1,gameCount:0,avgIntelligence:.7,avgConfidence:.7,insights:[],successfulStrategies:[]}}})();return(0,v.jsx)("div",{className:"max-w-6xl mx-auto p-6 bg-gradient-to-br from-indigo-50 via-purple-50 to-pink-50 min-h-screen",children:(0,v.jsxs)("div",{className:"bg-white rounded-3xl shadow-2xl p-8",children:[(0,v.jsxs)("div",{className:"text-center mb-8",children:[(0,v.jsx)("h1",{className:"text-5xl font-bold bg-gradient-to-r from-indigo-600 via-purple-600 to-pink-600 bg-clip-text text-transparent mb-4",children:"LLM Intelligent Game System"}),(0,v.jsxs)("div",{className:"flex items-center justify-center gap-4 mb-2 flex-wrap",children:[(0,v.jsxs)("div",{className:"flex items-center gap-2",children:[(0,v.jsx)(i.A,{className:"w-6 h-6 text-emerald-600"}),(0,v.jsx)("span",{className:"text-lg font-semibold text-emerald-600",children:"LLM Intelligence + Learning + Confidence"}),(0,v.jsx)(l.A,{className:"w-6 h-6 text-emerald-600"})]}),(0,v.jsxs)("div",{className:"flex items-center gap-2",children:[(0,v.jsx)(c,{className:"w-5 h-5 text-blue-600"}),(0,v.jsxs)("span",{className:"text-sm text-blue-600",children:["Status: ",D]})]}),(0,v.jsxs)("button",{onClick:()=>B(!0),className:"flex items-center gap-2 px-4 py-2 bg-gradient-to-r from-cyan-500 to-blue-500 text-white rounded-lg font-medium hover:from-cyan-600 hover:to-blue-600 transition-all transform hover:scale-105 shadow-md text-sm",children:[(0,v.jsx)(g,{className:"w-4 h-4"}),"Project Info"]})]}),(0,v.jsx)("p",{className:"text-xl text-gray-600",children:"LLM Intelligence: Deep conversation analysis + Cumulative learning memory + Role perception intelligence + Confidence tracking + Multi-API failover"}),(0,v.jsx)("div",{className:"mt-2 text-sm text-green-600 bg-green-50 px-4 py-2 rounded-lg inline-block",children:"Cumulative learning | Role recognition | API optimization | Intelligent caching | Confidence calibration | Token rotation"})]}),ne&&ne.hasLearning&&(0,v.jsxs)("div",{className:"mb-6 p-4 bg-gradient-to-r from-blue-50 to-indigo-50 rounded-xl border border-blue-200",children:[(0,v.jsxs)("h4",{className:"font-semibold mb-3 text-blue-800 flex items-center gap-2",children:[(0,v.jsx)(g,{className:"w-5 h-5"}),"Cumulative Learning Memory + Confidence Tracking"]}),(0,v.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4 text-sm",children:[(0,v.jsxs)("div",{className:"bg-white/70 p-3 rounded-lg",children:[(0,v.jsx)("div",{className:"text-blue-600 font-medium",children:"Learning History"}),(0,v.jsxs)("div",{className:"text-lg font-bold text-blue-800",children:[ne.gameCount," games"]}),(0,v.jsx)("div",{className:"text-xs text-blue-600",children:"Cumulative experience"})]}),(0,v.jsxs)("div",{className:"bg-white/70 p-3 rounded-lg",children:[(0,v.jsx)("div",{className:"text-blue-600 font-medium",children:"Intelligence Evolution"}),(0,v.jsxs)("div",{className:"text-lg font-bold text-blue-800",children:[(100*ne.avgIntelligence).toFixed(1),"%"]}),(0,v.jsx)("div",{className:"text-xs text-blue-600",children:"Continuously improving"})]}),(0,v.jsxs)("div",{className:"bg-white/70 p-3 rounded-lg",children:[(0,v.jsx)("div",{className:"text-blue-600 font-medium",children:"Confidence Level"}),(0,v.jsx)("div",{className:"text-lg font-bold text-blue-800",children:te(ne.avgConfidence)?"".concat((100*ne.avgConfidence).toFixed(1),"%"):"Calibrating..."}),(0,v.jsx)("div",{className:"text-xs text-blue-600",children:"Decision confidence"})]}),(0,v.jsxs)("div",{className:"bg-white/70 p-3 rounded-lg",children:[(0,v.jsx)("div",{className:"text-blue-600 font-medium",children:"Successful Strategies"}),(0,v.jsx)("div",{className:"text-lg font-bold text-blue-800",children:ne.successfulStrategies.length}),(0,v.jsx)("div",{className:"text-xs text-blue-600",children:"Mastered strategies"})]})]}),(0,v.jsxs)("div",{className:"mt-3 text-xs text-blue-700",children:[(0,v.jsx)("strong",{children:"Latest insights:"})," ",(ne.insights||[]).slice(0,2).join(" | ")]})]}),A&&(0,v.jsxs)("div",{className:"mb-6 p-6 bg-gradient-to-r from-blue-50 to-indigo-50 rounded-2xl border border-blue-200 shadow-lg",children:[(0,v.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,v.jsxs)("h4",{className:"font-bold text-blue-800 text-xl flex items-center gap-2",children:[(0,v.jsx)(d,{className:"w-6 h-6"}),"Gemini API Configuration (API Optimized)"]}),(0,v.jsx)("button",{onClick:()=>w(!1),className:"p-2 hover:bg-blue-100 rounded-full transition-colors",children:(0,v.jsx)(o,{className:"w-5 h-5 text-blue-600"})})]}),(0,v.jsxs)("div",{className:"space-y-4",children:[(0,v.jsxs)("div",{children:[(0,v.jsxs)("label",{className:"block text-sm font-medium text-blue-700 mb-2",children:["Google Gemini API Key (Current: Token ",r+1,"/3)"]}),(0,v.jsxs)("div",{className:"flex gap-2",children:[(0,v.jsx)("input",{type:"password",value:y.apiToken,onChange:e=>f((t=>(0,a.A)((0,a.A)({},t),{},{apiToken:e.target.value}))),placeholder:"Enter your Gemini API Key (AIzaSy...)",className:"flex-1 px-4 py-2 border border-blue-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"}),(0,v.jsx)("button",{onClick:$,className:"px-4 py-2 bg-blue-500 text-white rounded-lg hover:bg-blue-600 transition-colors",children:"Switch Token"})]}),(0,v.jsxs)("div",{className:"mt-2 text-xs text-blue-600",children:["Available tokens: ",n.length," | Current: #",r+1]})]}),(0,v.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,v.jsxs)("div",{children:[(0,v.jsx)("label",{className:"block text-sm font-medium text-blue-700 mb-2",children:"Creativity Temperature"}),(0,v.jsx)("input",{type:"number",min:"0.1",max:"1.0",step:"0.1",value:y.temperature,onChange:e=>f((t=>(0,a.A)((0,a.A)({},t),{},{temperature:parseFloat(e.target.value)}))),className:"w-full px-3 py-2 border border-blue-300 rounded-lg focus:ring-2 focus:ring-blue-500"})]}),(0,v.jsxs)("div",{children:[(0,v.jsx)("label",{className:"block text-sm font-medium text-blue-700 mb-2",children:"Max Tokens (Optimized)"}),(0,v.jsx)("input",{type:"number",min:"400",max:"800",step:"50",value:y.maxTokens,onChange:e=>f((t=>(0,a.A)((0,a.A)({},t),{},{maxTokens:parseInt(e.target.value)}))),className:"w-full px-3 py-2 border border-blue-300 rounded-lg focus:ring-2 focus:ring-blue-500"})]})]})]})]}),U&&(0,v.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-60 flex items-center justify-center z-50 p-4",children:(0,v.jsxs)("div",{className:"bg-white rounded-3xl shadow-2xl max-w-5xl w-full max-h-[90vh] flex flex-col overflow-hidden",children:[(0,v.jsx)("div",{className:"bg-gradient-to-r from-indigo-600 via-purple-600 to-pink-600 p-6 text-white",children:(0,v.jsxs)("div",{className:"flex items-center justify-between",children:[(0,v.jsxs)("div",{children:[(0,v.jsxs)("h2",{className:"text-3xl font-bold mb-2 flex items-center gap-3",children:[(0,v.jsx)(i.A,{className:"w-8 h-8"}),"Intelligent Number Guessing Game System"]}),(0,v.jsx)("p",{className:"text-lg text-indigo-100",children:"LLM-based Bidirectional Adaptive Learning AI System"})]}),(0,v.jsx)("button",{onClick:()=>B(!1),className:"p-2 hover:bg-white hover:bg-opacity-20 rounded-full transition-all",children:(0,v.jsx)(o,{className:"w-8 h-8"})})]})}),(0,v.jsx)("div",{className:"flex-1 overflow-y-auto p-6",children:(0,v.jsxs)("div",{className:"space-y-8",children:[(0,v.jsxs)("div",{className:"bg-gradient-to-r from-blue-50 to-indigo-50 rounded-2xl p-6 border border-blue-200",children:[(0,v.jsxs)("h3",{className:"text-2xl font-bold text-gray-800 mb-4 flex items-center gap-2",children:[(0,v.jsx)(l.A,{className:"w-6 h-6 text-blue-600"}),"Project Overview"]}),(0,v.jsxs)("p",{className:"text-lg text-gray-700 leading-relaxed",children:["An intelligent number guessing game system based on Large Language Models (LLM), featuring ",(0,v.jsx)("strong",{className:"text-blue-700",children:"dual AI autonomous competition"})," and ",(0,v.jsx)("strong",{className:"text-blue-700",children:"continuous learning evolution"}),". The system demonstrates AI capabilities in strategic planning, opponent modeling, and adaptive learning through human-like game behavior simulation."]})]}),(0,v.jsxs)("div",{className:"grid md:grid-cols-2 gap-6",children:[(0,v.jsxs)("div",{className:"bg-gradient-to-br from-red-50 to-pink-50 rounded-2xl p-6 border border-red-200",children:[(0,v.jsx)("h3",{className:"text-xl font-bold text-red-800 mb-4 flex items-center gap-2",children:"\ud83c\udfaf Hider (Number Setter)"}),(0,v.jsxs)("div",{className:"space-y-3 text-gray-700",children:[(0,v.jsx)("p",{children:(0,v.jsx)("strong",{children:"Core Capabilities:"})}),(0,v.jsxs)("ul",{className:"space-y-2 ml-4",children:[(0,v.jsxs)("li",{children:["\u2022 ",(0,v.jsx)("strong",{children:"Strategic Number Selection:"})," Choose challenging numbers based on opponent behavior patterns"]}),(0,v.jsxs)("li",{children:["\u2022 ",(0,v.jsx)("strong",{children:"Player Profiling:"})," Analyze guesser's strategy preferences and psychological traits"]}),(0,v.jsxs)("li",{children:["\u2022 ",(0,v.jsx)("strong",{children:"Adaptive Difficulty:"})," Dynamically adjust challenge level based on historical performance"]}),(0,v.jsxs)("li",{children:["\u2022 ",(0,v.jsx)("strong",{children:"Strategy Evolution:"})," Learn from each game to optimize questioning strategies"]})]}),(0,v.jsx)("div",{className:"bg-red-100 p-3 rounded-lg mt-4",children:(0,v.jsxs)("p",{className:"text-sm text-red-700",children:[(0,v.jsx)("strong",{children:"Verbose Design:"}),' The Hider is intentionally designed to be "chatty" and expressive, providing rich linguistic feedback. This verbose communication style allows the Guesser to learn the Hider\'s questioning patterns, personality traits, and strategic tendencies through natural language processing.']})})]})]}),(0,v.jsxs)("div",{className:"bg-gradient-to-br from-green-50 to-emerald-50 rounded-2xl p-6 border border-green-200",children:[(0,v.jsx)("h3",{className:"text-xl font-bold text-green-800 mb-4 flex items-center gap-2",children:"\ud83d\udd0d Guesser (Number Finder)"}),(0,v.jsxs)("div",{className:"space-y-3 text-gray-700",children:[(0,v.jsx)("p",{children:(0,v.jsx)("strong",{children:"Core Capabilities:"})}),(0,v.jsxs)("ul",{className:"space-y-2 ml-4",children:[(0,v.jsxs)("li",{children:["\u2022 ",(0,v.jsx)("strong",{children:"Multi-Strategy Guessing:"})," Binary search, adaptive exploration, creative approaches"]}),(0,v.jsxs)("li",{children:["\u2022 ",(0,v.jsx)("strong",{children:"Linguistic Analysis:"})," Deep understanding of Hider's verbal cues and semantic hints"]}),(0,v.jsxs)("li",{children:["\u2022 ",(0,v.jsx)("strong",{children:"Pattern Recognition:"})," Extract successful patterns and learn from failures"]}),(0,v.jsxs)("li",{children:["\u2022 ",(0,v.jsx)("strong",{children:"Confidence Calibration:"})," Real-time assessment of guess confidence and success probability"]})]}),(0,v.jsx)("div",{className:"bg-green-100 p-3 rounded-lg mt-4",children:(0,v.jsxs)("p",{className:"text-sm text-green-700",children:[(0,v.jsx)("strong",{children:"Learning Mechanism:"})," By analyzing the Hider's verbose feedback, language patterns, and behavioral characteristics, the Guesser continuously optimizes its guessing strategies and develops a deeper understanding of the Hider's communication style."]})})]})]})]}),(0,v.jsxs)("div",{className:"bg-gradient-to-r from-purple-50 to-pink-50 rounded-2xl p-6 border border-purple-200",children:[(0,v.jsxs)("h3",{className:"text-2xl font-bold text-purple-800 mb-4 flex items-center gap-2",children:[(0,v.jsx)(c,{className:"w-6 h-6"}),"Technical Features & Innovation"]}),(0,v.jsxs)("div",{className:"grid md:grid-cols-2 gap-6",children:[(0,v.jsxs)("div",{children:[(0,v.jsx)("h4",{className:"text-lg font-semibold text-purple-700 mb-3",children:"\ud83e\udde0 Deep Learning Mechanisms"}),(0,v.jsxs)("ul",{className:"space-y-2 text-gray-700",children:[(0,v.jsxs)("li",{children:["\u2022 ",(0,v.jsx)("strong",{children:"Cumulative Memory System:"})," Cross-game continuous learning and knowledge accumulation"]}),(0,v.jsxs)("li",{children:["\u2022 ",(0,v.jsx)("strong",{children:"Metacognitive Abilities:"})," AI self-reflection and strategy adjustment"]}),(0,v.jsxs)("li",{children:["\u2022 ",(0,v.jsx)("strong",{children:"Opponent Modeling:"})," Real-time construction and updating of opponent behavior models"]}),(0,v.jsxs)("li",{children:["\u2022 ",(0,v.jsx)("strong",{children:"Creative Strategy Generation:"})," Innovative thinking when conventional methods fail"]})]})]}),(0,v.jsxs)("div",{children:[(0,v.jsx)("h4",{className:"text-lg font-semibold text-purple-700 mb-3",children:"\u26a1 System Optimization"}),(0,v.jsxs)("ul",{className:"space-y-2 text-gray-700",children:[(0,v.jsxs)("li",{children:["\u2022 ",(0,v.jsx)("strong",{children:"Intelligent API Scheduling:"})," Multi-token rotation ensuring service stability"]}),(0,v.jsxs)("li",{children:["\u2022 ",(0,v.jsx)("strong",{children:"Real-time Performance Monitoring:"})," Detailed debugging and performance metrics"]}),(0,v.jsxs)("li",{children:["\u2022 ",(0,v.jsx)("strong",{children:"Adaptive Complexity:"})," AI thinking depth adjustment based on game phases"]}),(0,v.jsxs)("li",{children:["\u2022 ",(0,v.jsx)("strong",{children:"Fault Tolerance & Recovery:"})," Intelligent degradation and error handling"]})]})]})]})]}),(0,v.jsxs)("div",{className:"bg-gradient-to-r from-amber-50 to-orange-50 rounded-2xl p-6 border border-amber-200",children:[(0,v.jsxs)("h3",{className:"text-2xl font-bold text-amber-800 mb-4 flex items-center gap-2",children:[(0,v.jsx)(g,{className:"w-6 h-6"}),"Bidirectional Learning Evolution Process"]}),(0,v.jsxs)("div",{className:"space-y-4",children:[(0,v.jsxs)("div",{className:"bg-white p-4 rounded-xl border border-amber-200",children:[(0,v.jsx)("h4",{className:"font-semibold text-amber-700 mb-2",children:"\ud83d\udd04 Dynamic Adversarial Learning"}),(0,v.jsx)("p",{className:"text-gray-700",children:"Two AI roles evolve through competition: Hider learns to pose more challenging questions, while Guesser develops more efficient guessing strategies. This competitive learning drives spiral improvement in both agents' capabilities."})]}),(0,v.jsxs)("div",{className:"bg-white p-4 rounded-xl border border-amber-200",children:[(0,v.jsx)("h4",{className:"font-semibold text-amber-700 mb-2",children:"\ud83d\udcca Data-Driven Optimization"}),(0,v.jsx)("p",{className:"text-gray-700",children:"The system records detailed interaction data including strategy selection, success rates, confidence levels, and continuously optimizes AI decision models and behavioral strategies through statistical analysis."})]}),(0,v.jsxs)("div",{className:"bg-white p-4 rounded-xl border border-amber-200",children:[(0,v.jsx)("h4",{className:"font-semibold text-amber-700 mb-2",children:"\ud83c\udfaf Personalized Adaptation"}),(0,v.jsx)("p",{className:"text-gray-700",children:"AI adapts behavior patterns to different opponent characteristics, achieving truly personalized intelligent interaction and demonstrating human-like adaptability and learning capabilities."})]})]})]}),(0,v.jsxs)("div",{className:"bg-gradient-to-r from-teal-50 to-cyan-50 rounded-2xl p-6 border border-teal-200",children:[(0,v.jsx)("h3",{className:"text-2xl font-bold text-teal-800 mb-4 flex items-center gap-2",children:"\ud83d\ude80 Application Value & Significance"}),(0,v.jsxs)("div",{className:"grid md:grid-cols-3 gap-4",children:[(0,v.jsxs)("div",{className:"bg-white p-4 rounded-xl border border-teal-200",children:[(0,v.jsx)("h4",{className:"font-semibold text-teal-700 mb-2",children:"\ud83d\udd2c AI Research"}),(0,v.jsx)("p",{className:"text-sm text-gray-700",children:"Demonstrates LLM potential in complex strategic games, providing practical cases for AI autonomous learning and decision optimization."})]}),(0,v.jsxs)("div",{className:"bg-white p-4 rounded-xl border border-teal-200",children:[(0,v.jsx)("h4",{className:"font-semibold text-teal-700 mb-2",children:"\ud83c\udfae Game AI"}),(0,v.jsx)("p",{className:"text-sm text-gray-700",children:"Provides intelligent NPC design insights for the gaming industry, creating more challenging and adaptive gaming experiences."})]}),(0,v.jsxs)("div",{className:"bg-white p-4 rounded-xl border border-teal-200",children:[(0,v.jsx)("h4",{className:"font-semibold text-teal-700 mb-2",children:"\ud83d\udcda Education & Training"}),(0,v.jsx)("p",{className:"text-sm text-gray-700",children:"Applicable to personalized teaching systems, dynamically adjusting question difficulty and teaching strategies based on learner characteristics."})]})]})]})]})}),(0,v.jsx)("div",{className:"p-6 bg-gray-50 border-t border-gray-200",children:(0,v.jsxs)("div",{className:"flex justify-between items-center",children:[(0,v.jsxs)("div",{className:"text-sm text-gray-600",children:[(0,v.jsxs)("p",{children:["\ud83d\udd27 ",(0,v.jsx)("strong",{children:"Tech Stack:"})," React + Google Gemini API + Custom Learning Algorithms"]}),(0,v.jsxs)("p",{children:["\ud83d\udcc8 ",(0,v.jsx)("strong",{children:"Features:"})," Real-time Learning | Multi-Strategy Gaming | Intelligent Adaptation | Performance Monitoring"]}),(0,v.jsxs)("p",{children:["\ud83d\udee0\ufe0f ",(0,v.jsx)("strong",{children:"Developer Mode:"})," Open browser DevTools (F12) to view detailed console outputs, API responses, and system analysis logs"]})]}),(0,v.jsx)("button",{onClick:()=>B(!1),className:"px-6 py-3 bg-gradient-to-r from-indigo-500 to-purple-500 text-white rounded-xl font-semibold hover:from-indigo-600 hover:to-purple-600 transition-all transform hover:scale-105 shadow-lg",children:"Start Experience"})]})})]})}),M&&(0,v.jsxs)("div",{className:"mb-6 p-4 bg-gradient-to-r from-gray-50 to-slate-50 rounded-xl border border-gray-200 shadow-lg",children:[(0,v.jsxs)("div",{className:"flex items-center justify-between mb-3",children:[(0,v.jsxs)("h4",{className:"font-semibold text-gray-800 flex items-center gap-2",children:[(0,v.jsx)(c,{className:"w-5 h-5"}),"Debug Information (",I.length," entries)"]}),(0,v.jsx)("button",{onClick:()=>_(!1),className:"p-1 hover:bg-gray-200 rounded-full transition-colors",children:(0,v.jsx)(o,{className:"w-4 h-4 text-gray-600"})})]}),(0,v.jsx)("div",{className:"max-h-64 overflow-y-auto space-y-2",children:0===I.length?(0,v.jsx)("p",{className:"text-gray-500 text-sm",children:"No debug information available"}):I.slice(-15).reverse().map(((e,t)=>(0,v.jsxs)("div",{className:"p-2 rounded text-xs border-l-4 ".concat("error"===e.type?"bg-red-50 border-red-400 text-red-700":"warning"===e.type?"bg-yellow-50 border-yellow-400 text-yellow-700":"success"===e.type?"bg-green-50 border-green-400 text-green-700":"api-call"===e.type?"bg-blue-50 border-blue-400 text-blue-700":"api-response"===e.type?"bg-purple-50 border-purple-400 text-purple-700":"bg-gray-50 border-gray-400 text-gray-700"),children:[(0,v.jsxs)("div",{className:"flex justify-between items-start",children:[(0,v.jsx)("span",{className:"flex-1",children:e.message}),(0,v.jsx)("span",{className:"text-xs opacity-60 ml-2",children:e.timestamp})]}),e.apiResponse&&(0,v.jsx)("button",{onClick:()=>z({data:e.apiResponse,title:e.message,timestamp:e.timestamp}),className:"mt-1 text-xs underline hover:no-underline",children:"View API Data"})]},e.id||t)))}),(0,v.jsxs)("div",{className:"mt-3 flex justify-between items-center text-xs text-gray-500",children:[(0,v.jsxs)("span",{children:["Showing latest 15 entries (total: ",I.length,")"]}),(0,v.jsx)("button",{onClick:()=>L([]),className:"text-red-600 hover:underline",children:"Clear Debug Log"})]})]}),O&&(0,v.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:(0,v.jsxs)("div",{className:"bg-white rounded-2xl shadow-2xl max-w-4xl w-full max-h-[90vh] flex flex-col",children:[(0,v.jsxs)("div",{className:"flex items-center justify-between p-4 border-b border-gray-200",children:[(0,v.jsxs)("div",{children:[(0,v.jsx)("h3",{className:"text-lg font-semibold text-gray-800",children:"API Response Data Details"}),(0,v.jsxs)("p",{className:"text-sm text-gray-600",children:[O.title," - ",O.timestamp]})]}),(0,v.jsx)("button",{onClick:()=>z(null),className:"p-2 hover:bg-gray-100 rounded-full transition-colors",children:(0,v.jsx)(o,{className:"w-6 h-6 text-gray-600"})})]}),(0,v.jsx)("div",{className:"flex-1 overflow-hidden p-4",children:(0,v.jsx)("div",{className:"h-full overflow-y-auto bg-gray-50 rounded-lg p-4",children:(0,v.jsx)("pre",{className:"text-sm text-gray-800 font-mono whitespace-pre-wrap",children:JSON.stringify(O.data,null,2)})})}),(0,v.jsxs)("div",{className:"p-4 border-t border-gray-200 flex justify-between items-center",children:[(0,v.jsxs)("div",{className:"text-sm text-gray-500",children:["Data size: ",JSON.stringify(O.data).length," characters"]}),(0,v.jsx)("button",{onClick:()=>{navigator.clipboard.writeText(JSON.stringify(O.data,null,2))},className:"px-4 py-2 bg-blue-500 text-white rounded-lg hover:bg-blue-600 transition-colors",children:"Copy JSON Data"})]})]})}),G&&(0,v.jsxs)("div",{className:"mb-6 p-4 bg-red-100 border border-red-200 rounded-xl shadow-sm",children:[(0,v.jsxs)("div",{className:"flex items-center gap-2 text-red-800",children:[(0,v.jsx)(m,{className:"w-5 h-5"}),(0,v.jsx)("span",{className:"font-semibold",children:"Pure LLM Intelligent System Error:"}),(0,v.jsx)("span",{children:G})]}),(0,v.jsxs)("div",{className:"mt-2 text-sm text-red-600",children:["Current API Token: #",r+1,"/3 |",(0,v.jsx)("button",{onClick:$,className:"ml-2 text-blue-600 hover:underline",children:"Try Next Token"})]})]}),(0,v.jsxs)("div",{className:"flex justify-center gap-4 flex-wrap",children:[(0,v.jsxs)("button",{onClick:async()=>{if(!y.apiToken)return alert("Intelligent game mode requires Gemini API key configuration!"),void w(!0);b("playing"),N([]),L([]),H(null),k(!0),F("analyzing");try{ee("Starting Pure LLM Intelligent Game System (Integrated Learning Mode)...","info"),ee("API call monitoring activated","api-call",{action:"session-start"});const e=K();e&&e.hasLearning&&ee("Loading learning data: ".concat((e.insights||[]).length," insights"),"success");const t=e=>{var t,n,s,i,r;console.log("Turn Update Received:",e),ee("API response data","api-response",e);const o="hider"===e.currentPlayer?"Number Hider":"guesser"===e.currentPlayer?"Number Guesser":"System";if(ee("Intelligent turn update: ".concat(o," (").concat((null===(t=e.metadata)||void 0===t?void 0:t.action)||"unknown",")"),"info"),F((null===(n=e.metadata)||void 0===n?void 0:n.action)||"processing"),(null!==(s=e.metadata)&&void 0!==s&&s.guess||"select_secret"===(null===(i=e.metadata)||void 0===i?void 0:i.action))&&j((t=>{var n,s;return(0,a.A)((0,a.A)({},t),{},{totalGuesses:e.metadata.guessCount||t.totalGuesses+(null!==(n=e.metadata)&&void 0!==n&&n.guess?1:0),currentRange:e.metadata.currentRange||t.currentRange,currentPlayer:e.currentPlayer,currentRole:e.currentPlayer,turnNumber:e.turnNumber,currentConfidence:e.confidence||(null===(s=e.metadata)||void 0===s?void 0:s.confidence)||t.currentConfidence,avgConfidence:e.gameAvgConfidence||t.avgConfidence})})),"select_secret"===(null===(r=e.metadata)||void 0===r?void 0:r.action)&&!S.secretNumber){const e=Math.floor(100*Math.random())+1;j((t=>(0,a.A)((0,a.A)({},t),{},{secretNumber:e}))),ee("Secret number selected: ".concat(e),"success")}N((t=>{var n,s,i;return[...t||[],(0,a.A)((0,a.A)({},e),{},{timestamp:e.timestamp||Date.now(),intelligence:null===(n=e.metadata)||void 0===n?void 0:n.intelligence,strategy:null===(s=e.metadata)||void 0===s?void 0:s.strategy,confidence:(null===(i=e.metadata)||void 0===i?void 0:i.confidence)||e.confidence,currentPlayer:e.currentPlayer,currentRole:e.currentPlayer,nextPlayer:e.nextPlayer,roleDisplay:o,learningApplied:e.learningApplied})]}))},n=e=>{console.log("Game End Received:",e),ee("Game end API response","api-response",e),ee("Intelligent game ended: ".concat(e.success?"Victory":"Failed"),e.success?"success":"warning"),j((t=>{var n;return(0,a.A)((0,a.A)({},t),{},{secretNumber:e.secret,totalGuesses:e.guessCount,gameResult:e.success?"success":"failed",intelligenceScore:e.intelligenceScore||0,finalPlayer:e.finalPlayer,totalTurns:e.totalTurns,avgConfidence:e.avgConfidence||(null===(n=e.learningData)||void 0===n?void 0:n.avgConfidence)||t.avgConfidence})})),b("finished"),k(!1),F("complete"),e.learningData&&(ee("Learning data updated: total ".concat(e.learningData.totalGamesPlayed," games"),"success"),ee("Cumulative intelligence: ".concat((100*e.learningData.cumulativeIntelligence).toFixed(1),"%"),"success"),e.learningData.avgConfidence&&ee("Average confidence: ".concat((100*e.learningData.avgConfidence).toFixed(1),"%"),"success")),e.intelligenceScore&&ee("Intelligence score: ".concat((100*e.intelligenceScore).toFixed(1),"%"),"success")},s=e=>{ee("API error response","api-error",e),ee("LLM intelligent game error: ".concat(e.message),"error"),(e.message.includes("API")||e.message.includes("token")||e.message.includes("quota"))&&(ee("Attempting to switch API token...","warning"),$()),H(e.message),b("idle"),k(!1),F("error")};await Y(t,n,s)}catch(e){ee("Startup error details","api-error",e),ee("Pure LLM intelligent game startup failed: ".concat(e.message),"error"),(e.message.includes("API")||e.message.includes("token")||e.message.includes("quota"))&&(ee("Attempting to switch API token...","warning"),$()),H(e.message),b("idle"),k(!1),F("error")}},disabled:T||"playing"===x||!y.apiToken,className:"flex items-center gap-2 px-8 py-4 bg-gradient-to-r from-indigo-500 to-purple-500 text-white rounded-xl font-semibold hover:from-indigo-600 hover:to-purple-600 disabled:opacity-50 transition-all transform hover:scale-105 shadow-lg",children:[(0,v.jsx)(u,{className:"w-6 h-6"}),"playing"===x?"LLM Analyzing...":"Start LLM Intelligent Game"]}),(0,v.jsxs)("button",{onClick:()=>{b("idle"),N([]),L([]),H(null),k(!1),F("idle"),j({secretNumber:null,totalGuesses:0,currentRange:{min:1,max:100},gameResult:null,intelligenceScore:0,currentPlayer:null,currentRole:null,turnNumber:0,finalPlayer:null,totalTurns:0,avgConfidence:null,currentConfidence:null}),q(),ee("LLM intelligent system reset","info")},disabled:T,className:"flex items-center gap-2 px-6 py-3 bg-gray-500 text-white rounded-xl font-semibold hover:bg-gray-600 transition-all shadow-lg",children:[(0,v.jsx)(h,{className:"w-5 h-5"}),"Reset System"]}),(0,v.jsxs)("button",{onClick:()=>w(!A),className:"flex items-center gap-2 px-6 py-3 bg-gradient-to-r from-purple-500 to-pink-500 text-white rounded-xl font-semibold hover:from-purple-600 hover:to-pink-600 transition-all shadow-lg",children:[(0,v.jsx)(d,{className:"w-5 h-5"}),"API Config (",r+1,"/3)"]}),(0,v.jsxs)("button",{onClick:()=>_(!M),className:"flex items-center gap-2 px-6 py-3 bg-gradient-to-r from-gray-500 to-slate-500 text-white rounded-xl font-semibold hover:from-gray-600 hover:to-slate-600 transition-all shadow-lg",children:[(0,v.jsx)(c,{className:"w-5 h-5"}),"Debug (",I.length,")"]}),ne&&ne.hasLearning&&(0,v.jsxs)("button",{onClick:()=>{W(),ee("Learning memory cleared","warning")},disabled:T,className:"flex items-center gap-2 px-6 py-3 bg-orange-500 text-white rounded-xl font-semibold hover:bg-orange-600 transition-all shadow-lg",children:[(0,v.jsx)(g,{className:"w-5 h-5"}),"Clear Learning"]})]}),T&&(0,v.jsx)("div",{className:"mt-6",children:(0,v.jsxs)("div",{className:"flex items-center justify-center gap-3 p-4 bg-blue-50 rounded-xl border border-blue-200",children:[(0,v.jsx)("div",{className:"animate-spin rounded-full h-6 w-6 border-2 border-blue-500 border-t-transparent"}),(0,v.jsxs)("span",{className:"text-blue-700 font-medium",children:["LLM deep intelligent analysis (Token #",r+1,") - Integrated learning memory + confidence calibration..."]})]})}),"playing"===x&&S.secretNumber&&(0,v.jsxs)("div",{className:"mt-6 p-4 bg-gradient-to-r from-cyan-50 to-blue-50 rounded-xl border border-cyan-200 shadow-lg",children:[(0,v.jsxs)("h4",{className:"font-semibold mb-2 text-cyan-800 flex items-center gap-2",children:[(0,v.jsx)(i.A,{className:"w-5 h-5"}),"LLM Intelligent Game Monitor (Role Perception + Confidence)"]}),(0,v.jsxs)("div",{className:"text-sm text-cyan-700 space-y-1",children:[(0,v.jsxs)("p",{children:["Secret number: ",(0,v.jsxs)("strong",{className:"text-red-600",children:["#",S.secretNumber]})," (Intelligent selection)"]}),(0,v.jsxs)("p",{children:["Current search range: ",(0,v.jsxs)("strong",{children:["[",(null===(e=S.currentRange)||void 0===e?void 0:e.min)||1,", ",(null===(t=S.currentRange)||void 0===t?void 0:t.max)||100,"]"]})]}),(0,v.jsxs)("p",{children:["Intelligent turns: ",(0,v.jsx)("strong",{children:S.totalGuesses||0})]}),(0,v.jsxs)("p",{children:["Current role: ",(0,v.jsx)("strong",{className:"text-purple-600",children:"hider"===S.currentRole?"Number Hider":"guesser"===S.currentRole?"Number Guesser":"System"})]}),(0,v.jsxs)("p",{children:["Game round: ",(0,v.jsx)("strong",{children:S.turnNumber||0})]}),(0,v.jsxs)("p",{children:["System activity: ",(0,v.jsx)("strong",{className:"text-green-600",children:D})]}),te(S.currentConfidence)&&(0,v.jsxs)("p",{children:["Current confidence: ",(0,v.jsxs)("strong",{className:"text-green-600",children:[(100*S.currentConfidence).toFixed(1),"%"]})]}),te(S.avgConfidence)&&(0,v.jsxs)("p",{children:["Average confidence: ",(0,v.jsxs)("strong",{className:"text-blue-600",children:[(100*S.avgConfidence).toFixed(1),"%"]})]}),(0,v.jsxs)("p",{children:["API Token: ",(0,v.jsxs)("strong",{className:"text-orange-600",children:["#",r+1,"/3"]})]}),(0,v.jsxs)("p",{children:["Decision type: ",(0,v.jsx)("strong",{children:"LLM deep reasoning + Cumulative learning memory + Confidence calibration"})]}),(0,v.jsxs)("p",{children:["System type: ",(0,v.jsx)("strong",{className:"text-green-600",children:"LLM Intelligence"})]}),(0,v.jsxs)("p",{children:["Learning status: ",(0,v.jsx)("strong",{className:"text-blue-600",children:ne&&ne.hasLearning?"Learned from ".concat(ne.gameCount," games"):"First game"})]})]})]}),(0,v.jsx)(P,{conversation:C||[],variant:"intelligent",title:"LLM Intelligent Conversation Log (Role Perception + Learning Memory + Confidence)",isThinking:T,thinkingMessage:T?"LLM deep intelligent analysis: Semantic understanding + Role recognition + Cumulative learning + Confidence calibration...":"",currentPlayer:V||"",showTimestamps:!0,maxHeight:500,showRoleInfo:!0,learningActive:!!ne&&ne.hasLearning}),"finished"===x&&(0,v.jsxs)("div",{className:"mt-8 text-center p-6 bg-gradient-to-r from-green-100 via-emerald-100 to-teal-100 rounded-2xl shadow-lg",children:[(0,v.jsx)("h3",{className:"text-3xl font-bold text-gray-800 mb-3",children:"success"===S.gameResult?"LLM Intelligent System Victory!":"LLM Intelligent Analysis Complete"}),(0,v.jsxs)("p",{className:"text-lg text-gray-600 mb-2",children:["LLM intelligence selected secret number ",(0,v.jsx)("strong",{className:"text-green-600",children:S.secretNumber}),", through ",(0,v.jsx)("strong",{className:"text-blue-600",children:S.totalGuesses})," intelligent reasoning rounds","success"===S.gameResult?" successfully found the answer":" reached maximum attempts"]}),(0,v.jsxs)("div",{className:"mt-4 p-4 bg-white/70 rounded-xl",children:[(0,v.jsxs)("h4",{className:"font-semibold text-gray-700 mb-2 flex items-center justify-center gap-2",children:[(0,v.jsx)(i.A,{className:"w-5 h-5"}),"LLM Intelligence Analysis Summary (Integrated Learning + Confidence)"]}),(0,v.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-5 gap-4 text-sm text-gray-600",children:[(0,v.jsxs)("div",{children:[(0,v.jsx)("span",{className:"text-gray-500",children:"Intelligence Efficiency:"}),(0,v.jsxs)("div",{className:"font-semibold text-emerald-600",children:["success"===S.gameResult?Math.max(.1,100*Math.min(1,Math.ceil(Math.log2(100))/S.totalGuesses)).toFixed(1):"0","%"]})]}),(0,v.jsxs)("div",{children:[(0,v.jsx)("span",{className:"text-gray-500",children:"Intelligence Score:"}),(0,v.jsxs)("div",{className:"font-semibold text-blue-600",children:[(100*S.intelligenceScore).toFixed(1),"%"]})]}),(0,v.jsxs)("div",{children:[(0,v.jsx)("span",{className:"text-gray-500",children:"Average Confidence:"}),(0,v.jsx)("div",{className:"font-semibold text-purple-600",children:te(S.avgConfidence)?"".concat((100*S.avgConfidence).toFixed(1),"%"):"N/A"})]}),(0,v.jsxs)("div",{children:[(0,v.jsx)("span",{className:"text-gray-500",children:"Learning Improvement:"}),(0,v.jsx)("div",{className:"font-semibold text-purple-600",children:ne&&ne.hasLearning?"+".concat((100*(ne.avgIntelligence-.7)).toFixed(1),"%"):"First learning"})]}),(0,v.jsxs)("div",{children:[(0,v.jsx)("span",{className:"text-gray-500",children:"API Token Used:"}),(0,v.jsxs)("div",{className:"font-semibold text-indigo-600",children:["#",r+1,"/3"]})]})]}),S.finalPlayer&&(0,v.jsxs)("div",{className:"mt-2 text-sm text-gray-600",children:[(0,v.jsx)("span",{className:"text-gray-500",children:"Final role:"}),(0,v.jsx)("span",{className:"font-semibold text-indigo-600 ml-2",children:"guesser"===S.finalPlayer?"Number Guesser":"hider"===S.finalPlayer?"Number Hider":"System"}),(0,v.jsx)("span",{className:"text-gray-500 ml-4",children:"Total rounds:"}),(0,v.jsx)("span",{className:"font-semibold text-indigo-600 ml-2",children:S.totalTurns}),(0,v.jsx)("span",{className:"text-gray-500 ml-4",children:"Learning games:"}),(0,v.jsx)("span",{className:"font-semibold text-indigo-600 ml-2",children:((null===ne||void 0===ne?void 0:ne.gameCount)||0)+1}),te(S.avgConfidence)&&(0,v.jsxs)(v.Fragment,{children:[(0,v.jsx)("span",{className:"text-gray-500 ml-4",children:"Final confidence:"}),(0,v.jsxs)("span",{className:"font-semibold text-green-600 ml-2",children:[(100*S.avgConfidence).toFixed(1),"%"]})]})]})]})]})]})})}}}]);
//# sourceMappingURL=542.0a9e95ae.chunk.js.map