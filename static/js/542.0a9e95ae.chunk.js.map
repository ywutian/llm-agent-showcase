{"version":3,"file":"static/js/542.0a9e95ae.chunk.js","mappings":"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","sources":["../node_modules/lucide-react/src/icons/x.ts","../node_modules/lucide-react/src/icons/activity.ts","../node_modules/lucide-react/src/icons/book-open.ts","../node_modules/lucide-react/src/icons/settings.ts","../node_modules/lucide-react/src/icons/circle-x.ts","../node_modules/lucide-react/src/icons/play.ts","../node_modules/lucide-react/src/icons/rotate-ccw.ts","../node_modules/lucide-react/src/icons/user.ts","../node_modules/lucide-react/src/icons/clock.ts","../node_modules/lucide-react/src/icons/bot.ts","components/shared/ConversationLog.jsx","utils/ai/core/context-analyzer.js","utils/ai/core/advanced-prompt-system.js","utils/ai/engines/prompt-engine.js","utils/ai/core/llm-manager.js","hooks/useLLMAPIEnhanced.js","components/versions/LLMSelfPlaySystemV3.jsx"],"sourcesContent":["import createLucideIcon from '../createLucideIcon';\nimport { IconNode } from '../types';\n\nexport const __iconNode: IconNode = [\n  ['path', { d: 'M18 6 6 18', key: '1bl5f8' }],\n  ['path', { d: 'm6 6 12 12', key: 'd8bk6v' }],\n];\n\n/**\n * @component @name X\n * @description Lucide SVG icon component, renders SVG Element with children.\n *\n * @preview ![img](data:image/svg+xml;base64,PHN2ZyAgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIgogIHdpZHRoPSIyNCIKICBoZWlnaHQ9IjI0IgogIHZpZXdCb3g9IjAgMCAyNCAyNCIKICBmaWxsPSJub25lIgogIHN0cm9rZT0iIzAwMCIgc3R5bGU9ImJhY2tncm91bmQtY29sb3I6ICNmZmY7IGJvcmRlci1yYWRpdXM6IDJweCIKICBzdHJva2Utd2lkdGg9IjIiCiAgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIgogIHN0cm9rZS1saW5lam9pbj0icm91bmQiCj4KICA8cGF0aCBkPSJNMTggNiA2IDE4IiAvPgogIDxwYXRoIGQ9Im02IDYgMTIgMTIiIC8+Cjwvc3ZnPgo=) - https://lucide.dev/icons/x\n * @see https://lucide.dev/guide/packages/lucide-react - Documentation\n *\n * @param {Object} props - Lucide icons props and any valid SVG attribute\n * @returns {JSX.Element} JSX Element\n *\n */\nconst X = createLucideIcon('x', __iconNode);\n\nexport default X;\n","import createLucideIcon from '../createLucideIcon';\nimport { IconNode } from '../types';\n\nexport const __iconNode: IconNode = [\n  [\n    'path',\n    {\n      d: 'M22 12h-2.48a2 2 0 0 0-1.93 1.46l-2.35 8.36a.25.25 0 0 1-.48 0L9.24 2.18a.25.25 0 0 0-.48 0l-2.35 8.36A2 2 0 0 1 4.49 12H2',\n      key: '169zse',\n    },\n  ],\n];\n\n/**\n * @component @name Activity\n * @description Lucide SVG icon component, renders SVG Element with children.\n *\n * @preview ![img](data:image/svg+xml;base64,PHN2ZyAgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIgogIHdpZHRoPSIyNCIKICBoZWlnaHQ9IjI0IgogIHZpZXdCb3g9IjAgMCAyNCAyNCIKICBmaWxsPSJub25lIgogIHN0cm9rZT0iIzAwMCIgc3R5bGU9ImJhY2tncm91bmQtY29sb3I6ICNmZmY7IGJvcmRlci1yYWRpdXM6IDJweCIKICBzdHJva2Utd2lkdGg9IjIiCiAgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIgogIHN0cm9rZS1saW5lam9pbj0icm91bmQiCj4KICA8cGF0aCBkPSJNMjIgMTJoLTIuNDhhMiAyIDAgMCAwLTEuOTMgMS40NmwtMi4zNSA4LjM2YS4yNS4yNSAwIDAgMS0uNDggMEw5LjI0IDIuMThhLjI1LjI1IDAgMCAwLS40OCAwbC0yLjM1IDguMzZBMiAyIDAgMCAxIDQuNDkgMTJIMiIgLz4KPC9zdmc+Cg==) - https://lucide.dev/icons/activity\n * @see https://lucide.dev/guide/packages/lucide-react - Documentation\n *\n * @param {Object} props - Lucide icons props and any valid SVG attribute\n * @returns {JSX.Element} JSX Element\n *\n */\nconst Activity = createLucideIcon('activity', __iconNode);\n\nexport default Activity;\n","import createLucideIcon from '../createLucideIcon';\nimport { IconNode } from '../types';\n\nexport const __iconNode: IconNode = [\n  ['path', { d: 'M12 7v14', key: '1akyts' }],\n  [\n    'path',\n    {\n      d: 'M3 18a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1h5a4 4 0 0 1 4 4 4 4 0 0 1 4-4h5a1 1 0 0 1 1 1v13a1 1 0 0 1-1 1h-6a3 3 0 0 0-3 3 3 3 0 0 0-3-3z',\n      key: 'ruj8y',\n    },\n  ],\n];\n\n/**\n * @component @name BookOpen\n * @description Lucide SVG icon component, renders SVG Element with children.\n *\n * @preview ![img](data:image/svg+xml;base64,PHN2ZyAgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIgogIHdpZHRoPSIyNCIKICBoZWlnaHQ9IjI0IgogIHZpZXdCb3g9IjAgMCAyNCAyNCIKICBmaWxsPSJub25lIgogIHN0cm9rZT0iIzAwMCIgc3R5bGU9ImJhY2tncm91bmQtY29sb3I6ICNmZmY7IGJvcmRlci1yYWRpdXM6IDJweCIKICBzdHJva2Utd2lkdGg9IjIiCiAgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIgogIHN0cm9rZS1saW5lam9pbj0icm91bmQiCj4KICA8cGF0aCBkPSJNMTIgN3YxNCIgLz4KICA8cGF0aCBkPSJNMyAxOGExIDEgMCAwIDEtMS0xVjRhMSAxIDAgMCAxIDEtMWg1YTQgNCAwIDAgMSA0IDQgNCA0IDAgMCAxIDQtNGg1YTEgMSAwIDAgMSAxIDF2MTNhMSAxIDAgMCAxLTEgMWgtNmEzIDMgMCAwIDAtMyAzIDMgMyAwIDAgMC0zLTN6IiAvPgo8L3N2Zz4K) - https://lucide.dev/icons/book-open\n * @see https://lucide.dev/guide/packages/lucide-react - Documentation\n *\n * @param {Object} props - Lucide icons props and any valid SVG attribute\n * @returns {JSX.Element} JSX Element\n *\n */\nconst BookOpen = createLucideIcon('book-open', __iconNode);\n\nexport default BookOpen;\n","import createLucideIcon from '../createLucideIcon';\nimport { IconNode } from '../types';\n\nexport const __iconNode: IconNode = [\n  [\n    'path',\n    {\n      d: 'M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z',\n      key: '1qme2f',\n    },\n  ],\n  ['circle', { cx: '12', cy: '12', r: '3', key: '1v7zrd' }],\n];\n\n/**\n * @component @name Settings\n * @description Lucide SVG icon component, renders SVG Element with children.\n *\n * @preview ![img](data:image/svg+xml;base64,PHN2ZyAgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIgogIHdpZHRoPSIyNCIKICBoZWlnaHQ9IjI0IgogIHZpZXdCb3g9IjAgMCAyNCAyNCIKICBmaWxsPSJub25lIgogIHN0cm9rZT0iIzAwMCIgc3R5bGU9ImJhY2tncm91bmQtY29sb3I6ICNmZmY7IGJvcmRlci1yYWRpdXM6IDJweCIKICBzdHJva2Utd2lkdGg9IjIiCiAgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIgogIHN0cm9rZS1saW5lam9pbj0icm91bmQiCj4KICA8cGF0aCBkPSJNMTIuMjIgMmgtLjQ0YTIgMiAwIDAgMC0yIDJ2LjE4YTIgMiAwIDAgMS0xIDEuNzNsLS40My4yNWEyIDIgMCAwIDEtMiAwbC0uMTUtLjA4YTIgMiAwIDAgMC0yLjczLjczbC0uMjIuMzhhMiAyIDAgMCAwIC43MyAyLjczbC4xNS4xYTIgMiAwIDAgMSAxIDEuNzJ2LjUxYTIgMiAwIDAgMS0xIDEuNzRsLS4xNS4wOWEyIDIgMCAwIDAtLjczIDIuNzNsLjIyLjM4YTIgMiAwIDAgMCAyLjczLjczbC4xNS0uMDhhMiAyIDAgMCAxIDIgMGwuNDMuMjVhMiAyIDAgMCAxIDEgMS43M1YyMGEyIDIgMCAwIDAgMiAyaC40NGEyIDIgMCAwIDAgMi0ydi0uMThhMiAyIDAgMCAxIDEtMS43M2wuNDMtLjI1YTIgMiAwIDAgMSAyIDBsLjE1LjA4YTIgMiAwIDAgMCAyLjczLS43M2wuMjItLjM5YTIgMiAwIDAgMC0uNzMtMi43M2wtLjE1LS4wOGEyIDIgMCAwIDEtMS0xLjc0di0uNWEyIDIgMCAwIDEgMS0xLjc0bC4xNS0uMDlhMiAyIDAgMCAwIC43My0yLjczbC0uMjItLjM4YTIgMiAwIDAgMC0yLjczLS43M2wtLjE1LjA4YTIgMiAwIDAgMS0yIDBsLS40My0uMjVhMiAyIDAgMCAxLTEtMS43M1Y0YTIgMiAwIDAgMC0yLTJ6IiAvPgogIDxjaXJjbGUgY3g9IjEyIiBjeT0iMTIiIHI9IjMiIC8+Cjwvc3ZnPgo=) - https://lucide.dev/icons/settings\n * @see https://lucide.dev/guide/packages/lucide-react - Documentation\n *\n * @param {Object} props - Lucide icons props and any valid SVG attribute\n * @returns {JSX.Element} JSX Element\n *\n */\nconst Settings = createLucideIcon('settings', __iconNode);\n\nexport default Settings;\n","import createLucideIcon from '../createLucideIcon';\nimport { IconNode } from '../types';\n\nexport const __iconNode: IconNode = [\n  ['circle', { cx: '12', cy: '12', r: '10', key: '1mglay' }],\n  ['path', { d: 'm15 9-6 6', key: '1uzhvr' }],\n  ['path', { d: 'm9 9 6 6', key: 'z0biqf' }],\n];\n\n/**\n * @component @name CircleX\n * @description Lucide SVG icon component, renders SVG Element with children.\n *\n * @preview ![img](data:image/svg+xml;base64,PHN2ZyAgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIgogIHdpZHRoPSIyNCIKICBoZWlnaHQ9IjI0IgogIHZpZXdCb3g9IjAgMCAyNCAyNCIKICBmaWxsPSJub25lIgogIHN0cm9rZT0iIzAwMCIgc3R5bGU9ImJhY2tncm91bmQtY29sb3I6ICNmZmY7IGJvcmRlci1yYWRpdXM6IDJweCIKICBzdHJva2Utd2lkdGg9IjIiCiAgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIgogIHN0cm9rZS1saW5lam9pbj0icm91bmQiCj4KICA8Y2lyY2xlIGN4PSIxMiIgY3k9IjEyIiByPSIxMCIgLz4KICA8cGF0aCBkPSJtMTUgOS02IDYiIC8+CiAgPHBhdGggZD0ibTkgOSA2IDYiIC8+Cjwvc3ZnPgo=) - https://lucide.dev/icons/circle-x\n * @see https://lucide.dev/guide/packages/lucide-react - Documentation\n *\n * @param {Object} props - Lucide icons props and any valid SVG attribute\n * @returns {JSX.Element} JSX Element\n *\n */\nconst CircleX = createLucideIcon('circle-x', __iconNode);\n\nexport default CircleX;\n","import createLucideIcon from '../createLucideIcon';\nimport { IconNode } from '../types';\n\nexport const __iconNode: IconNode = [['polygon', { points: '6 3 20 12 6 21 6 3', key: '1oa8hb' }]];\n\n/**\n * @component @name Play\n * @description Lucide SVG icon component, renders SVG Element with children.\n *\n * @preview ![img](data:image/svg+xml;base64,PHN2ZyAgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIgogIHdpZHRoPSIyNCIKICBoZWlnaHQ9IjI0IgogIHZpZXdCb3g9IjAgMCAyNCAyNCIKICBmaWxsPSJub25lIgogIHN0cm9rZT0iIzAwMCIgc3R5bGU9ImJhY2tncm91bmQtY29sb3I6ICNmZmY7IGJvcmRlci1yYWRpdXM6IDJweCIKICBzdHJva2Utd2lkdGg9IjIiCiAgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIgogIHN0cm9rZS1saW5lam9pbj0icm91bmQiCj4KICA8cG9seWdvbiBwb2ludHM9IjYgMyAyMCAxMiA2IDIxIDYgMyIgLz4KPC9zdmc+Cg==) - https://lucide.dev/icons/play\n * @see https://lucide.dev/guide/packages/lucide-react - Documentation\n *\n * @param {Object} props - Lucide icons props and any valid SVG attribute\n * @returns {JSX.Element} JSX Element\n *\n */\nconst Play = createLucideIcon('play', __iconNode);\n\nexport default Play;\n","import createLucideIcon from '../createLucideIcon';\nimport { IconNode } from '../types';\n\nexport const __iconNode: IconNode = [\n  ['path', { d: 'M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8', key: '1357e3' }],\n  ['path', { d: 'M3 3v5h5', key: '1xhq8a' }],\n];\n\n/**\n * @component @name RotateCcw\n * @description Lucide SVG icon component, renders SVG Element with children.\n *\n * @preview ![img](data:image/svg+xml;base64,PHN2ZyAgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIgogIHdpZHRoPSIyNCIKICBoZWlnaHQ9IjI0IgogIHZpZXdCb3g9IjAgMCAyNCAyNCIKICBmaWxsPSJub25lIgogIHN0cm9rZT0iIzAwMCIgc3R5bGU9ImJhY2tncm91bmQtY29sb3I6ICNmZmY7IGJvcmRlci1yYWRpdXM6IDJweCIKICBzdHJva2Utd2lkdGg9IjIiCiAgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIgogIHN0cm9rZS1saW5lam9pbj0icm91bmQiCj4KICA8cGF0aCBkPSJNMyAxMmE5IDkgMCAxIDAgOS05IDkuNzUgOS43NSAwIDAgMC02Ljc0IDIuNzRMMyA4IiAvPgogIDxwYXRoIGQ9Ik0zIDN2NWg1IiAvPgo8L3N2Zz4K) - https://lucide.dev/icons/rotate-ccw\n * @see https://lucide.dev/guide/packages/lucide-react - Documentation\n *\n * @param {Object} props - Lucide icons props and any valid SVG attribute\n * @returns {JSX.Element} JSX Element\n *\n */\nconst RotateCcw = createLucideIcon('rotate-ccw', __iconNode);\n\nexport default RotateCcw;\n","import createLucideIcon from '../createLucideIcon';\nimport { IconNode } from '../types';\n\nexport const __iconNode: IconNode = [\n  ['path', { d: 'M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2', key: '975kel' }],\n  ['circle', { cx: '12', cy: '7', r: '4', key: '17ys0d' }],\n];\n\n/**\n * @component @name User\n * @description Lucide SVG icon component, renders SVG Element with children.\n *\n * @preview ![img](data:image/svg+xml;base64,PHN2ZyAgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIgogIHdpZHRoPSIyNCIKICBoZWlnaHQ9IjI0IgogIHZpZXdCb3g9IjAgMCAyNCAyNCIKICBmaWxsPSJub25lIgogIHN0cm9rZT0iIzAwMCIgc3R5bGU9ImJhY2tncm91bmQtY29sb3I6ICNmZmY7IGJvcmRlci1yYWRpdXM6IDJweCIKICBzdHJva2Utd2lkdGg9IjIiCiAgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIgogIHN0cm9rZS1saW5lam9pbj0icm91bmQiCj4KICA8cGF0aCBkPSJNMTkgMjF2LTJhNCA0IDAgMCAwLTQtNEg5YTQgNCAwIDAgMC00IDR2MiIgLz4KICA8Y2lyY2xlIGN4PSIxMiIgY3k9IjciIHI9IjQiIC8+Cjwvc3ZnPgo=) - https://lucide.dev/icons/user\n * @see https://lucide.dev/guide/packages/lucide-react - Documentation\n *\n * @param {Object} props - Lucide icons props and any valid SVG attribute\n * @returns {JSX.Element} JSX Element\n *\n */\nconst User = createLucideIcon('user', __iconNode);\n\nexport default User;\n","import createLucideIcon from '../createLucideIcon';\nimport { IconNode } from '../types';\n\nexport const __iconNode: IconNode = [\n  ['circle', { cx: '12', cy: '12', r: '10', key: '1mglay' }],\n  ['polyline', { points: '12 6 12 12 16 14', key: '68esgv' }],\n];\n\n/**\n * @component @name Clock\n * @description Lucide SVG icon component, renders SVG Element with children.\n *\n * @preview ![img](data:image/svg+xml;base64,PHN2ZyAgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIgogIHdpZHRoPSIyNCIKICBoZWlnaHQ9IjI0IgogIHZpZXdCb3g9IjAgMCAyNCAyNCIKICBmaWxsPSJub25lIgogIHN0cm9rZT0iIzAwMCIgc3R5bGU9ImJhY2tncm91bmQtY29sb3I6ICNmZmY7IGJvcmRlci1yYWRpdXM6IDJweCIKICBzdHJva2Utd2lkdGg9IjIiCiAgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIgogIHN0cm9rZS1saW5lam9pbj0icm91bmQiCj4KICA8Y2lyY2xlIGN4PSIxMiIgY3k9IjEyIiByPSIxMCIgLz4KICA8cG9seWxpbmUgcG9pbnRzPSIxMiA2IDEyIDEyIDE2IDE0IiAvPgo8L3N2Zz4K) - https://lucide.dev/icons/clock\n * @see https://lucide.dev/guide/packages/lucide-react - Documentation\n *\n * @param {Object} props - Lucide icons props and any valid SVG attribute\n * @returns {JSX.Element} JSX Element\n *\n */\nconst Clock = createLucideIcon('clock', __iconNode);\n\nexport default Clock;\n","import createLucideIcon from '../createLucideIcon';\nimport { IconNode } from '../types';\n\nexport const __iconNode: IconNode = [\n  ['path', { d: 'M12 8V4H8', key: 'hb8ula' }],\n  ['rect', { width: '16', height: '12', x: '4', y: '8', rx: '2', key: 'enze0r' }],\n  ['path', { d: 'M2 14h2', key: 'vft8re' }],\n  ['path', { d: 'M20 14h2', key: '4cs60a' }],\n  ['path', { d: 'M15 13v2', key: '1xurst' }],\n  ['path', { d: 'M9 13v2', key: 'rq6x2g' }],\n];\n\n/**\n * @component @name Bot\n * @description Lucide SVG icon component, renders SVG Element with children.\n *\n * @preview ![img](data:image/svg+xml;base64,PHN2ZyAgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIgogIHdpZHRoPSIyNCIKICBoZWlnaHQ9IjI0IgogIHZpZXdCb3g9IjAgMCAyNCAyNCIKICBmaWxsPSJub25lIgogIHN0cm9rZT0iIzAwMCIgc3R5bGU9ImJhY2tncm91bmQtY29sb3I6ICNmZmY7IGJvcmRlci1yYWRpdXM6IDJweCIKICBzdHJva2Utd2lkdGg9IjIiCiAgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIgogIHN0cm9rZS1saW5lam9pbj0icm91bmQiCj4KICA8cGF0aCBkPSJNMTIgOFY0SDgiIC8+CiAgPHJlY3Qgd2lkdGg9IjE2IiBoZWlnaHQ9IjEyIiB4PSI0IiB5PSI4IiByeD0iMiIgLz4KICA8cGF0aCBkPSJNMiAxNGgyIiAvPgogIDxwYXRoIGQ9Ik0yMCAxNGgyIiAvPgogIDxwYXRoIGQ9Ik0xNSAxM3YyIiAvPgogIDxwYXRoIGQ9Ik05IDEzdjIiIC8+Cjwvc3ZnPgo=) - https://lucide.dev/icons/bot\n * @see https://lucide.dev/guide/packages/lucide-react - Documentation\n *\n * @param {Object} props - Lucide icons props and any valid SVG attribute\n * @returns {JSX.Element} JSX Element\n *\n */\nconst Bot = createLucideIcon('bot', __iconNode);\n\nexport default Bot;\n","import React, { useRef, useEffect, useState, useMemo, useCallback } from 'react';\nimport { Brain, User, Bot, Clock, MessageSquare } from 'lucide-react';\n\n// Simple theme function\nconst getTheme = (variant) => {\n  const themes = {\n    default: {\n      primary: { bg: 'from-purple-100 to-pink-100', icon: 'text-purple-600' },\n      user: { gradient: 'from-green-500 to-emerald-500' },\n      ai: { gradient: 'from-purple-500 to-pink-500' }\n    }\n  };\n  return themes[variant] || themes.default;\n};\n\nconst formatTimestamp = (timestamp) => {\n  return timestamp ? new Date(timestamp).toLocaleTimeString([], { \n    hour: '2-digit', \n    minute: '2-digit', \n    second: '2-digit' \n  }) : 'Unknown';\n};\n\n// Simple markdown parser for basic formatting\nconst parseMarkdown = (text) => {\n  if (!text) return text;\n  \n  // Replace **text** with <strong>text</strong>\n  let parsed = text.replace(/\\*\\*(.*?)\\*\\*/g, '<strong>$1</strong>');\n  \n  // Replace *text* with <em>text</em>\n  parsed = parsed.replace(/(?<!\\*)\\*([^*]+)\\*(?!\\*)/g, '<em>$1</em>');\n  \n  return parsed;\n};\n\n// Component to render text with basic markdown\nconst MarkdownText = ({ children, className }) => {\n  const parsedText = parseMarkdown(children);\n  \n  return (\n    <div \n      className={className}\n      dangerouslySetInnerHTML={{ __html: parsedText }}\n    />\n  );\n};\n\nconst MessageItem = React.memo(({ \n  msg, \n  index, \n  theme, \n  showTimestamps, \n  isNew = false \n}) => {\n  const messageStyle = useMemo(() => {\n    if (!isNew && index < 10) {\n      return {\n        animationDelay: `${index * 0.05}s`,\n        animationFillMode: 'forwards'\n      };\n    }\n    return { animationFillMode: 'forwards' };\n  }, [isNew, index]);\n\n  const isUser = msg.sender === 'user';\n  \n  const isGuesser = msg.currentPlayer === 'guesser' || \n                   msg.metadata?.action === 'make_guess' ||\n                   msg.metadata?.role === 'guesser' ||\n                   msg.metadata?.phase === 'guessing' ||\n                   (msg.message && (\n                     msg.message.includes('Is it') ||\n                     msg.message.includes('My guess is') ||\n                     msg.message.includes('I guess') ||\n                     /\\d+\\?/.test(msg.message)\n                   ));\n  \n  const showOnRight = isUser || isGuesser;\n  \n  const containerClass = useMemo(() => \n    `flex ${showOnRight ? 'justify-end' : 'justify-start'} opacity-0 animate-fade-in`\n  , [showOnRight]);\n\n  const messageClass = useMemo(() => {\n    let gradientClass;\n    if (isUser) {\n      gradientClass = theme.user.gradient;\n    } else if (isGuesser) {\n      gradientClass = 'from-blue-500 to-cyan-500';\n    } else {\n      gradientClass = theme.ai.gradient;\n    }\n    \n    return `max-w-2xl px-6 py-4 rounded-2xl shadow-lg hover:shadow-xl transition-all duration-200 bg-gradient-to-r ${gradientClass} text-white`;\n  }, [isUser, isGuesser, theme.user.gradient, theme.ai.gradient]);\n\n  const getRoleInfo = useMemo(() => {\n    if (isUser) {\n      return { icon: <User className=\"w-4 h-4\" />, name: '👤 User', color: 'text-white' };\n    } else if (isGuesser) {\n      return { icon: <div className=\"w-4 h-4 text-center\">🔍</div>, name: '🔍 AI Guesser', color: 'text-white' };\n    } else {\n      return { icon: <div className=\"w-4 h-4 text-center\">🎯</div>, name: '🎯 AI Hider', color: 'text-white' };\n    }\n  }, [isUser, isGuesser]);\n\n  return (\n    <div className={containerClass} style={messageStyle}>\n      <div className={messageClass}>\n        <div className=\"flex items-center gap-2 text-sm opacity-90 mb-2\">\n          {getRoleInfo.icon}\n          <span className=\"font-semibold\">\n            {getRoleInfo.name}\n          </span>\n          {showTimestamps && msg.timestamp && (\n            <>\n              <Clock className=\"w-3 h-3 opacity-75\" />\n              <span className=\"text-xs opacity-75\">{formatTimestamp(msg.timestamp)}</span>\n            </>\n          )}\n          <span className=\"text-xs opacity-75 ml-auto\">#{index + 1}</span>\n        </div>\n        \n        <MarkdownText className=\"text-lg leading-relaxed break-words\">\n          {msg.message}\n        </MarkdownText>\n\n        {msg.metadata && (\n          <div className=\"mt-2 text-xs opacity-75 border-t border-white border-opacity-20 pt-2\">\n            {msg.metadata.guessCount && (\n              <span className=\"bg-white bg-opacity-20 px-2 py-1 rounded mr-2\">\n                Guess #{msg.metadata.guessCount}\n              </span>\n            )}\n           {msg.metadata.confidence && (\n  <span className=\"bg-white bg-opacity-20 px-2 py-1 rounded mr-2\">\n    Confidence: {typeof msg.metadata.confidence === 'number' ? \n      (msg.metadata.confidence > 1 ? \n        msg.metadata.confidence.toFixed(1) : \n        (msg.metadata.confidence * 100).toFixed(1)\n      ) : msg.metadata.confidence}%\n  </span>\n)}\n            {msg.metadata.action && (\n              <span className=\"bg-white bg-opacity-20 px-2 py-1 rounded mr-2\">\n                Action: {msg.metadata.action}\n              </span>\n            )}\n            {msg.metadata.phase && (\n              <span className=\"bg-white bg-opacity-20 px-2 py-1 rounded\">\n                Phase: {msg.metadata.phase}\n              </span>\n            )}\n          </div>\n        )}\n\n        {(msg.intelligence || msg.strategy || msg.learningApplied) && (\n          <div className=\"mt-2 text-xs opacity-75 border-t border-white border-opacity-20 pt-2\">\n            {msg.intelligence && (\n              <div className=\"mb-1\">💡 {msg.intelligence}</div>\n            )}\n            {msg.strategy && (\n              <div className=\"mb-1\">🎯 Strategy: {msg.strategy}</div>\n            )}\n            {msg.learningApplied && (\n              <div>📚 Learning Applied</div>\n            )}\n          </div>\n        )}\n      </div>\n    </div>\n  );\n});\n\nconst ThinkingIndicator = React.memo(({ theme, customMessage, isGuesser = false, currentPlayer = null }) => {\n  const shouldShowOnRight = isGuesser || \n                           currentPlayer === 'guesser' || \n                           (customMessage && (\n                             customMessage.includes('🔍') || \n                             customMessage.includes('Guesser')\n                           ));\n  \n  const containerClass = useMemo(() => \n    `flex ${shouldShowOnRight ? 'justify-end' : 'justify-start'}`\n  , [shouldShowOnRight]);\n\n  const indicatorClass = useMemo(() => {\n    const gradientClass = shouldShowOnRight ? 'from-blue-500 to-cyan-500' : theme.ai.gradient;\n    return `max-w-2xl px-6 py-4 rounded-2xl shadow-lg bg-gradient-to-r ${gradientClass} text-white animate-pulse`;\n  }, [shouldShowOnRight, theme.ai.gradient]);\n\n  const getThinkingMessage = useMemo(() => {\n    if (customMessage) return customMessage;\n    \n    if (shouldShowOnRight) {\n      return '🔍 AI Guesser is thinking...';\n    } else {\n      return '🎯 AI Hider is thinking...';\n    }\n  }, [customMessage, shouldShowOnRight]);\n\n  return (\n    <div className={containerClass}>\n      <div className={indicatorClass}>\n        <div className=\"flex items-center gap-3\">\n          <div className=\"flex space-x-1\">\n            <div className=\"w-2 h-2 bg-white rounded-full animate-bounce\"></div>\n            <div className=\"w-2 h-2 bg-white rounded-full animate-bounce\" style={{ animationDelay: '0.1s' }}></div>\n            <div className=\"w-2 h-2 bg-white rounded-full animate-bounce\" style={{ animationDelay: '0.2s' }}></div>\n          </div>\n          <span className=\"text-sm font-medium\">\n            {getThinkingMessage}\n          </span>\n        </div>\n      </div>\n    </div>\n  );\n});\n\nconst EmptyState = React.memo(() => (\n  <div className=\"text-center py-8 text-gray-500\">\n    <MessageSquare className=\"w-12 h-12 mx-auto mb-4 opacity-50\" />\n    <p className=\"text-lg font-medium\">No messages yet</p>\n    <p className=\"text-sm\">Start the conversation!</p>\n  </div>\n));\n\nconst ConversationStats = React.memo(({ stats, showRoleStats = false }) => (\n  <div className=\"flex items-center gap-4 text-sm text-gray-600 flex-wrap\">\n    <div className=\"flex items-center gap-1\">\n      <MessageSquare className=\"w-4 h-4\" />\n      <span>{stats.total}</span>\n    </div>\n    <div className=\"flex items-center gap-1\">\n      <User className=\"w-4 h-4 text-green-600\" />\n      <span>{stats.userMessages}</span>\n    </div>\n    <div className=\"flex items-center gap-1\">\n      <Bot className=\"w-4 h-4 text-purple-600\" />\n      <span>{stats.aiMessages}</span>\n    </div>\n    {showRoleStats && (\n      <>\n        <div className=\"flex items-center gap-1\">\n          <span className=\"text-blue-600\">🔍</span>\n          <span>{stats.guesserMessages || 0}</span>\n        </div>\n        <div className=\"flex items-center gap-1\">\n          <span className=\"text-purple-600\">🎯</span>\n          <span>{stats.hiderMessages || 0}</span>\n        </div>\n      </>\n    )}\n  </div>\n));\n\nconst ConversationFooter = React.memo(({ conversation, stats }) => {\n  if (conversation.length === 0) return null;\n  \n  return (\n    <div className=\"text-xs text-gray-500 text-center border-t pt-2 space-y-1\">\n      <div>\n        Started: {formatTimestamp(conversation[0]?.timestamp)} • \n        Latest: {formatTimestamp(conversation[conversation.length - 1]?.timestamp)}\n      </div>\n      <div>\n        {stats.total} total messages ({stats.userMessages} from you, {stats.aiMessages} from AI)\n        {stats.guesserMessages > 0 && (\n          <span> • {stats.guesserMessages} guesses, {stats.hiderMessages} hints</span>\n        )}\n      </div>\n    </div>\n  );\n});\n\nconst ConversationLog = ({ \n  conversation = [], \n  variant = 'default',\n  title = 'AI Conversation',\n  isThinking = false,\n  thinkingMessage = null,\n  currentPlayer = null,\n  showTimestamps = true,\n  maxHeight = 384,\n  showRoleInfo = false,\n  learningActive = false\n}) => {\n  const chatContainerRef = useRef(null);\n  const [isAutoScroll, setIsAutoScroll] = useState(true);\n  const prevConversationLengthRef = useRef(0);\n  const scrollTimeoutRef = useRef(null);\n\n  const theme = useMemo(() => getTheme(variant), [variant]);\n  \n\n\n  const hasNewMessages = conversation.length > prevConversationLengthRef.current;\n  const newMessagesStartIndex = prevConversationLengthRef.current;\n\n  const scrollToBottom = useCallback(() => {\n    if (chatContainerRef.current) {\n      const container = chatContainerRef.current;\n      container.scrollTo({\n        top: container.scrollHeight,\n        behavior: 'smooth'\n      });\n    }\n  }, []);\n\n  const handleScroll = useCallback(() => {\n    if (scrollTimeoutRef.current) {\n      clearTimeout(scrollTimeoutRef.current);\n    }\n    \n    scrollTimeoutRef.current = setTimeout(() => {\n      if (!chatContainerRef.current) return;\n      \n      const container = chatContainerRef.current;\n      const isNearBottom = Math.abs(\n        container.scrollHeight - container.scrollTop - container.clientHeight\n      ) < 50;\n      \n      setIsAutoScroll(isNearBottom);\n    }, 100);\n  }, []);\n\n  const scrollToLatest = useCallback(() => {\n    setIsAutoScroll(true);\n    scrollToBottom();\n  }, [scrollToBottom]);\n\n  useEffect(() => {\n    if (hasNewMessages || isThinking) {\n      prevConversationLengthRef.current = conversation.length;\n      \n      if (isAutoScroll) {\n        const timeoutId = setTimeout(scrollToBottom, 50);\n        return () => clearTimeout(timeoutId);\n      }\n    }\n  }, [conversation.length, isThinking, isAutoScroll, scrollToBottom, hasNewMessages]);\n\n  useEffect(() => {\n    return () => {\n      if (scrollTimeoutRef.current) {\n        clearTimeout(scrollTimeoutRef.current);\n      }\n    };\n  }, []);\n\n\n\n  const containerClass = useMemo(() => \n    `bg-gradient-to-r ${theme.primary.bg} rounded-2xl p-6 shadow-inner mb-6`\n  , [theme.primary.bg]);\n\n  const chatContainerClass = useMemo(() => \n    \"space-y-6 overflow-y-auto mb-6 scroll-smooth\"\n  , []);\n\n  const chatContainerStyle = useMemo(() => \n    ({ maxHeight: `${maxHeight}px` })\n  , [maxHeight]);\n\n  // Sample conversation data for demo\n  const sampleConversation = [\n    {\n      sender: 'ai',\n      message: 'You\\'re doing brilliantly! You\\'re incredibly close to the target. Stay sharp, and move **LOWER**!',\n      timestamp: Date.now() - 30000,\n      currentPlayer: 'hider'\n    },\n    {\n      sender: 'ai',\n      message: 'Is it **42**? I think this might be the *perfect* answer!',\n      timestamp: Date.now() - 15000,\n      currentPlayer: 'guesser'\n    },\n    {\n      sender: 'user',\n      message: 'This formatting test shows **bold** and *italic* text working properly.',\n      timestamp: Date.now() - 5000\n    }\n  ];\n\n  const displayConversation = conversation.length > 0 ? conversation : sampleConversation;\n\n  return (\n    <div className={containerClass}>\n      <div className=\"flex items-center justify-between mb-6\">\n        <h3 className=\"text-2xl font-semibold text-gray-800 flex items-center gap-2\">\n          <Brain className={`w-7 h-7 ${theme.primary.icon}`} />\n          {title}\n          {learningActive && (\n            <span className=\"text-sm bg-blue-100 text-blue-800 px-2 py-1 rounded-full ml-2\">\n              📚 Learning Active\n            </span>\n          )}\n        </h3>\n        \n        {displayConversation.length > 0 && (\n          <ConversationStats \n            stats={{\n              total: displayConversation.length,\n              userMessages: displayConversation.filter(msg => msg.sender === 'user').length,\n              aiMessages: displayConversation.filter(msg => msg.sender === 'ai').length,\n              guesserMessages: displayConversation.filter(msg => msg.currentPlayer === 'guesser').length,\n              hiderMessages: displayConversation.filter(msg => msg.currentPlayer === 'hider').length\n            }} \n            showRoleStats={showRoleInfo} \n          />\n        )}\n      </div>\n\n      {showRoleInfo && displayConversation.length > 0 && (\n        <div className=\"mb-4 p-3 bg-white/50 rounded-xl border border-gray-200\">\n          <div className=\"flex items-center justify-center gap-8 text-sm\">\n            <div className=\"flex items-center gap-2\">\n              <span className=\"text-purple-600\">🎯</span>\n              <span className=\"text-purple-700 font-medium\">AI Hider (Left)</span>\n              <span className=\"text-gray-500\">Chooses number & gives hints</span>\n            </div>\n            <div className=\"flex items-center gap-2\">\n              <span className=\"text-blue-600\">🔍</span>\n              <span className=\"text-blue-700 font-medium\">AI Guesser (Right)</span>\n              <span className=\"text-gray-500\">Makes guesses</span>\n            </div>\n          </div>\n        </div>\n      )}\n\n      {displayConversation.length > 3 && !isAutoScroll && (\n        <div className=\"mb-4 text-center\">\n          <button\n            onClick={scrollToLatest}\n            className=\"px-3 py-1 bg-blue-500 text-white text-xs rounded-full hover:bg-blue-600 transition-colors\"\n          >\n            ↓ Scroll to latest\n          </button>\n        </div>\n      )}\n      \n      <div \n        ref={chatContainerRef}\n        className={chatContainerClass}\n        style={chatContainerStyle}\n        onScroll={handleScroll}\n      >\n        {displayConversation.length === 0 ? (\n          <EmptyState />\n        ) : (\n          <>\n            {displayConversation.map((msg, index) => {\n              const key = `msg-${index}-${msg.timestamp || index}`;\n              const isNew = hasNewMessages && index >= newMessagesStartIndex;\n              \n              return (\n                <MessageItem\n                  key={key}\n                  msg={msg}\n                  index={index}\n                  theme={theme}\n                  showTimestamps={showTimestamps}\n                  isNew={isNew}\n                />\n              );\n            })}\n            {isThinking && (\n              <ThinkingIndicator \n                theme={theme} \n                customMessage={thinkingMessage}\n                isGuesser={currentPlayer === 'guesser'}\n                currentPlayer={currentPlayer}\n              />\n            )}\n          </>\n        )}\n      </div>\n\n      <ConversationFooter conversation={displayConversation} stats={{\n        total: displayConversation.length,\n        userMessages: displayConversation.filter(msg => msg.sender === 'user').length,\n        aiMessages: displayConversation.filter(msg => msg.sender === 'ai').length,\n        guesserMessages: displayConversation.filter(msg => msg.currentPlayer === 'guesser').length,\n        hiderMessages: displayConversation.filter(msg => msg.currentPlayer === 'hider').length\n      }} />\n\n      <style jsx>{`\n        @keyframes fade-in {\n          from { opacity: 0; transform: translateY(5px); }\n          to { opacity: 1; transform: translateY(0); }\n        }\n        .animate-fade-in { \n          animation: fade-in 0.2s ease-out; \n        }\n      `}</style>\n    </div>\n  );\n};\n\nexport default React.memo(ConversationLog);","export class IntelligentContextAnalyzer {\n  constructor() {\n    this.conversationHistory = [];\n    this.gamePatterns = [];\n    this.strategicInsights = [];\n    this.lastAnalysisResult = null;\n    this.lastAnalysisTime = 0;\n\n    // Opponent modeling system\n    this.opponentProfile = {\n      responseStyle: \"unknown\",\n      hintQuality: 0.5,\n      difficulty: 0.5,\n      creativity: 0.5,\n      patterns: [],\n      preferences: {},\n      adaptationRate: 0.5,\n    };\n\n    // Creative reasoning engine\n    this.creativityEngine = {\n      unconventionalStrategies: [\n        \"edge_exploration\",\n        \"psychological_misdirection\",\n        \"pattern_breaking\",\n        \"reverse_psychology\",\n        \"chaos_theory\",\n      ],\n      innovationThreshold: 0.7,\n      creativityHistory: [],\n      lastCreativeMove: null,\n    };\n\n    // Metacognitive system\n    this.metacognition = {\n      confidenceCalibration: new Map(),\n      knowledgeGaps: [],\n      learningProgress: [],\n      selfAwareness: {\n        strengths: [],\n        weaknesses: [],\n        improvementAreas: [],\n      },\n    };\n\n    this.ultraEfficientConfig = {\n      analysisInterval: 8,\n      batchAnalysis: true,\n      compactPrompts: true,\n      resultCaching: 600000,\n      useLLMDecision: true,\n      staticAnalysisMode: false,\n      smartSkipping: true,\n      emergencyOnly: false,\n      enableOpponentModeling: true,\n      enableCreativity: true,\n      enableMetacognition: true,\n      creativityTriggerThreshold: 0.6,\n    };\n\n    this.stats = {\n      totalCalls: 0,\n      skippedCalls: 0,\n      cacheHits: 0,\n      llmDecisions: 0,\n      staticAnalysis: 0,\n      emergencyCalls: 0,\n      creativeStrategies: 0,\n      opponentPredictions: 0,\n      metacognitiveDecisions: 0,\n      adaptiveImprovements: 0,\n    };\n\n    this.gameStatePatterns = {\n      early: { needsAnalysis: 0.3, confidence: 0.6, creativity: 0.4 },\n      middle: { needsAnalysis: 0.7, confidence: 0.8, creativity: 0.7 },\n      late: { needsAnalysis: 0.9, confidence: 0.9, creativity: 0.9 },\n      transitions: {\n        \"R->B\": { significance: 0.8, analysisValue: 0.9, creativityBoost: 0.2 },\n        \"B->R\": { significance: 0.6, analysisValue: 0.7, creativityBoost: 0.4 },\n        \"B->B\": { significance: 0.3, analysisValue: 0.4, creativityBoost: 0.1 },\n      },\n    };\n\n    this.intelligentCache = new Map();\n  }\n\n  async analyzeContext(llmCall, newEntry) {\n    this.conversationHistory.push(newEntry);\n\n    // Update opponent modeling\n    if (this.ultraEfficientConfig.enableOpponentModeling) {\n      this.updateOpponentProfile(newEntry);\n    }\n\n    // Metacognitive self-assessment\n    if (this.ultraEfficientConfig.enableMetacognition) {\n      this.performMetacognitiveReflection();\n    }\n\n    const needsAnalysis = await this.shouldAnalyzeWithLLM(llmCall, newEntry);\n    const hasRecentAnalysis =\n      Date.now() - this.lastAnalysisTime <\n      this.ultraEfficientConfig.resultCaching;\n\n    if (!needsAnalysis && hasRecentAnalysis && this.lastAnalysisResult) {\n      this.stats.cacheHits++;\n      return this.enhanceWithCurrentContext(this.lastAnalysisResult, newEntry);\n    }\n\n    try {\n      const analysisPrompt = this.buildAdvancedGameContextPrompt();\n      const response = await llmCall(analysisPrompt);\n      const analysis = this.parseJSON(response);\n\n      this.lastAnalysisResult = this.enhanceAnalysisWithIntelligence(analysis);\n      this.lastAnalysisTime = Date.now();\n      this.strategicInsights.push(this.lastAnalysisResult);\n\n      // Record metacognitive data\n      this.recordMetacognitiveOutcome(analysis);\n\n      this.stats.totalCalls++;\n      this.stats.llmDecisions++;\n\n      return this.lastAnalysisResult;\n    } catch (error) {\n      return this.getAdvancedGameSpecificFallback(newEntry);\n    }\n  }\n\n  // Opponent modeling system\n  updateOpponentProfile(newEntry) {\n    const message = newEntry.message.toLowerCase();\n    const agent = newEntry.agent;\n\n    if (agent === \"Hider\" || agent === \"Human\") {\n      if (\n        message.includes(\"close\") ||\n        message.includes(\"warm\") ||\n        message.includes(\"getting\")\n      ) {\n        this.opponentProfile.hintQuality = Math.min(\n          1,\n          this.opponentProfile.hintQuality + 0.1\n        );\n        this.opponentProfile.responseStyle = \"helpful\";\n      } else if (\n        message.includes(\"nope\") ||\n        message.includes(\"wrong\") ||\n        message.length < 15\n      ) {\n        this.opponentProfile.hintQuality = Math.max(\n          0,\n          this.opponentProfile.hintQuality - 0.05\n        );\n        this.opponentProfile.responseStyle = \"challenging\";\n      }\n\n      const creativityIndicators = [\n        \"interesting\",\n        \"clever\",\n        \"nice\",\n        \"creative\",\n        \"good\",\n      ];\n      if (creativityIndicators.some((word) => message.includes(word))) {\n        this.opponentProfile.creativity = Math.min(\n          1,\n          this.opponentProfile.creativity + 0.1\n        );\n      }\n\n      this.opponentProfile.patterns.push({\n        turn: this.conversationHistory.length,\n        messageLength: message.length,\n        responseTime: Date.now(),\n        helpfulness: this.calculateHelpfulness(message),\n        timestamp: Date.now(),\n      });\n\n      if (this.opponentProfile.patterns.length > 10) {\n        this.opponentProfile.patterns.shift();\n      }\n    }\n  }\n\n  calculateHelpfulness(message) {\n    let helpfulness = 0.5;\n\n    if (message.includes(\"higher\") || message.includes(\"lower\"))\n      helpfulness += 0.3;\n    if (message.includes(\"close\") || message.includes(\"warm\"))\n      helpfulness += 0.2;\n    if (message.includes(\"far\") || message.includes(\"cold\")) helpfulness += 0.1;\n    if (message.length > 30) helpfulness += 0.1;\n    if (message.length < 10) helpfulness -= 0.2;\n\n    return Math.max(0, Math.min(1, helpfulness));\n  }\n\n  // Predict opponent behavior\n  predictOpponentBehavior(gameState) {\n    const profile = this.opponentProfile;\n\n    if (profile.patterns.length < 3) {\n      return { prediction: \"insufficient_data\", confidence: 0.3 };\n    }\n\n    const recentPatterns = profile.patterns.slice(-3);\n    const avgHelpfulness =\n      recentPatterns.reduce((sum, p) => sum + p.helpfulness, 0) /\n      recentPatterns.length;\n\n    let prediction = {};\n\n    if (profile.responseStyle === \"helpful\" && avgHelpfulness > 0.7) {\n      prediction = {\n        expectedHintQuality: \"high\",\n        likelyToGiveHints: true,\n        preferredDifficulty: \"moderate\",\n        confidence: 0.8,\n      };\n    } else if (profile.responseStyle === \"challenging\") {\n      prediction = {\n        expectedHintQuality: \"minimal\",\n        likelyToGiveHints: false,\n        preferredDifficulty: \"hard\",\n        confidence: 0.7,\n      };\n    } else {\n      prediction = {\n        expectedHintQuality: \"medium\",\n        likelyToGiveHints: true,\n        preferredDifficulty: \"adaptive\",\n        confidence: 0.6,\n      };\n    }\n\n    this.stats.opponentPredictions++;\n    return prediction;\n  }\n\n  // Creative strategy generation\n  generateCreativeStrategy(gameState, contextAnalysis) {\n    if (!this.ultraEfficientConfig.enableCreativity) {\n      return null;\n    }\n\n    const creativityScore = this.calculateCreativityNeed(\n      gameState,\n      contextAnalysis\n    );\n\n    if (\n      creativityScore < this.ultraEfficientConfig.creativityTriggerThreshold\n    ) {\n      return null;\n    }\n\n    const strategies = this.creativityEngine.unconventionalStrategies;\n    const chosenStrategy =\n      strategies[Math.floor(Math.random() * strategies.length)];\n\n    const creativeApproach = this.implementCreativeStrategy(\n      chosenStrategy,\n      gameState\n    );\n\n    this.creativityEngine.lastCreativeMove = {\n      strategy: chosenStrategy,\n      gameState: { ...gameState },\n      timestamp: Date.now(),\n      approach: creativeApproach,\n    };\n\n    this.stats.creativeStrategies++;\n\n    return creativeApproach;\n  }\n\n  calculateCreativityNeed(gameState, contextAnalysis) {\n    let creativityNeed = 0.3;\n\n    // If conventional strategies aren't working, increase creativity need\n    if (gameState.guessCount > 8) creativityNeed += 0.3;\n    if (contextAnalysis?.patterns?.efficiency < 0.6) creativityNeed += 0.2;\n    if (this.opponentProfile.creativity > 0.7) creativityNeed += 0.2;\n\n    // If range is small but not guessed yet, may need creative approach\n    const rangeSize = gameState.range\n      ? gameState.range.max - gameState.range.min + 1\n      : 100;\n    if (rangeSize < 10 && gameState.guessCount > 5) creativityNeed += 0.4;\n\n    return Math.min(1, creativityNeed);\n  }\n\n  implementCreativeStrategy(strategyType, gameState) {\n    switch (strategyType) {\n      case \"edge_exploration\":\n        return {\n          type: \"edge_exploration\",\n          description: \"Explore number edges for psychological insight\",\n          modification: \"focus_on_boundaries\",\n          reasoning: \"People often avoid extreme numbers\",\n        };\n\n      case \"psychological_misdirection\":\n        return {\n          type: \"psychological_misdirection\",\n          description: \"Use reverse psychology in number selection\",\n          modification: \"counter_intuitive_choice\",\n          reasoning: 'Choose numbers that seem \"too obvious\"',\n        };\n\n      case \"pattern_breaking\":\n        return {\n          type: \"pattern_breaking\",\n          description: \"Deliberately break established patterns\",\n          modification: \"anti_pattern_guess\",\n          reasoning: \"Surprise opponent by changing approach\",\n        };\n\n      case \"chaos_theory\":\n        return {\n          type: \"chaos_theory\",\n          description: \"Introduce controlled randomness\",\n          modification: \"strategic_randomness\",\n          reasoning: \"Sometimes randomness is the best strategy\",\n        };\n\n      default:\n        return {\n          type: \"creative_adaptation\",\n          description: \"Adaptive creative approach\",\n          modification: \"context_creative\",\n          reasoning: \"Adapt creativity to current situation\",\n        };\n    }\n  }\n\n  // Metacognitive system\n  performMetacognitiveReflection() {\n    if (!this.ultraEfficientConfig.enableMetacognition) return;\n\n    // Evaluate own cognitive state\n    const reflection = {\n      confidenceAccuracy: this.evaluateConfidenceCalibration(),\n      strategyEffectiveness: this.evaluateStrategyPerformance(),\n      learningProgress: this.assessLearningProgress(),\n      knowledgeGaps: this.identifyKnowledgeGaps(),\n    };\n\n    // Adjust behavior based on reflection\n    this.adjustBehaviorBasedOnReflection(reflection);\n\n    this.stats.metacognitiveDecisions++;\n  }\n\n  evaluateConfidenceCalibration() {\n    // Evaluate if my confidence predictions are accurate\n    const recentPredictions = Array.from(\n      this.metacognition.confidenceCalibration.values()\n    ).slice(-10);\n\n    if (recentPredictions.length < 3)\n      return { status: \"insufficient_data\", accuracy: 0.5 };\n\n    const accuracy =\n      recentPredictions.reduce((sum, pred) => {\n        return sum + (pred.actual === pred.predicted ? 1 : 0);\n      }, 0) / recentPredictions.length;\n\n    return {\n      status: accuracy > 0.7 ? \"well_calibrated\" : \"needs_improvement\",\n      accuracy: accuracy,\n      suggestion:\n        accuracy < 0.7 ? \"reduce_overconfidence\" : \"maintain_current_approach\",\n    };\n  }\n\n  evaluateStrategyPerformance() {\n    const recentInsights = this.strategicInsights.slice(-5);\n\n    if (recentInsights.length < 3) return { performance: \"unknown\" };\n\n    const avgEfficiency =\n      recentInsights.reduce((sum, insight) => {\n        return sum + (insight.patterns?.efficiency || 0.5);\n      }, 0) / recentInsights.length;\n\n    return {\n      performance:\n        avgEfficiency > 0.7\n          ? \"good\"\n          : avgEfficiency > 0.5\n          ? \"moderate\"\n          : \"poor\",\n      efficiency: avgEfficiency,\n      recommendation:\n        avgEfficiency < 0.6\n          ? \"try_creative_approaches\"\n          : \"continue_current_strategy\",\n    };\n  }\n\n  assessLearningProgress() {\n    const progressMetrics = {\n      patternRecognitionImprovement: this.measurePatternRecognitionGrowth(),\n      adaptationSpeed: this.measureAdaptationSpeed(),\n      creativityGrowth: this.measureCreativityGrowth(),\n    };\n\n    return {\n      overall:\n        Object.values(progressMetrics).reduce((sum, val) => sum + val, 0) / 3,\n      details: progressMetrics,\n    };\n  }\n\n  identifyKnowledgeGaps() {\n    const gaps = [];\n\n    // Identify knowledge gaps based on errors or inefficient performance\n    if (\n      this.stats.totalCalls > 10 &&\n      this.stats.cacheHits / this.stats.totalCalls < 0.3\n    ) {\n      gaps.push(\"context_recognition\");\n    }\n\n    if (\n      this.opponentProfile.patterns.length > 5 &&\n      this.opponentProfile.responseStyle === \"unknown\"\n    ) {\n      gaps.push(\"opponent_modeling\");\n    }\n\n    if (\n      this.stats.creativeStrategies === 0 &&\n      this.conversationHistory.length > 10\n    ) {\n      gaps.push(\"creative_problem_solving\");\n    }\n\n    return gaps;\n  }\n\n  adjustBehaviorBasedOnReflection(reflection) {\n    // Adjust behavioral parameters based on metacognitive reflection\n    if (reflection.confidenceAccuracy.status === \"needs_improvement\") {\n      // Reduce confidence thresholds\n      this.gameStatePatterns.early.confidence *= 0.9;\n      this.gameStatePatterns.middle.confidence *= 0.9;\n      this.gameStatePatterns.late.confidence *= 0.9;\n    }\n\n    if (reflection.strategyEffectiveness.performance === \"poor\") {\n      // Increase creative strategy usage\n      this.ultraEfficientConfig.creativityTriggerThreshold *= 0.8;\n    }\n\n    this.stats.adaptiveImprovements++;\n  }\n\n  // Enhanced analysis results\n  enhanceAnalysisWithIntelligence(analysis) {\n    const baseAnalysis = this.enhanceAnalysis(analysis);\n\n    // Add opponent modeling information\n    const opponentPrediction = this.predictOpponentBehavior();\n\n    // Add creative suggestions\n    const creativeStrategy = this.generateCreativeStrategy(\n      {\n        range: this.inferCurrentRange(),\n        guessCount: this.conversationHistory.length,\n      },\n      baseAnalysis\n    );\n\n    // Add metacognitive insights\n    const metacognitiveInsights = this.generateMetacognitiveInsights();\n\n    return {\n      ...baseAnalysis,\n      intelligence_enhancements: {\n        opponent_modeling: {\n          profile: this.opponentProfile,\n          prediction: opponentPrediction,\n          confidence: opponentPrediction.confidence || 0.5,\n        },\n        creative_strategy: creativeStrategy,\n        metacognitive_insights: metacognitiveInsights,\n        advanced_reasoning: this.generateAdvancedReasoning(baseAnalysis),\n      },\n      meta: {\n        ...baseAnalysis.meta,\n        intelligence_level: \"ENHANCED\",\n        capabilities: [\n          \"opponent_modeling\",\n          \"creative_thinking\",\n          \"metacognition\",\n        ],\n        enhancement_timestamp: Date.now(),\n      },\n    };\n  }\n\n  generateAdvancedReasoning(baseAnalysis) {\n    const reasoning = [];\n\n    // Reasoning based on opponent model\n    if (this.opponentProfile.responseStyle !== \"unknown\") {\n      reasoning.push(\n        `Opponent shows ${this.opponentProfile.responseStyle} style with ${(\n          this.opponentProfile.hintQuality * 100\n        ).toFixed(0)}% hint quality`\n      );\n    }\n\n    // Reasoning based on creativity needs\n    const creativityNeed = this.calculateCreativityNeed(\n      { guessCount: this.conversationHistory.length },\n      baseAnalysis\n    );\n    if (creativityNeed > 0.6) {\n      reasoning.push(\n        `High creativity need (${(creativityNeed * 100).toFixed(\n          0\n        )}%) suggests unconventional approach`\n      );\n    }\n\n    // Metacognitive reasoning\n    if (this.metacognition.knowledgeGaps.length > 0) {\n      reasoning.push(\n        `Identified knowledge gaps: ${this.metacognition.knowledgeGaps.join(\n          \", \"\n        )}`\n      );\n    }\n\n    return reasoning;\n  }\n\n  generateMetacognitiveInsights() {\n    return {\n      self_assessment: {\n        current_strategy_effectiveness: this.evaluateStrategyPerformance(),\n        confidence_calibration: this.evaluateConfidenceCalibration(),\n        learning_trajectory: this.assessLearningProgress(),\n      },\n      improvement_opportunities: this.identifyKnowledgeGaps(),\n      next_actions: this.suggestNextActions(),\n    };\n  }\n\n  suggestNextActions() {\n    const suggestions = [];\n\n    if (this.opponentProfile.patterns.length < 3) {\n      suggestions.push(\"gather_more_opponent_data\");\n    }\n\n    if (\n      this.stats.creativeStrategies === 0 &&\n      this.conversationHistory.length > 6\n    ) {\n      suggestions.push(\"consider_creative_approach\");\n    }\n\n    if (this.stats.cacheHits / Math.max(1, this.stats.totalCalls) < 0.2) {\n      suggestions.push(\"improve_pattern_recognition\");\n    }\n\n    return suggestions;\n  }\n\n  // Enhanced prompt building\n  buildAdvancedGameContextPrompt() {\n    const ctx = this.extractGameContext();\n    const opponentInfo = this.getOpponentContextString();\n    const creativeHint = this.getCreativeContextString();\n\n    const history = this.conversationHistory\n      .slice(-4)\n      .map((e, i) => `${i + 1}.${e.agent[0]}:\"${e.message.substring(0, 15)}\"`)\n      .join(\" \");\n\n    return `NumG T${ctx.turn} ${ctx.phase} R:${ctx.range} S:${ctx.strategy}\nH:${history}\nOPP:${opponentInfo}\nCREATIVE:${creativeHint}\nA: {patterns:{strategy,adapt,eff,creative},dynamics:{eng,diff,flow},insights:[\"k1\",\"k2\",\"k3\"],guide:{h,g},pred:{next,conf},opponent:{style,hint_quality},creative:{need,approach}}`;\n  }\n\n  getOpponentContextString() {\n    const profile = this.opponentProfile;\n    return `Style:${profile.responseStyle} Hints:${(\n      profile.hintQuality * 100\n    ).toFixed(0)}% Creative:${(profile.creativity * 100).toFixed(0)}%`;\n  }\n\n  getCreativeContextString() {\n    const creativityNeed = this.calculateCreativityNeed(\n      { guessCount: this.conversationHistory.length },\n      {}\n    );\n    return `Need:${(creativityNeed * 100).toFixed(0)}% Last:${\n      this.creativityEngine.lastCreativeMove?.strategy || \"none\"\n    }`;\n  }\n\n  // Enhanced fallback solution\n  getAdvancedGameSpecificFallback(newEntry) {\n    const baseFallback = this.getGameSpecificFallback(newEntry);\n\n    // Add intelligent enhancements\n    const opponentPrediction = this.predictOpponentBehavior();\n    const creativeStrategy = this.generateCreativeStrategy(\n      { guessCount: this.conversationHistory.length },\n      baseFallback\n    );\n\n    return {\n      ...baseFallback,\n      intelligence_enhancements: {\n        opponent_modeling: {\n          profile_summary: `${this.opponentProfile.responseStyle} style, ${(\n            this.opponentProfile.hintQuality * 100\n          ).toFixed(0)}% hint quality`,\n          prediction: opponentPrediction,\n        },\n        creative_suggestions: creativeStrategy,\n        metacognitive_state: {\n          confidence_in_fallback: 0.6,\n          alternative_approaches: this.suggestNextActions(),\n        },\n      },\n      meta: {\n        ...baseFallback.meta,\n        analysisType: \"ADVANCED_GAME_FALLBACK\",\n        intelligence_level: \"ENHANCED\",\n      },\n    };\n  }\n\n  // Helper methods\n  measurePatternRecognitionGrowth() {\n    return Math.min(\n      1,\n      this.stats.cacheHits / Math.max(1, this.stats.totalCalls)\n    );\n  }\n\n  measureAdaptationSpeed() {\n    return Math.min(\n      1,\n      this.stats.adaptiveImprovements /\n        Math.max(1, this.conversationHistory.length)\n    );\n  }\n\n  measureCreativityGrowth() {\n    return Math.min(\n      1,\n      this.stats.creativeStrategies /\n        Math.max(1, this.conversationHistory.length * 0.3)\n    );\n  }\n\n  recordMetacognitiveOutcome(analysis) {\n    // Record prediction vs actual comparison for improving metacognition\n    const key = `analysis_${Date.now()}`;\n    this.metacognition.confidenceCalibration.set(key, {\n      predicted: analysis.confidence || 0.5,\n      actual: null, // Will be updated later\n      timestamp: Date.now(),\n    });\n\n    // Clean old records\n    if (this.metacognition.confidenceCalibration.size > 20) {\n      const firstKey = this.metacognition.confidenceCalibration\n        .keys()\n        .next().value;\n      this.metacognition.confidenceCalibration.delete(firstKey);\n    }\n  }\n\n  // Get enhanced statistics\n  getEnhancedEfficiencyStats() {\n    const baseStats = this.getEfficiencyStats();\n\n    return {\n      ...baseStats,\n      intelligence_metrics: {\n        opponent_modeling: {\n          profile_accuracy:\n            this.opponentProfile.patterns.length > 3 ? 0.8 : 0.4,\n          predictions_made: this.stats.opponentPredictions,\n          style_identified: this.opponentProfile.responseStyle !== \"unknown\",\n        },\n        creativity: {\n          creative_strategies_used: this.stats.creativeStrategies,\n          creativity_success_rate: this.stats.creativeStrategies > 0 ? 0.7 : 0,\n          innovation_level:\n            this.creativityEngine.creativityHistory.length /\n            Math.max(1, this.conversationHistory.length),\n        },\n        metacognition: {\n          self_awareness_level:\n            this.metacognition.knowledgeGaps.length > 0 ? 0.8 : 0.5,\n          adaptive_improvements: this.stats.adaptiveImprovements,\n          learning_progress: this.assessLearningProgress().overall,\n        },\n      },\n      intelligence_level: \"ENHANCED_AI\",\n      cognitive_capabilities: [\n        \"Advanced Pattern Recognition\",\n        \"Opponent Modeling\",\n        \"Creative Problem Solving\",\n        \"Metacognitive Reasoning\",\n      ],\n    };\n  }\n\n  reset() {\n    // Preserve some long-term learning data\n    const preservedOpponentInsights = {\n      creativityPreference: this.opponentProfile.creativity,\n      generalStyle: this.opponentProfile.responseStyle,\n    };\n\n    // Reset basic data\n    this.conversationHistory = [];\n    this.gamePatterns = [];\n    this.strategicInsights = [];\n    this.lastAnalysisResult = null;\n    this.lastAnalysisTime = 0;\n    this.intelligentCache.clear();\n\n    // Reset statistics but preserve some intelligent cumulative data\n    const preservedStats = {\n      totalLifetimeGames: (this.stats.totalCalls || 0) + 1,\n      cumulativeCreativeStrategies: this.stats.creativeStrategies,\n      cumulativeOpponentPredictions: this.stats.opponentPredictions,\n    };\n\n    this.stats = {\n      totalCalls: 0,\n      skippedCalls: 0,\n      cacheHits: 0,\n      llmDecisions: 0,\n      staticAnalysis: 0,\n      emergencyCalls: 0,\n      creativeStrategies: 0,\n      opponentPredictions: 0,\n      metacognitiveDecisions: 0,\n      adaptiveImprovements: 0,\n      ...preservedStats,\n    };\n\n    // Partially reset opponent profile, keeping useful long-term insights\n    this.opponentProfile = {\n      responseStyle:\n        preservedOpponentInsights.generalStyle !== \"unknown\"\n          ? preservedOpponentInsights.generalStyle\n          : \"unknown\",\n      hintQuality: 0.5,\n      difficulty: 0.5,\n      creativity: preservedOpponentInsights.creativityPreference,\n      patterns: [],\n      preferences: {},\n      adaptationRate: 0.5,\n    };\n\n    // Reset creativity engine but preserve some learning\n    this.creativityEngine.creativityHistory = [];\n    this.creativityEngine.lastCreativeMove = null;\n\n    // Reset metacognition but preserve some self-awareness\n    this.metacognition.confidenceCalibration.clear();\n    this.metacognition.knowledgeGaps = [];\n    this.metacognition.learningProgress = [];\n  }\n}\n","export class AdvancedIntelligentPromptSystem {\n  constructor() {\n    // Learning data storage\n    this.learningDatabase = {\n      rangePatterns: new Map(),\n      feedbackAnalysis: new Map(),\n      strategyEffectiveness: new Map(),\n      opponentBehavior: new Map(),\n      contextualInsights: [],\n    };\n\n    // Intelligent range classification system\n    this.rangeClassification = {\n      mega_range: { min: 51, max: 100, strategy: \"aggressive_binary\" },\n      large_range: { min: 26, max: 50, strategy: \"standard_binary\" },\n      medium_range: { min: 11, max: 25, strategy: \"adaptive_binary\" },\n      small_range: { min: 6, max: 10, strategy: \"smart_elimination\" },\n      tiny_range: { min: 3, max: 5, strategy: \"pattern_recognition\" },\n      final_range: { min: 1, max: 2, strategy: \"educated_guess\" },\n    };\n\n    // Context intelligent analysis\n    this.contextAnalyzers = {\n      proximity: this.analyzeProximitySignals.bind(this),\n      momentum: this.analyzeMomentumPatterns.bind(this),\n      feedback: this.analyzeFeedbackQuality.bind(this),\n      efficiency: this.analyzeEfficiencyTrends.bind(this),\n    };\n  }\n\n  // Main method: Build learning-oriented intelligent prompt\n  buildLearningOrientedPrompt(\n    gameState,\n    conversationHistory,\n    learningData = null\n  ) {\n    const rangeSize = gameState.range.max - gameState.range.min + 1;\n    const classification = this.classifyRange(rangeSize);\n    const contextualInsights = this.gatherContextualInsights(\n      gameState,\n      conversationHistory\n    );\n    const learningInsights = this.extractLearningInsights(learningData);\n    const strategicGuidance = this.generateStrategicGuidance(\n      gameState,\n      contextualInsights,\n      learningInsights\n    );\n\n    return this.assembleIntelligentPrompt({\n      classification,\n      gameState,\n      contextualInsights,\n      learningInsights,\n      strategicGuidance,\n      conversationHistory,\n    });\n  }\n\n  // Intelligent range classification\n  classifyRange(rangeSize) {\n    for (const [category, config] of Object.entries(this.rangeClassification)) {\n      if (rangeSize >= config.min && rangeSize <= config.max) {\n        return { category, config, size: rangeSize };\n      }\n    }\n    return {\n      category: \"ultra_large\",\n      config: { strategy: \"ultra_aggressive_binary\" },\n      size: rangeSize,\n    };\n  }\n\n  // Gather contextual insights\n  gatherContextualInsights(gameState, conversationHistory) {\n    const insights = {\n      proximitySignals: this.contextAnalyzers.proximity(conversationHistory),\n      momentumPatterns: this.contextAnalyzers.momentum(gameState),\n      feedbackQuality: this.contextAnalyzers.feedback(conversationHistory),\n      efficiencyTrends: this.contextAnalyzers.efficiency(gameState),\n    };\n\n    return this.synthesizeInsights(insights);\n  }\n\n  // Extract learning insights\n  extractLearningInsights(learningData) {\n    if (!learningData) return { confidence: 0.5, recommendations: [] };\n\n    const gameHistory = learningData.gameHistory || [];\n    const insights = {\n      averageGuesses: this.calculateAverageGuesses(gameHistory),\n      successPatterns: this.identifySuccessPatterns(gameHistory),\n      commonMistakes: this.identifyCommonMistakes(gameHistory),\n      optimalStrategies: this.identifyOptimalStrategies(gameHistory),\n    };\n\n    return {\n      confidence: Math.min(0.95, 0.5 + gameHistory.length * 0.05),\n      ...insights,\n    };\n  }\n\n  // Generate strategic guidance\n  generateStrategicGuidance(gameState, contextualInsights, learningInsights) {\n    const { min, max } = gameState.range;\n    const optimalGuess = Math.floor((min + max) / 2);\n    const rangeSize = max - min + 1;\n\n    let primaryStrategy = \"binary_search\";\n    let confidence = 0.8;\n    let reasoning = `Standard binary search for range ${min}-${max}`;\n\n    // Adjust strategy based on learning data\n    if (learningInsights.confidence > 0.7) {\n      if (learningInsights.successPatterns.includes(\"aggressive_early\")) {\n        primaryStrategy = \"aggressive_binary\";\n        confidence = 0.9;\n        reasoning = \"Learned pattern: aggressive early moves are effective\";\n      } else if (\n        learningInsights.commonMistakes.includes(\"premature_precision\")\n      ) {\n        primaryStrategy = \"conservative_binary\";\n        confidence = 0.85;\n        reasoning =\n          \"Learned pattern: avoid premature precision, maintain binary search\";\n      }\n    }\n\n    // Adjust based on context\n    if (contextualInsights.proximitySignal === \"very_close\" && rangeSize > 5) {\n      reasoning += \" | Proximity detected but maintaining optimal strategy\";\n    }\n\n    return {\n      primaryStrategy,\n      optimalGuess,\n      confidence,\n      reasoning,\n      alternatives: this.generateAlternativeStrategies(\n        gameState,\n        contextualInsights\n      ),\n    };\n  }\n\n  // Assemble intelligent prompt\n  assembleIntelligentPrompt({\n    classification,\n    gameState,\n    contextualInsights,\n    learningInsights,\n    strategicGuidance,\n  }) {\n    const { min, max } = gameState.range;\n    const { category, size } = classification;\n    const { optimalGuess, reasoning, confidence } = strategicGuidance;\n\n    let prompt = `INTELLIGENT NUMBER GUESSING SYSTEM\n===========================================\n\nCURRENT SITUATION:\n• Range: ${min} to ${max} (${size} numbers remaining)\n• Range Category: ${category.toUpperCase().replace(\"_\", \" \")}\n• Optimal Mathematical Choice: ${optimalGuess}\n\n`;\n\n    // Add learning insights\n    if (learningInsights.confidence > 0.6) {\n      prompt += `LEARNED INTELLIGENCE (Confidence: ${(\n        learningInsights.confidence * 100\n      ).toFixed(0)}%):\n• Average guesses in similar situations: ${\n        learningInsights.averageGuesses || \"N/A\"\n      }\n• Success patterns identified: ${\n        learningInsights.successPatterns.join(\", \") || \"Analyzing...\"\n      }\n• Strategic recommendation: ${reasoning}\n\n`;\n    }\n\n    // Add contextual analysis\n    if (contextualInsights.proximitySignal !== \"none\") {\n      prompt += `CONTEXTUAL ANALYSIS:\n• Proximity signals: ${contextualInsights.proximitySignal}\n• Momentum pattern: ${contextualInsights.momentum}\n• Feedback quality: ${contextualInsights.feedbackQuality}\n• Strategic note: ${contextualInsights.strategicNote}\n\n`;\n    }\n\n    // Add specific strategy guidance\n    prompt += this.generateCategorySpecificGuidance(\n      category,\n      min,\n      max,\n      optimalGuess\n    );\n\n    // Add reinforcement learning directive\n    prompt += `\nREINFORCEMENT LEARNING DIRECTIVE:\nBased on accumulated intelligence, your response will be analyzed for:\n• Strategic consistency with learned patterns\n• Mathematical optimality (binary search adherence)  \n• Adaptive intelligence (context awareness)\n• Long-term efficiency (minimizing total guesses)\n\nRESPONSE REQUIREMENTS:\nRespond with JSON format including your reasoning process:\n{\n  \"guess\": ${optimalGuess},\n  \"primary_reasoning\": \"Why this is the optimal choice\",\n  \"learned_insight\": \"What pattern/knowledge influenced this decision\",\n  \"confidence_level\": ${confidence},\n  \"strategic_category\": \"${category}\"\n}`;\n\n    return prompt;\n  }\n\n  // Category-specific guidance\n  generateCategorySpecificGuidance(category, min, max, optimal) {\n    const strategies = {\n      ultra_large: `\nULTRA LARGE RANGE STRATEGY:\n• Use aggressive binary search to rapidly eliminate possibilities\n• Each guess should cut the range by approximately 50%\n• Ignore proximity hints until range < 20\n• Focus on mathematical efficiency over intuitive adjustments`,\n\n      mega_range: `\nMEGA RANGE STRATEGY:  \n• Maintain strict binary search discipline\n• Current optimal choice: ${optimal} (mathematical midpoint)\n• Each guess provides maximum information gain\n• Resist temptation to make intuitive adjustments`,\n\n      large_range: `\nLARGE RANGE STRATEGY:\n• Continue standard binary search approach\n• Optimal choice: ${optimal} (range midpoint: ${min}-${max})\n• Maintain logarithmic efficiency\n• Proximity signals are secondary to mathematical optimality`,\n\n      medium_range: `\nMEDIUM RANGE STRATEGY:\n• Adaptive binary search with contextual awareness\n• Primary choice: ${optimal} (mathematical center)\n• Begin incorporating proximity feedback\n• Balance between mathematical optimality and contextual clues`,\n\n      small_range: `\nSMALL RANGE STRATEGY:\n• Smart elimination within ${min}-${max}\n• Consider: ${this.generateSmallRangeOptions(min, max)}\n• Proximity signals become more significant\n• Optimal choice: ${optimal}`,\n\n      tiny_range: `\nTINY RANGE STRATEGY:\n• Pattern recognition mode for ${min}-${max}\n• Remaining options: [${this.generateTinyRangeList(min, max)}]\n• High contextual sensitivity\n• Strategic choice: ${optimal}`,\n\n      final_range: `\nFINAL RANGE STRATEGY:\n• Educated guess between remaining options: [${this.generateFinalRangeList(\n        min,\n        max\n      )}]\n• Analyze all available contextual clues\n• Make definitive choice: ${optimal}`,\n    };\n\n    return strategies[category] || strategies.large_range;\n  }\n\n  // Context analyzers\n  analyzeProximitySignals(conversationHistory) {\n    const recentFeedback = conversationHistory.slice(-2);\n\n    for (const entry of recentFeedback) {\n      if (\n        entry.message.includes(\"very close\") ||\n        entry.message.includes(\"extremely close\")\n      ) {\n        return \"very_close\";\n      } else if (\n        entry.message.includes(\"close\") ||\n        entry.message.includes(\"warm\")\n      ) {\n        return \"close\";\n      } else if (entry.message.includes(\"getting warmer\")) {\n        return \"warming\";\n      }\n    }\n    return \"none\";\n  }\n\n  analyzeMomentumPatterns(gameState) {\n    const recentGuesses = gameState.guessHistory.slice(-3);\n    if (recentGuesses.length < 2) return \"establishing\";\n\n    const diffs = [];\n    for (let i = 1; i < recentGuesses.length; i++) {\n      diffs.push(Math.abs(recentGuesses[i] - recentGuesses[i - 1]));\n    }\n\n    const avgDiff = diffs.reduce((a, b) => a + b, 0) / diffs.length;\n\n    if (avgDiff > 25) return \"broad_search\";\n    else if (avgDiff > 10) return \"narrowing\";\n    else if (avgDiff > 3) return \"fine_tuning\";\n    else return \"precision_mode\";\n  }\n\n  analyzeFeedbackQuality(conversationHistory) {\n    const feedbacks = conversationHistory.filter((h) => h.agent === \"Hider\");\n\n    let qualityScore = 0;\n    for (const feedback of feedbacks.slice(-3)) {\n      if (\n        feedback.message.includes(\"close\") ||\n        feedback.message.includes(\"warm\")\n      ) {\n        qualityScore += 2;\n      } else if (\n        feedback.message.includes(\"higher\") ||\n        feedback.message.includes(\"lower\")\n      ) {\n        qualityScore += 1;\n      }\n    }\n\n    if (qualityScore >= 4) return \"high_quality\";\n    else if (qualityScore >= 2) return \"medium_quality\";\n    else return \"basic_directional\";\n  }\n\n  analyzeEfficiencyTrends(gameState) {\n    const { guessCount, range } = gameState;\n    const theoreticalOptimal = Math.ceil(Math.log2(100));\n    const currentRangeOptimal = Math.ceil(Math.log2(range.max - range.min + 1));\n\n    const efficiency =\n      guessCount <= theoreticalOptimal\n        ? \"optimal\"\n        : guessCount <= theoreticalOptimal + 2\n        ? \"good\"\n        : guessCount <= theoreticalOptimal + 4\n        ? \"acceptable\"\n        : \"suboptimal\";\n\n    return {\n      current: efficiency,\n      theoretical: theoreticalOptimal,\n      actual: guessCount,\n      remaining_optimal: currentRangeOptimal,\n    };\n  }\n\n  // Synthesize insights\n  synthesizeInsights(insights) {\n    const {\n      proximitySignals,\n      momentumPatterns,\n      feedbackQuality,\n      efficiencyTrends,\n    } = insights;\n\n    let strategicNote = \"\";\n\n    if (\n      proximitySignals === \"very_close\" &&\n      momentumPatterns === \"precision_mode\"\n    ) {\n      strategicNote =\n        \"High precision context detected - maintain strategic focus\";\n    } else if (\n      momentumPatterns === \"broad_search\" &&\n      efficiencyTrends.current === \"optimal\"\n    ) {\n      strategicNote =\n        \"Excellent broad search efficiency - continue binary approach\";\n    } else if (\n      feedbackQuality === \"high_quality\" &&\n      proximitySignals !== \"none\"\n    ) {\n      strategicNote =\n        \"Rich feedback available - balance mathematical optimality with contextual clues\";\n    } else {\n      strategicNote = \"Standard strategic approach recommended\";\n    }\n\n    return {\n      proximitySignal: proximitySignals,\n      momentum: momentumPatterns,\n      feedbackQuality: feedbackQuality,\n      efficiency: efficiencyTrends,\n      strategicNote: strategicNote,\n    };\n  }\n\n  // Learning data analysis methods\n  calculateAverageGuesses(gameHistory) {\n    if (gameHistory.length === 0) return null;\n    const total = gameHistory.reduce(\n      (sum, game) => sum + (game.guessCount || 7),\n      0\n    );\n    return (total / gameHistory.length).toFixed(1);\n  }\n\n  identifySuccessPatterns(gameHistory) {\n    const patterns = [];\n    const efficientGames = gameHistory.filter(\n      (game) => (game.guessCount || 7) <= 7\n    );\n\n    if (efficientGames.length > gameHistory.length * 0.7) {\n      patterns.push(\"consistent_efficiency\");\n    }\n\n    if (gameHistory.some((game) => (game.guessCount || 7) <= 5)) {\n      patterns.push(\"aggressive_early\");\n    }\n\n    return patterns;\n  }\n\n  identifyCommonMistakes(gameHistory) {\n    const mistakes = [];\n    const inefficientGames = gameHistory.filter(\n      (game) => (game.guessCount || 7) > 10\n    );\n\n    if (inefficientGames.length > gameHistory.length * 0.3) {\n      mistakes.push(\"premature_precision\");\n    }\n\n    return mistakes;\n  }\n\n  identifyOptimalStrategies(gameHistory) {\n    const strategies = [];\n    const veryEfficientGames = gameHistory.filter(\n      (game) => (game.guessCount || 7) <= 6\n    );\n\n    if (veryEfficientGames.length > 0) {\n      strategies.push(\"binary_search_mastery\");\n    }\n\n    return strategies;\n  }\n\n  generateAlternativeStrategies(gameState, contextualInsights) {\n    const { min, max } = gameState.range;\n    const alternatives = [];\n\n    alternatives.push({\n      name: \"conservative_binary\",\n      guess: Math.floor((min + max) / 2),\n      reasoning: \"Pure mathematical approach, ignore contextual noise\",\n    });\n\n    if (contextualInsights.proximitySignal === \"very_close\") {\n      const lastGuess =\n        gameState.guessHistory[gameState.guessHistory.length - 1];\n      if (lastGuess) {\n        alternatives.push({\n          name: \"proximity_adjusted\",\n          guess: Math.max(\n            min,\n            Math.min(max, lastGuess + (Math.random() > 0.5 ? 1 : -1))\n          ),\n          reasoning:\n            \"Minor adjustment based on proximity signal (not recommended for large ranges)\",\n        });\n      }\n    }\n\n    return alternatives;\n  }\n\n  // Helper methods: Generate range options\n  generateSmallRangeOptions(min, max) {\n    const options = [];\n    for (let i = min; i <= max; i++) {\n      options.push(i);\n    }\n    return options.join(\", \");\n  }\n\n  generateTinyRangeList(min, max) {\n    const list = [];\n    for (let i = min; i <= max; i++) {\n      list.push(i);\n    }\n    return list.join(\", \");\n  }\n\n  generateFinalRangeList(min, max) {\n    const list = [];\n    for (let i = min; i <= max; i++) {\n      list.push(i);\n    }\n    return list.join(\", \");\n  }\n\n  // Learning system: Record and analyze results\n  recordGameResult(gameState, conversationHistory, result) {\n    const learningEntry = {\n      timestamp: Date.now(),\n      rangeSize: 100,\n      finalGuessCount: result.guessCount,\n      efficiency: result.guessCount <= 7 ? \"optimal\" : \"suboptimal\",\n      strategiesUsed: Array.from(gameState.strategiesUsed || []),\n      contextualFactors: this.gatherContextualInsights(\n        gameState,\n        conversationHistory\n      ),\n      success: result.success,\n    };\n\n    this.learningDatabase.contextualInsights.push(learningEntry);\n\n    if (this.learningDatabase.contextualInsights.length > 100) {\n      this.learningDatabase.contextualInsights.shift();\n    }\n\n    return learningEntry;\n  }\n\n  // Get learning statistics\n  getLearningStats() {\n    const insights = this.learningDatabase.contextualInsights;\n    if (insights.length === 0) return null;\n\n    const avgGuesses =\n      insights.reduce((sum, entry) => sum + entry.finalGuessCount, 0) /\n      insights.length;\n    const optimalGames = insights.filter(\n      (entry) => entry.efficiency === \"optimal\"\n    ).length;\n    const successRate =\n      insights.filter((entry) => entry.success).length / insights.length;\n\n    return {\n      totalGames: insights.length,\n      averageGuesses: avgGuesses.toFixed(1),\n      optimalGameRate:\n        ((optimalGames / insights.length) * 100).toFixed(1) + \"%\",\n      successRate: (successRate * 100).toFixed(1) + \"%\",\n      learningConfidence: Math.min(0.95, 0.5 + insights.length * 0.01),\n    };\n  }\n}\n","export class IntelligentPromptEngine {\n  constructor() {\n    this.promptCache = new Map();\n    this.successPatterns = new Map();\n    this.performanceMetrics = new Map();\n\n    this.confidenceMetrics = {\n      gamePhaseWeights: {\n        initial: { exploration: 0.7, certainty: 0.3 },\n        early: { exploration: 0.6, certainty: 0.4 },\n        middle: { exploration: 0.4, certainty: 0.6 },\n        late: { exploration: 0.2, certainty: 0.8 },\n        final: { exploration: 0.1, certainty: 0.9 },\n      },\n      strategyConfidence: {\n        binary_search: 0.9,\n        adaptive_exploration: 0.7,\n        random_guess: 0.4,\n        pattern_based: 0.8,\n        elimination: 0.85,\n        creative_approach: 0.6,\n        meta_strategy: 0.75,\n      },\n      contextFactors: {\n        rangeNarrowing: 0.3,\n        guessHistory: 0.25,\n        feedbackQuality: 0.2,\n        adaptationLevel: 0.15,\n        gamePhase: 0.1,\n      },\n    };\n\n    this.compactTemplates = {\n      microGuesser: \"R:{range} G:{guess} J:{json}\",\n      compactGuesser: \"Game R:{range} L:{last} S:{strategy} Next:{json}\",\n      microHider: \"Secret:{secret} Guess:{guess} Dir:{direction} Response:\",\n      compactHider: \"N:{secret} G:{guess}→{direction} + hint: {json}\",\n      intelligentGuesser:\n        \"NumGuess R:{range} Phase:{phase} Conf:{confidence} Strategy:{strategy} → {json}\",\n      contextualHider:\n        \"Hider S:{secret} G:{guess}→{direction} Context:{context} → {json}\",\n      learningGuesser:\n        \"Learn R:{range} History:{history} Pattern:{pattern} Next:{json}\",\n      adaptiveHider: \"Adapt Secret:{secret} Player:{profile} Response:{json}\",\n    };\n\n    this.intelligentSubstitutions = {\n      gameState: (gs) => `R:${gs.range.min}-${gs.range.max} G:${gs.guessCount}`,\n      strategy: (s) =>\n        ({\n          binary_search: \"Bin\",\n          adaptive_exploration: \"Adapt\",\n          random_guess: \"Rand\",\n          pattern_based: \"Pat\",\n          creative_approach: \"Creative\",\n          meta_strategy: \"Meta\",\n        }[s] || \"Std\"),\n      confidence: (c) => (c > 0.8 ? \"Hi\" : c > 0.6 ? \"Med\" : \"Lo\"),\n      phase: (p) =>\n        ({\n          initial: \"Init\",\n          early: \"Early\",\n          middle: \"Mid\",\n          late: \"Late\",\n          final: \"Final\",\n        }[p] || \"Unknown\"),\n      complexity: (c) => (c > 0.7 ? \"Complex\" : c > 0.4 ? \"Med\" : \"Simple\"),\n      learning: (l) => (l > 0.8 ? \"Expert\" : l > 0.5 ? \"Learn\" : \"Basic\"),\n    };\n\n    this.optimizationConfig = {\n      enableCaching: true,\n      maxCacheSize: 100,\n      adaptiveComplexity: true,\n      intelligentFallbacks: true,\n      performanceTracking: true,\n    };\n\n    this.qualityMetrics = {\n      tokenEfficiency: new Map(),\n      responseQuality: new Map(),\n      strategySuccess: new Map(),\n    };\n  }\n\n  buildGamePrompt(config) {\n    const { gameState, conversationHistory, learningData, type } = config;\n\n    try {\n      switch (type) {\n        case \"intelligent_guess\":\n          return this.generateGuesserPrompt(\n            gameState,\n            null,\n            conversationHistory,\n            learningData\n          );\n        case \"intelligent_feedback\":\n          return this.generateHiderPrompt(\n            gameState,\n            null,\n            conversationHistory,\n            learningData\n          );\n        case \"secret_selection\":\n          return this.buildEnhancedSecretPrompt(null, learningData);\n        default:\n          return this.generateGuesserPrompt(\n            gameState,\n            null,\n            conversationHistory,\n            learningData\n          );\n      }\n    } catch (error) {\n      console.warn(\"Prompt generation failed, using fallback:\", error.message);\n      return this.buildFallbackPrompt(config);\n    }\n  }\n\n  generateHiderPrompt(\n    gameState,\n    contextAnalysis,\n    conversationHistory,\n    learningData = null\n  ) {\n    const isSecretSelection = !gameState.secret;\n\n    if (isSecretSelection) {\n      return this.buildEnhancedSecretPrompt(contextAnalysis, learningData);\n    }\n\n    const enhancedContext = this.analyzeEnhancedContext(\n      gameState,\n      conversationHistory,\n      learningData\n    );\n    const contextualConfidence = this.calculateContextualConfidence(\n      gameState,\n      enhancedContext,\n      conversationHistory,\n      \"hider\"\n    );\n\n    return this.buildEnhancedFeedbackPrompt(\n      gameState,\n      enhancedContext,\n      contextualConfidence,\n      learningData\n    );\n  }\n\n  generateGuesserPrompt(\n    gameState,\n    contextAnalysis,\n    conversationHistory,\n    learningData = null\n  ) {\n    const enhancedContext = this.analyzeEnhancedContext(\n      gameState,\n      conversationHistory,\n      learningData\n    );\n    const complexity = this.assessEnhancedComplexity(\n      gameState,\n      enhancedContext,\n      learningData\n    );\n\n    if (this.optimizationConfig.enableCaching) {\n      const cached = this.checkPromptCache(gameState, complexity);\n      if (cached) {\n        this.recordCacheHit();\n        return cached;\n      }\n    }\n\n    let prompt;\n    if (complexity.level === \"simple\") {\n      prompt = this.buildMicroPrompt(gameState, complexity);\n    } else if (complexity.level === \"medium\") {\n      prompt = this.buildCompactPrompt(gameState, enhancedContext, complexity);\n    } else {\n      prompt = this.buildFullPrompt(\n        gameState,\n        enhancedContext,\n        conversationHistory,\n        complexity,\n        learningData\n      );\n    }\n\n    if (this.optimizationConfig.enableCaching) {\n      this.storePromptCache(gameState, complexity, prompt);\n    }\n\n    return prompt;\n  }\n\n  analyzeEnhancedContext(gameState, conversationHistory, learningData) {\n    const context = {\n      gamePhase: this.determineGamePhase(gameState),\n      rangeEfficiency: this.calculateRangeEfficiency(gameState),\n      guessPattern: this.analyzeGuessPattern(gameState),\n      learningInsights: this.extractLearningInsights(learningData),\n      playerBehavior: this.analyzePlayerBehavior(conversationHistory),\n      strategicRecommendation: this.generateStrategicRecommendation(\n        gameState,\n        learningData\n      ),\n    };\n\n    return context;\n  }\n\n  assessEnhancedComplexity(gameState, enhancedContext, learningData) {\n    const factors = {\n      rangeSize: gameState.range.max - gameState.range.min + 1,\n      guessCount: gameState.guessCount || 0,\n      strategyType:\n        enhancedContext?.strategicRecommendation?.strategy || \"unknown\",\n      adaptation: enhancedContext?.playerBehavior?.adaptationLevel || 0.5,\n    };\n\n    const enhancedFactors = {\n      ...factors,\n      learningDepth: learningData?.gameHistory?.length || 0,\n      contextRichness: this.calculateContextRichness(enhancedContext),\n      playerSophistication:\n        enhancedContext?.playerBehavior?.sophistication || 0.5,\n      gamePhaseIntensity: this.getGamePhaseIntensity(enhancedContext.gamePhase),\n    };\n\n    let complexity = 0;\n\n    if (enhancedFactors.rangeSize > 50) complexity += 0.3;\n    if (enhancedFactors.guessCount > 5) complexity += 0.2;\n    if (enhancedFactors.strategyType === \"adaptive\") complexity += 0.3;\n    if (enhancedFactors.adaptation > 0.7) complexity += 0.2;\n\n    if (enhancedFactors.learningDepth > 5) complexity += 0.2;\n    if (enhancedFactors.contextRichness > 0.7) complexity += 0.15;\n    if (enhancedFactors.playerSophistication > 0.8) complexity += 0.1;\n    if (enhancedFactors.gamePhaseIntensity > 0.8) complexity += 0.1;\n\n    return {\n      level:\n        complexity < 0.3 ? \"simple\" : complexity < 0.7 ? \"medium\" : \"complex\",\n      score: complexity,\n      factors: enhancedFactors,\n      tokenBudget: this.calculateOptimalTokenBudget(\n        complexity,\n        enhancedFactors\n      ),\n      cacheKey: this.generateCacheKey(gameState, enhancedFactors),\n    };\n  }\n\n  calculateOptimalTokenBudget(complexity, factors) {\n    let budget = complexity < 0.3 ? 60 : complexity < 0.7 ? 100 : 150;\n\n    if (factors.learningDepth > 10) budget += 20;\n    if (factors.playerSophistication > 0.8) budget += 15;\n\n    return Math.min(200, budget);\n  }\n\n  buildMicroPrompt(gameState, complexity) {\n    const { min, max } = gameState.range;\n    const size = max - min + 1;\n    const phase = this.determineGamePhase(gameState);\n\n    return `${phase} R:${min}-${max}(${size}) Smart guess JSON: {guess:N,reason:\"brief\",conf:0.8}`;\n  }\n\n  buildCompactPrompt(gameState, enhancedContext, complexity) {\n    const { min, max } = gameState.range;\n    const strategy =\n      enhancedContext?.strategicRecommendation?.strategy || \"binary\";\n    const lastGuess = gameState.guessHistory?.slice(-1)[0] || \"none\";\n    const confidence =\n      enhancedContext?.strategicRecommendation?.confidence || 0.7;\n\n    return `NumGuess R:${min}-${max} Last:${lastGuess} Strategy:${strategy} Conf:${confidence}\n  Optimal: {guess:N,reason:\"strategic\",conf:${confidence.toFixed(1)}}`;\n  }\n\n  buildFullPrompt(\n    gameState,\n    enhancedContext,\n    conversationHistory,\n    complexity,\n    learningData\n  ) {\n    const contextualConfidence = this.calculateContextualConfidence(\n      gameState,\n      enhancedContext,\n      conversationHistory,\n      \"guesser\"\n    );\n\n    const recentFeedback = this.extractRecentFeedback(conversationHistory);\n    const strategicGuidance = this.generateEnhancedStrategicGuidance(\n      gameState,\n      enhancedContext,\n      contextualConfidence,\n      learningData\n    );\n\n    return this.buildEnhancedGuesserPrompt(\n      gameState,\n      enhancedContext,\n      recentFeedback,\n      strategicGuidance,\n      contextualConfidence,\n      complexity\n    );\n  }\n\n  generateEnhancedStrategicGuidance(\n    gameState,\n    enhancedContext,\n    contextualConfidence,\n    learningData\n  ) {\n    const baseGuidance =\n      enhancedContext?.strategicRecommendation?.reasoning ||\n      \"Optimal binary search\";\n    const confidenceLevel = contextualConfidence.value;\n    const gamePhase = enhancedContext.gamePhase;\n    const learningInsight =\n      enhancedContext.learningInsights?.primaryPattern || \"none\";\n\n    let guidance = baseGuidance;\n\n    if (confidenceLevel > 0.8) {\n      guidance += \" + Hi conf: decisive action\";\n    } else if (confidenceLevel > 0.6) {\n      guidance += \" + Med conf: balanced approach\";\n    } else {\n      guidance += \" + Lo conf: exploratory move\";\n    }\n\n    if (gamePhase === \"final\") {\n      guidance += \" + Final phase: precision required\";\n    } else if (gamePhase === \"late\") {\n      guidance += \" + Late game: strategic focus\";\n    }\n\n    if (learningInsight !== \"none\") {\n      guidance += ` + Learning: ${learningInsight}`;\n    }\n\n    return guidance;\n  }\n\n  buildEnhancedGuesserPrompt(\n    gameState,\n    enhancedContext,\n    recentFeedback,\n    strategicGuidance,\n    contextualConfidence,\n    complexity\n  ) {\n    const optimalGuess = Math.floor(\n      (gameState.range.min + gameState.range.max) / 2\n    );\n\n    return `ENHANCED GUESSER SYSTEM\n  ============================\n  \n  GAME STATE:\n  • Range: [${gameState.range.min}, ${gameState.range.max}] (${\n      gameState.range.max - gameState.range.min + 1\n    } numbers)\n  • Count: ${gameState.guessCount}/${gameState.maxGuesses}\n  • Phase: ${enhancedContext.gamePhase.toUpperCase()}\n  • History: ${JSON.stringify(gameState.guessHistory?.slice(-3) || [])}\n  \n  INTELLIGENCE ANALYSIS:\n  • Recent: ${recentFeedback}\n  • Strategy: ${strategicGuidance}\n  • Confidence: ${contextualConfidence.value} (${\n      contextualConfidence.reasoning\n    })\n  • Complexity: ${complexity.level} (${complexity.score.toFixed(2)})\n  \n  LEARNING INSIGHTS:\n  ${\n    enhancedContext.learningInsights\n      ? `• Pattern: ${enhancedContext.learningInsights.primaryPattern}\n  • Recommendation: ${enhancedContext.learningInsights.recommendation}`\n      : \"• No learning data available\"\n  }\n  \n  OPTIMAL CHOICE: ${optimalGuess}\n  \n  Response Format:\n  {\n    \"guess\": ${optimalGuess},\n    \"message\": \"Based on enhanced analysis, I choose ${optimalGuess}\",\n    \"reasoning\": \"${strategicGuidance}\",\n    \"confidence\": ${contextualConfidence.value},\n    \"strategy\": \"${\n      enhancedContext?.strategicRecommendation?.strategy || \"enhanced_binary\"\n    }\"\n  }`;\n  }\n\n  buildEnhancedSecretPrompt(contextAnalysis, learningData) {\n    const learningInsights = this.extractLearningInsights(learningData);\n    const difficulty = learningInsights?.recommendedDifficulty || 0.6;\n\n    return `ENHANCED HIDER SYSTEM - SECRET SELECTION\n  ==========================================\n  \n  LEARNING ANALYSIS:\n  ${\n    learningData\n      ? `• Previous games: ${learningData.gameHistory?.length || 0}\n  • Player skill pattern: ${learningInsights?.playerSkillLevel || \"unknown\"}\n  • Recommended difficulty: ${difficulty}`\n      : \"• No learning data - selecting balanced difficulty\"\n  }\n  \n  STRATEGIC OBJECTIVES:\n  • Create engaging challenge\n  • Balance difficulty with fairness\n  • Apply learned patterns\n  \n  Response Format:\n  {\n    \"number\": <strategic_choice_1_to_100>,\n    \"message\": \"I have chosen a number between 1 and 100. Good luck!\",\n    \"reasoning\": \"Strategic selection based on analysis\",\n    \"difficulty\": ${difficulty},\n    \"confidence\": 0.8\n  }`;\n  }\n\n  buildEnhancedFeedbackPrompt(\n    gameState,\n    enhancedContext,\n    contextualConfidence,\n    learningData\n  ) {\n    const direction =\n      gameState.lastGuess < gameState.secret ? \"higher\" : \"lower\";\n    const distance = Math.abs(gameState.lastGuess - gameState.secret);\n    const proximity =\n      distance <= 5 ? \"very close\" : distance <= 15 ? \"close\" : \"moderate\";\n\n    return `ENHANCED HIDER FEEDBACK SYSTEM\n  ==================================\n  \n  GAME STATE:\n  • Secret: ${gameState.secret}\n  • Guess: ${gameState.lastGuess}\n  • Direction: ${direction.toUpperCase()}\n  • Distance: ${distance} (${proximity})\n  • Context: ${enhancedContext?.playerBehavior?.recentPattern || \"analyzing\"}\n  \n  FEEDBACK STRATEGY:\n  • Confidence: ${contextualConfidence.value}\n  • Engagement level: ${\n    enhancedContext?.playerBehavior?.engagementLevel || \"moderate\"\n  }\n  \n  Response Format:\n  {\n    \"message\": \"The number is ${direction} than ${gameState.lastGuess}${\n      proximity === \"very close\"\n        ? \". You're getting very close!\"\n        : proximity === \"close\"\n        ? \". You're getting warmer!\"\n        : \".\"\n    }\",\n    \"direction\": \"${direction}\",\n    \"intent\": \"Clear guidance with appropriate encouragement\",\n    \"confidence\": ${contextualConfidence.value}\n  }`;\n  }\n\n  checkPromptCache(gameState, complexity) {\n    if (!this.optimizationConfig.enableCaching) return null;\n\n    const cacheKey = complexity.cacheKey;\n    return this.promptCache.get(cacheKey) || null;\n  }\n\n  storePromptCache(gameState, complexity, prompt) {\n    if (!this.optimizationConfig.enableCaching) return;\n\n    const cacheKey = complexity.cacheKey;\n    this.promptCache.set(cacheKey, prompt);\n\n    if (this.promptCache.size > this.optimizationConfig.maxCacheSize) {\n      const firstKey = this.promptCache.keys().next().value;\n      this.promptCache.delete(firstKey);\n    }\n  }\n\n  generateCacheKey(gameState, factors) {\n    return `${gameState.range.min}-${gameState.range.max}_${gameState.guessCount}_${factors.rangeSize}_${factors.learningDepth}`;\n  }\n\n  recordCacheHit() {\n    const hits = this.performanceMetrics.get(\"cacheHits\") || 0;\n    this.performanceMetrics.set(\"cacheHits\", hits + 1);\n  }\n\n  determineGamePhase(gameState) {\n    const guessCount = gameState.guessCount || 0;\n    const maxGuesses = gameState.maxGuesses || 15;\n    const progress = guessCount / maxGuesses;\n    const rangeSize = gameState.range.max - gameState.range.min + 1;\n\n    if (guessCount === 0) return \"initial\";\n    if (progress <= 0.25 || rangeSize > 50) return \"early\";\n    if (progress <= 0.6 || rangeSize > 10) return \"middle\";\n    if (progress <= 0.85 || rangeSize > 3) return \"late\";\n    return \"final\";\n  }\n\n  calculateRangeEfficiency(gameState) {\n    const initialRange = 100;\n    const currentRange = gameState.range.max - gameState.range.min + 1;\n    return 1 - currentRange / initialRange;\n  }\n\n  analyzeGuessPattern(gameState) {\n    if (!gameState.guessHistory || gameState.guessHistory.length < 2) {\n      return { pattern: \"insufficient_data\", consistency: 0.5 };\n    }\n\n    const guesses = gameState.guessHistory;\n    const differences = [];\n\n    for (let i = 1; i < guesses.length; i++) {\n      differences.push(Math.abs(guesses[i] - guesses[i - 1]));\n    }\n\n    const avgDifference =\n      differences.reduce((a, b) => a + b, 0) / differences.length;\n\n    if (avgDifference > 30)\n      return { pattern: \"broad_search\", consistency: 0.7 };\n    if (avgDifference > 15)\n      return { pattern: \"moderate_search\", consistency: 0.8 };\n    if (avgDifference > 5)\n      return { pattern: \"focused_search\", consistency: 0.9 };\n    return { pattern: \"precise_search\", consistency: 0.95 };\n  }\n\n  extractLearningInsights(learningData) {\n    if (\n      !learningData ||\n      !learningData.gameHistory ||\n      learningData.gameHistory.length === 0\n    ) {\n      return {\n        primaryPattern: \"none\",\n        recommendation: \"use_standard_approach\",\n        recommendedDifficulty: 0.6,\n      };\n    }\n\n    const games = learningData.gameHistory;\n    const avgGuesses =\n      games.reduce((sum, game) => sum + (game.guessCount || 7), 0) /\n      games.length;\n\n    const playerSkillLevel =\n      avgGuesses <= 6\n        ? \"expert\"\n        : avgGuesses <= 8\n        ? \"intermediate\"\n        : \"beginner\";\n    const recommendedDifficulty =\n      playerSkillLevel === \"expert\"\n        ? 0.8\n        : playerSkillLevel === \"intermediate\"\n        ? 0.6\n        : 0.4;\n\n    return {\n      primaryPattern: `avg_${avgGuesses.toFixed(1)}_guesses`,\n      recommendation: `adapt_to_${playerSkillLevel}`,\n      playerSkillLevel,\n      recommendedDifficulty,\n      gamesAnalyzed: games.length,\n    };\n  }\n\n  analyzePlayerBehavior(conversationHistory) {\n    if (!conversationHistory || conversationHistory.length === 0) {\n      return {\n        sophistication: 0.5,\n        engagementLevel: \"moderate\",\n        adaptationLevel: 0.5,\n      };\n    }\n\n    const recentMessages = conversationHistory.slice(-5);\n    let sophistication = 0.5;\n    let engagementLevel = \"moderate\";\n\n    const hasComplexReasoning = recentMessages.some(\n      (msg) => msg.metadata?.reasoning && msg.metadata.reasoning.length > 20\n    );\n\n    if (hasComplexReasoning) sophistication += 0.2;\n\n    const hasAdaptiveStrategy = recentMessages.some(\n      (msg) =>\n        msg.metadata?.strategy && msg.metadata.strategy.includes(\"adaptive\")\n    );\n\n    if (hasAdaptiveStrategy) sophistication += 0.15;\n\n    engagementLevel =\n      sophistication > 0.7 ? \"high\" : sophistication > 0.4 ? \"moderate\" : \"low\";\n\n    return {\n      sophistication: Math.min(1.0, sophistication),\n      engagementLevel,\n      adaptationLevel: sophistication,\n      recentPattern: hasAdaptiveStrategy ? \"adaptive\" : \"standard\",\n    };\n  }\n\n  generateStrategicRecommendation(gameState, learningData) {\n    const rangeSize = gameState.range.max - gameState.range.min + 1;\n    const learningInsights = this.extractLearningInsights(learningData);\n\n    let strategy = \"binary_search\";\n    let confidence = 0.8;\n    let reasoning = \"Standard binary search approach\";\n\n    if (rangeSize <= 5) {\n      strategy = \"elimination\";\n      confidence = 0.9;\n      reasoning = \"Small range - use elimination strategy\";\n    } else if (rangeSize > 50) {\n      strategy = \"adaptive_exploration\";\n      confidence = 0.75;\n      reasoning = \"Large range - use adaptive exploration\";\n    }\n\n    if (learningInsights.playerSkillLevel === \"expert\") {\n      strategy = \"meta_strategy\";\n      confidence = 0.85;\n      reasoning = \"Expert player detected - use meta-strategy\";\n    } else if (learningInsights.playerSkillLevel === \"beginner\") {\n      strategy = \"binary_search\";\n      confidence = 0.9;\n      reasoning = \"Beginner player - maintain standard approach\";\n    }\n\n    return { strategy, confidence, reasoning };\n  }\n\n  calculateContextRichness(enhancedContext) {\n    let richness = 0.3;\n\n    if (enhancedContext.learningInsights?.gamesAnalyzed > 0) richness += 0.2;\n    if (enhancedContext.playerBehavior?.sophistication > 0.6) richness += 0.2;\n    if (enhancedContext.strategicRecommendation?.confidence > 0.8)\n      richness += 0.15;\n    if (enhancedContext.guessPattern?.consistency > 0.8) richness += 0.15;\n\n    return Math.min(1.0, richness);\n  }\n\n  getGamePhaseIntensity(phase) {\n    const intensityMap = {\n      initial: 0.3,\n      early: 0.4,\n      middle: 0.6,\n      late: 0.8,\n      final: 1.0,\n    };\n    return intensityMap[phase] || 0.5;\n  }\n\n  buildFallbackPrompt(config) {\n    const { gameState, type } = config;\n\n    if (type === \"intelligent_feedback\" || (gameState && gameState.secret)) {\n      const direction =\n        gameState.lastGuess < gameState.secret ? \"higher\" : \"lower\";\n      return `Fallback: The number is ${direction} than ${gameState.lastGuess}. {message:\"${direction} than ${gameState.lastGuess}\",direction:\"${direction}\"}`;\n    }\n\n    const optimalGuess = gameState\n      ? Math.floor((gameState.range.min + gameState.range.max) / 2)\n      : 50;\n    return `Fallback guess: {guess:${optimalGuess},reason:\"fallback binary search\",confidence:0.7}`;\n  }\n\n  getCacheStats() {\n    return {\n      cacheSize: this.promptCache.size,\n      cacheHits: this.performanceMetrics.get(\"cacheHits\") || 0,\n      successPatterns: this.successPatterns.size,\n      confidenceMetrics: \"enhanced\",\n      performanceMetrics: Object.fromEntries(this.performanceMetrics),\n    };\n  }\n\n  recordPromptUsage(prompt, result) {\n    const usage = {\n      timestamp: Date.now(),\n      promptLength: prompt.length,\n      success: result ? true : false,\n      promptType: this.detectPromptType(prompt),\n    };\n\n    const usageHistory = this.performanceMetrics.get(\"usageHistory\") || [];\n    usageHistory.push(usage);\n\n    if (usageHistory.length > 100) {\n      usageHistory.shift();\n    }\n\n    this.performanceMetrics.set(\"usageHistory\", usageHistory);\n  }\n\n  detectPromptType(prompt) {\n    if (prompt.includes(\"ENHANCED GUESSER\")) return \"enhanced_guesser\";\n    if (prompt.includes(\"ENHANCED HIDER\")) return \"enhanced_hider\";\n    if (prompt.includes(\"Range:\") && prompt.length < 100) return \"micro\";\n    if (prompt.includes(\"NumGuess\") && prompt.length < 200) return \"compact\";\n    return \"full\";\n  }\n\n  getEngineStats() {\n    const usageHistory = this.performanceMetrics.get(\"usageHistory\") || [];\n\n    return {\n      promptsGenerated: usageHistory.length,\n      successRate:\n        usageHistory.length > 0\n          ? (\n              (usageHistory.filter((u) => u.success).length /\n                usageHistory.length) *\n              100\n            ).toFixed(1) + \"%\"\n          : \"0%\",\n      cacheHitRate:\n        this.promptCache.size > 0\n          ? (\n              ((this.performanceMetrics.get(\"cacheHits\") || 0) /\n                this.promptCache.size) *\n              100\n            ).toFixed(1) + \"%\"\n          : \"0%\",\n      averagePromptLength:\n        usageHistory.length > 0\n          ? (\n              usageHistory.reduce((sum, u) => sum + u.promptLength, 0) /\n              usageHistory.length\n            ).toFixed(0)\n          : \"0\",\n    };\n  }\n\n  reset() {\n    this.promptCache.clear();\n    this.successPatterns.clear();\n    this.performanceMetrics.clear();\n    console.log(\"Enhanced Prompt Engine reset completed\");\n  }\n\n  // Placeholder methods that might be called by other parts of the system\n  calculateContextualConfidence(gameState, context, history, role) {\n    const baseConfidence = 0.7;\n    const phaseMultiplier =\n      this.confidenceMetrics.gamePhaseWeights[context.gamePhase]?.certainty ||\n      0.6;\n\n    return {\n      value: Math.min(0.95, baseConfidence * phaseMultiplier),\n      reasoning: `${role} confidence based on ${context.gamePhase} phase`,\n    };\n  }\n\n  extractRecentFeedback(conversationHistory) {\n    if (!conversationHistory || conversationHistory.length === 0) {\n      return \"No recent feedback available\";\n    }\n\n    const recentMessages = conversationHistory.slice(-2);\n    return recentMessages\n      .map((msg) => msg.message || msg.content || \"\")\n      .join(\" | \");\n  }\n}\n","import { IntelligentContextAnalyzer } from \"./context-analyzer\";\nimport { AdvancedIntelligentPromptSystem } from \"./advanced-prompt-system\";\nimport { IntelligentPromptEngine } from \"../engines/prompt-engine\";\n\nexport { IntelligentContextAnalyzer } from \"./context-analyzer\";\nexport { IntelligentPromptEngine } from \"../engines/prompt-engine\";\n\nexport class PureLLMGameManager {\n  constructor(config = {}) {\n    this.config = {\n      apiToken: config.apiToken || \"\",\n      baseUrl: \"https://generativelanguage.googleapis.com\",\n      model: config.model || \"gemini-2.5-flash-preview-05-20\",\n      temperature: 0.2,\n      maxTokens: config.maxTokens || 8192,\n    };\n\n    // Intelligent systems - Token optimization architecture\n    this.contextAnalyzer = new IntelligentContextAnalyzer();\n    this.promptEngine = new IntelligentPromptEngine();\n    this.advancedPromptSystem = new AdvancedIntelligentPromptSystem();\n\n    // Optimization config - Focus on token efficiency and API intelligence\n    this.optimizationConfig = {\n      useTokenOptimization: true,\n      enableAPIIntelligence: true,\n      enableSmartCaching: true,\n      singleCallPerRole: true,\n    };\n\n    this.gameState = null;\n    this.conversationHistory = [];\n    this.gameMetrics = { totalGames: 0, avgIntelligence: 0.7 };\n\n    this.learningConfig = {\n      enableAdvancedLearning: true,\n      learningThreshold: 1,\n      adaptiveStrategy: true,\n      contextualMemory: 10,\n      forceAdvancedPrompts: true,\n      optimizePromptGeneration: true,\n    };\n\n    this.efficientConfig = {\n      gameLoopInterval: 10000,\n      minInterval: 6000,\n      maxRetries: 2,\n      emergencyDelay: 15000,\n    };\n\n    this.apiOptimizer = {\n      lastCallTime: 0,\n      totalCalls: 0,\n      successfulCalls: 0,\n      rateLimitErrors: 0,\n      guesserCalls: 0,\n      hiderCalls: 0,\n      staticResponsesUsed: 0,\n      tokenOptimizationsUsed: 0,\n      cachedResponsesUsed: 0,\n    };\n\n    this.contextCache = new Map();\n    this.responseCache = new Map();\n    this.maxContextHistory = 3;\n  }\n\n  // Optimized Guesser - Local preprocessing + API analysis\n  async executeOptimizedGuesserMove(learningData = null) {\n    console.log(\"Executing OPTIMIZED guesser move...\");\n\n    try {\n      const preprocessedData = this.preprocessContextForAPI();\n      const optimizedPrompt = this.buildTokenOptimizedGuesserPrompt(\n        preprocessedData,\n        learningData\n      );\n\n      const response = await this.callLLM(optimizedPrompt, {\n        analysisType: \"IntelligentGuessingWithAnalysis\",\n      });\n\n      const result = this.parseAdvancedJSON(response);\n\n      if (this.validateAdvancedIntelligence(result)) {\n        this.apiOptimizer.guesserCalls++;\n        this.apiOptimizer.tokenOptimizationsUsed++;\n        return this.formatAdvancedResult(result);\n      } else {\n        return this.generateIntelligentFallback();\n      }\n    } catch (error) {\n      console.warn(\"Optimized guesser move failed:\", error.message);\n      return this.generateIntelligentFallback();\n    }\n  }\n\n  // Local preprocessing - Compress context info, reduce tokens\n  preprocessContextForAPI() {\n    const { min, max } = this.gameState.range;\n    const rangeSize = max - min + 1;\n\n    const phase = this.determineGamePhase();\n    const phaseCode =\n      {\n        initial: \"INIT\",\n        early: \"EARLY\",\n        middle: \"MID\",\n        late: \"LATE\",\n        final: \"FINAL\",\n      }[phase] || \"MID\";\n\n    const recentFeedback = this.extractKeyFeedbackSignals();\n    const compressedHistory = this.compressGuessHistory();\n    const optimalGuess = Math.floor((min + max) / 2);\n    const patternFlags = this.identifyQuickPatterns();\n\n    return {\n      range: `${min}-${max}`,\n      size: rangeSize,\n      optimal: optimalGuess,\n      phase: phaseCode,\n      turn: this.gameState.guessCount + 1,\n      feedback: recentFeedback,\n      history: compressedHistory,\n      patterns: patternFlags,\n      suggestions: this.generatePrecomputedSuggestions(\n        min,\n        max,\n        rangeSize,\n        phase\n      ),\n    };\n  }\n\n  // Extract key feedback signals\n  extractKeyFeedbackSignals() {\n    const recent = this.conversationHistory\n      .slice(-2)\n      .filter((h) => h.agent === \"Hider\")\n      .map((h) => h.message);\n\n    if (recent.length === 0) return \"NONE\";\n\n    const feedback = recent.join(\" \").toLowerCase();\n\n    if (feedback.includes(\"incredibly close\") || feedback.includes(\"breathing\"))\n      return \"VERY_CLOSE\";\n    if (feedback.includes(\"very close\")) return \"V_CLOSE\";\n    if (feedback.includes(\"close\") || feedback.includes(\"warm\")) return \"CLOSE\";\n    if (feedback.includes(\"getting\") && feedback.includes(\"warm\"))\n      return \"WARMING\";\n    if (feedback.includes(\"far\") || feedback.includes(\"cold\")) return \"FAR\";\n\n    return \"DIRECTIONAL\";\n  }\n\n  // Compress guess history\n  compressGuessHistory() {\n    const history = this.gameState.guessHistory || [];\n    if (history.length === 0) return \"NONE\";\n\n    const recent = history.slice(-3);\n    const pattern = this.detectHistoryPattern(history);\n\n    return {\n      recent: recent.join(\",\"),\n      pattern: pattern,\n      count: history.length,\n    };\n  }\n\n  // Quick pattern identification\n  identifyQuickPatterns() {\n    const flags = [];\n    const { min, max } = this.gameState.range;\n\n    if (max - min + 1 <= 5) flags.push(\"TINY\");\n    if (max - min + 1 <= 15) flags.push(\"SMALL\");\n    if (min <= 10 || max >= 90) flags.push(\"EDGE\");\n    if (this.gameState.guessCount > 8) flags.push(\"BEHIND\");\n    if (this.gameState.guessCount <= 5) flags.push(\"EFFICIENT\");\n\n    return flags.join(\"|\") || \"NORMAL\";\n  }\n\n  // Precomputed suggestions\n  generatePrecomputedSuggestions(min, max, rangeSize, phase) {\n    const optimal = Math.floor((min + max) / 2);\n    const suggestions = [`OPT:${optimal}`];\n\n    if (phase === \"FINAL\" && rangeSize <= 3) {\n      for (let i = min; i <= max; i++) {\n        suggestions.push(`OPT:${i}`);\n      }\n    } else if (rangeSize <= 10) {\n      const quarter = Math.floor(rangeSize / 4);\n      suggestions.push(`ALT1:${min + quarter}`);\n      suggestions.push(`ALT2:${max - quarter}`);\n    }\n\n    return suggestions.join(\",\");\n  }\n\n  // Detect history pattern\n  detectHistoryPattern(history) {\n    if (history.length < 2) return \"NONE\";\n\n    const diffs = [];\n    for (let i = 1; i < history.length; i++) {\n      diffs.push(Math.abs(history[i] - history[i - 1]));\n    }\n\n    const avgDiff = diffs.reduce((a, b) => a + b, 0) / diffs.length;\n\n    if (avgDiff > 30) return \"BROAD\";\n    if (avgDiff > 15) return \"MEDIUM\";\n    if (avgDiff > 5) return \"NARROW\";\n    return \"PRECISE\";\n  }\n\n  // Build token-optimized guesser prompt\n  buildTokenOptimizedGuesserPrompt(preprocessed, learningData) {\n    const {\n      range,\n      size,\n      optimal,\n      phase,\n      turn,\n      feedback,\n      history,\n      patterns,\n      suggestions,\n    } = preprocessed;\n\n    const learningCompressed = this.compressLearningData(learningData);\n\n    return `INTELLIGENT NUMBER GUESSER\n===========================\n\nGAME: ${range} (${size}n) T${turn} ${phase}\nOPTIMAL: ${optimal}\nFEEDBACK: ${feedback}\nHISTORY: ${history.recent || \"NONE\"} (${history.pattern})\nPATTERNS: ${patterns}\nSUGGESTIONS: ${suggestions}\n\n${learningCompressed ? `LEARNING: ${learningCompressed}` : \"\"}\n\nANALYSIS TASKS:\n1. Analyze current situation and proximity signals\n2. Consider game phase and efficiency requirements  \n3. Evaluate historical patterns and feedback quality\n4. Choose optimal strategy: binary_search/precision_targeting/adaptive/final_choice\n5. Make intelligent guess with reasoning\n\nYour task is to perform intelligent analysis and make the best guess.\nConsider proximity signals, game efficiency, and strategic adaptation.\n\nRESPONSE:\n{\n  \"analysis\": \"brief_situational_analysis\",\n  \"strategy\": \"chosen_strategy_type\", \n  \"guess\": your_intelligent_choice,\n  \"reasoning\": \"why_this_choice\",\n  \"confidence\": 0.85\n}`;\n  }\n\n  // Compress learning data\n  compressLearningData(learningData) {\n    if (!learningData?.gameHistory?.length) return null;\n\n    const games = learningData.gameHistory.length;\n    const avgGuesses = (\n      learningData.gameHistory.reduce(\n        (sum, g) => sum + (g.guessCount || 7),\n        0\n      ) / games\n    ).toFixed(1);\n    const skill =\n      avgGuesses <= 6 ? \"EXPERT\" : avgGuesses <= 8 ? \"INTER\" : \"BEGIN\";\n\n    return `${games}G/${avgGuesses}avg/${skill}`;\n  }\n\n  // Optimized Hider - Local preprocessing + API response\n  async executeOptimizedHiderResponse(guess, learningData = null) {\n    console.log(\"Executing OPTIMIZED hider response...\");\n\n    if (guess === this.gameState.secret) {\n      return this.generateStaticVictoryMessage();\n    }\n\n    try {\n      const preprocessedData = this.preprocessHiderContextForAPI(guess);\n      const optimizedPrompt = this.buildTokenOptimizedHiderPrompt(\n        preprocessedData,\n        learningData\n      );\n\n      const response = await this.callLLM(optimizedPrompt, {\n        analysisType: \"IntelligentHiderWithAnalysis\",\n      });\n\n      const result = this.parseHiderJSON(response);\n\n      if (this.validateHiderResponse(result, guess)) {\n        this.apiOptimizer.hiderCalls++;\n        this.apiOptimizer.tokenOptimizationsUsed++;\n        return this.formatHiderResult(\n          result,\n          guess,\n          preprocessedData.direction\n        );\n      } else {\n        return this.generateHiderFallback(guess, preprocessedData.direction);\n      }\n    } catch (error) {\n      console.warn(\"Optimized hider response failed:\", error.message);\n      const direction = guess < this.gameState.secret ? \"higher\" : \"lower\";\n      return this.generateHiderFallback(guess, direction);\n    }\n  }\n\n  // Hider local preprocessing\n  preprocessHiderContextForAPI(guess) {\n    const secret = this.gameState.secret;\n    const direction = guess < secret ? \"higher\" : \"lower\";\n    const distance = Math.abs(guess - secret);\n    const turn = this.gameState.guessCount;\n\n    let proximityCode;\n    if (distance <= 3) proximityCode = \"VERY_CLOSE\";\n    else if (distance <= 7) proximityCode = \"CLOSE\";\n    else if (distance <= 15) proximityCode = \"MODERATE\";\n    else if (distance <= 30) proximityCode = \"FAR\";\n    else proximityCode = \"VERY_FAR\";\n\n    const progressCode =\n      turn <= 3\n        ? \"EARLY\"\n        : turn <= 7\n        ? \"MID\"\n        : turn <= 10\n        ? \"LATE\"\n        : \"EXTENDED\";\n\n    const performancePattern = this.analyzePlayerPerformancePattern();\n\n    return {\n      guess,\n      direction: direction.toUpperCase(),\n      distance,\n      proximity: proximityCode,\n      turn,\n      progress: progressCode,\n      performance: performancePattern,\n    };\n  }\n\n  // Analyze player performance pattern\n  analyzePlayerPerformancePattern() {\n    const history = this.gameState.guessHistory || [];\n    if (history.length < 2) return \"NEW_PLAYER\";\n\n    const patterns = this.detectMultiplePatterns(history);\n\n    if (patterns.systematic && patterns.efficient) {\n      return \"SYSTEMATIC_EFFICIENT\";\n    } else if (patterns.systematic) {\n      return \"SYSTEMATIC_LEARNER\";\n    } else if (patterns.efficient) {\n      return \"INTUITIVE_EFFICIENT\";\n    } else if (patterns.random) {\n      return \"RANDOM_GUESSER\";\n    } else if (patterns.conservative) {\n      return \"CAUTIOUS_PLAYER\";\n    } else if (patterns.aggressive) {\n      return \"AGGRESSIVE_PLAYER\";\n    } else {\n      return \"ADAPTIVE_PLAYER\";\n    }\n  }\n\n  detectMultiplePatterns(history) {\n    return {\n      systematic: this.isSystematicApproach(history),\n      efficient: this.isEfficientStrategy(history),\n      random: this.isRandomStrategy(history),\n      conservative: this.isConservativeStrategy(history),\n      aggressive: this.isAggressiveStrategy(history),\n    };\n  }\n\n  isSystematicApproach(history) {\n    let expectedRange = { min: 1, max: 100 };\n    let systematicSteps = 0;\n\n    for (let i = 0; i < history.length - 1; i++) {\n      const guess = history[i];\n      const rangeSize = expectedRange.max - expectedRange.min + 1;\n\n      if (guess >= expectedRange.min && guess <= expectedRange.max) {\n        const mid = (expectedRange.min + expectedRange.max) / 2;\n        const quarterRange = rangeSize / 4;\n\n        if (Math.abs(guess - mid) <= quarterRange) {\n          systematicSteps++;\n        }\n      }\n\n      if (guess < this.gameState.secret) {\n        expectedRange.min = guess + 1;\n      } else {\n        expectedRange.max = guess - 1;\n      }\n    }\n\n    return systematicSteps / (history.length - 1) > 0.6;\n  }\n\n  isEfficientStrategy(history) {\n    const actualGuesses = history.length;\n    const theoreticalOptimal = Math.ceil(Math.log2(100));\n\n    return actualGuesses <= theoreticalOptimal * 1.5;\n  }\n\n  isRandomStrategy(history) {\n    if (history.length < 3) return false;\n\n    const distances = [];\n    for (let i = 1; i < history.length; i++) {\n      distances.push(Math.abs(history[i] - history[i - 1]));\n    }\n\n    const avgDistance = distances.reduce((a, b) => a + b, 0) / distances.length;\n    const variance =\n      distances.reduce((sum, d) => sum + Math.pow(d - avgDistance, 2), 0) /\n      distances.length;\n\n    return variance > 400 && avgDistance > 20;\n  }\n\n  isConservativeStrategy(history) {\n    if (history.length < 3) return false;\n\n    let smallSteps = 0;\n    for (let i = 1; i < history.length; i++) {\n      if (Math.abs(history[i] - history[i - 1]) <= 5) {\n        smallSteps++;\n      }\n    }\n\n    return smallSteps / (history.length - 1) > 0.7;\n  }\n\n  isAggressiveStrategy(history) {\n    if (history.length < 3) return false;\n\n    let bigJumps = 0;\n    for (let i = 1; i < history.length; i++) {\n      if (Math.abs(history[i] - history[i - 1]) > 25) {\n        bigJumps++;\n      }\n    }\n\n    return bigJumps / (history.length - 1) > 0.5;\n  }\n\n  // Build token-optimized hider prompt\n  buildTokenOptimizedHiderPrompt(preprocessed, learningData) {\n    const { guess, direction, proximity, turn, progress, performance } =\n      preprocessed;\n\n    const learningCompressed = this.compressLearningData(learningData);\n\n    return `INTELLIGENT HIDER RESPONSE\n==========================\n\nSITUATION: G${guess} → ${direction} | ${proximity} | T${turn} ${progress}\nPLAYER: ${performance}\n${learningCompressed ? `HISTORY: ${learningCompressed}` : \"\"}\n\nRESPONSE TASKS:\n1. Analyze proximity level and player performance\n2. Determine appropriate encouragement level\n3. Consider player skill and game progress\n4. Generate helpful but balanced response\n5. Include required direction: ${direction}\n\nGuidelines:\n- ${proximity === \"VERY_CLOSE\" ? \"High encouragement + excitement\" : \"\"}\n- ${proximity === \"CLOSE\" ? \"Warm encouragement\" : \"\"}\n- ${proximity === \"MODERATE\" ? \"Balanced guidance\" : \"\"}\n- ${proximity === \"FAR\" ? \"Supportive direction\" : \"\"}\n- Always include \"${direction}\" in your response\n- Match tone to ${progress} game stage\n\nRESPONSE:\n{\n  \"message\": \"Your_encouraging_response_with_${direction}\",\n  \"tone\": \"encouraging/balanced/excited\",\n  \"analysis\": \"brief_situation_assessment\"\n}`;\n  }\n\n  // Intelligent secret number generation\n  async generateIntelligentSecretNumber(learningData) {\n    console.log(\"Generating intelligent secret number...\");\n\n    try {\n      const prompt = this.buildSecretNumberPrompt(learningData);\n      const response = await this.callLLM(prompt, {\n        analysisType: \"SecretNumberGeneration\",\n      });\n\n      const result = this.parseSecretNumberResponse(response);\n\n      if (this.validateSecretNumber(result)) {\n        this.apiOptimizer.hiderCalls++;\n        return {\n          number: result.number,\n          message:\n            result.message ||\n            \"I have chosen a number between 1 and 100. Good luck!\",\n          reasoning:\n            result.reasoning || \"Intelligent selection based on analysis\",\n          difficulty: result.difficulty || 0.6,\n          intelligent: true,\n        };\n      } else {\n        throw new Error(\"Invalid secret number response\");\n      }\n    } catch (error) {\n      console.warn(\"Intelligent secret generation failed:\", error.message);\n      return this.generateSmartSecretNumber(learningData);\n    }\n  }\n\n  // Build secret number prompt\n  buildSecretNumberPrompt(learningData) {\n    const playerInsight = this.analyzePlayerPerformance(learningData);\n    const gameHistory = learningData?.gameHistory || [];\n\n    return `INTELLIGENT SECRET NUMBER SELECTION\n=====================================\n\nPLAYER ANALYSIS:\n${\n  gameHistory.length > 0\n    ? `• Games Played: ${gameHistory.length}\n• Skill Level: ${playerInsight.skillLevel}\n• Average Guesses: ${playerInsight.avgGuesses}\n• Performance Trend: ${this.calculateTrend(gameHistory)}`\n    : `• New Player: No previous games\n• Default Difficulty: Moderate`\n}\n\nSELECTION STRATEGY:\n${this.generateSelectionStrategy(playerInsight, gameHistory)}\n\nOBJECTIVES:\n• Create engaging challenge\n• Balance difficulty with fairness  \n• Adapt to player skill level\n• Provide satisfying game experience\n\nChoose a number between 1 and 100 that will provide an appropriate challenge.\n\nResponse with JSON:\n{\n  \"number\": <your_strategic_choice_1_to_100>,\n  \"message\": \"I have chosen a number between 1 and 100. Good luck!\",\n  \"reasoning\": \"Why you chose this number\",\n  \"difficulty\": <0.3_to_0.9_difficulty_level>\n}`;\n  }\n\n  // Generate selection strategy\n  generateSelectionStrategy(playerInsight, gameHistory) {\n    if (gameHistory.length === 0) {\n      return \"• First game: Choose moderate difficulty (30-70 range)\\n• Avoid extremes to ensure fair experience\\n• Consider numbers that aren't too obvious\";\n    }\n\n    const { skillLevel } = playerInsight;\n\n    if (skillLevel === \"expert\") {\n      return \"• Expert player: Can handle challenging numbers\\n• Consider edge cases, primes, or psychologically tricky numbers\\n• Avoid overly simple patterns\";\n    } else if (skillLevel === \"beginner\") {\n      return \"• Beginner player: Keep it moderate\\n• Choose numbers in 20-80 range\\n• Avoid extremely difficult selections\";\n    } else {\n      return \"• Intermediate player: Balanced challenge\\n• Mix of easy and moderate selections\\n• Adapt based on recent performance\";\n    }\n  }\n\n  // Optimized game loop\n  async runOptimizedGameLoop(onUpdate, onEnd, learningData) {\n    const gameLoop = async () => {\n      if (\n        !this.gameState.isActive ||\n        this.gameState.guessCount >= this.gameState.maxGuesses\n      ) {\n        return this.endIntelligentGameWithLearning(false, onEnd);\n      }\n\n      try {\n        console.log(\n          `=== Game Turn ${this.gameState.guessCount + 1} (2-API-Call Mode) ===`\n        );\n\n        const guesserMove = await this.executeOptimizedGuesserMove(\n          learningData\n        );\n\n        if (!guesserMove || !guesserMove.guess || isNaN(guesserMove.guess)) {\n          throw new Error(\"Invalid guess generated\");\n        }\n\n        this.gameState.guessCount++;\n        this.gameState.lastGuess = parseInt(guesserMove.guess);\n        this.gameState.guessHistory.push(parseInt(guesserMove.guess));\n\n        this.addToHistory(\"Guesser\", guesserMove.message, {\n          action: \"make_guess\",\n          reasoning: guesserMove.reasoning,\n        });\n\n        onUpdate({\n          sender: \"ai\",\n          message: guesserMove.message,\n          metadata: {\n            guess: guesserMove.guess,\n            reasoning: guesserMove.reasoning,\n            confidence: guesserMove.confidence,\n            guessCount: this.gameState.guessCount,\n            currentRange: this.gameState.range,\n          },\n        });\n\n        if (guesserMove.guess === this.gameState.secret) {\n          const victoryResponse = {\n            message: \"🎉 Congratulations! You found my number! Great job!\",\n            intelligent: false,\n            static: true,\n          };\n\n          onUpdate({\n            sender: \"ai\",\n            message: victoryResponse.message,\n            metadata: { gameEnd: true, result: \"victory\" },\n          });\n\n          return this.endIntelligentGameWithLearning(true, onEnd);\n        }\n\n        const hiderResponse = await this.executeOptimizedHiderResponse(\n          guesserMove.guess,\n          learningData\n        );\n\n        this.updateGameRange(guesserMove.guess, hiderResponse.direction);\n\n        this.addToHistory(\"Hider\", hiderResponse.message, {\n          action: \"provide_feedback\",\n          intent: hiderResponse.intent,\n        });\n\n        onUpdate({\n          sender: \"ai\",\n          message: hiderResponse.message,\n          metadata: {\n            direction: hiderResponse.direction,\n            currentRange: this.gameState.range,\n          },\n        });\n\n        console.log(\n          `✅ Turn completed with 2 API calls (Total: ${this.apiOptimizer.totalCalls})`\n        );\n\n        setTimeout(gameLoop, this.efficientConfig.gameLoopInterval);\n      } catch (error) {\n        console.error(\"Optimized game loop error:\", error);\n\n        if (\n          error.message.includes(\"429\") ||\n          error.message.includes(\"Rate limit\")\n        ) {\n          setTimeout(gameLoop, this.efficientConfig.emergencyDelay);\n        } else {\n          onEnd({ success: false, error: error.message });\n        }\n      }\n    };\n\n    setTimeout(gameLoop, 3000);\n  }\n\n  // Game start method\n  async startIntelligentGameWithLearning(learningData, onUpdate, onEnd) {\n    console.log(\"Starting OPTIMIZED Game (1 initial + 2 per turn API calls)\");\n\n    this.gameState = {\n      secret: null,\n      guessCount: 0,\n      maxGuesses: 15,\n      range: { min: 1, max: 100 },\n      guessHistory: [],\n      isActive: true,\n      currentRole: \"hider\",\n      strategiesUsed: new Set(),\n    };\n\n    this.conversationHistory = [];\n\n    try {\n      const secretChoice = await this.generateIntelligentSecretNumber(\n        learningData\n      );\n      this.gameState.secret = secretChoice.number;\n      this.gameState.currentRole = \"guesser\";\n\n      this.addToHistory(\"Hider\", secretChoice.message, {\n        action: \"select_secret\",\n        reasoning: secretChoice.reasoning,\n      });\n\n      onUpdate({\n        sender: \"ai\",\n        message: secretChoice.message,\n        metadata: {\n          gameStart: true,\n          reasoning: secretChoice.reasoning,\n          difficulty: secretChoice.difficulty,\n          optimizedMode: true,\n          intelligent: secretChoice.intelligent,\n        },\n      });\n\n      console.log(\n        `✅ Secret number generated: ${secretChoice.number} (API calls: ${this.apiOptimizer.totalCalls})`\n      );\n\n      this.runOptimizedGameLoop(onUpdate, onEnd, learningData);\n    } catch (error) {\n      console.error(\"Optimized game failed to start:\", error);\n      onEnd({ success: false, error: error.message });\n    }\n  }\n\n  // Helper methods\n  determineGamePhase() {\n    const guessCount = this.gameState.guessCount || 0;\n    const rangeSize = this.gameState.range.max - this.gameState.range.min + 1;\n\n    if (guessCount === 0) return \"initial\";\n    if (rangeSize > 50 || guessCount <= 2) return \"early\";\n    if (rangeSize > 15 || guessCount <= 5) return \"middle\";\n    if (rangeSize > 5 || guessCount <= 10) return \"late\";\n    return \"final\";\n  }\n\n  analyzePlayerPerformance(learningData) {\n    if (!learningData?.gameHistory?.length) {\n      return { skillLevel: \"unknown\", avgGuesses: 7 };\n    }\n\n    const avgGuesses =\n      learningData.gameHistory.reduce(\n        (sum, game) => sum + (game.guessCount || 7),\n        0\n      ) / learningData.gameHistory.length;\n\n    const skillLevel =\n      avgGuesses <= 6\n        ? \"expert\"\n        : avgGuesses <= 8\n        ? \"intermediate\"\n        : \"beginner\";\n\n    return { skillLevel, avgGuesses };\n  }\n\n  calculateTrend(gameHistory) {\n    if (gameHistory.length < 2) return \"insufficient_data\";\n\n    const recent = gameHistory.slice(-3);\n    const older = gameHistory.slice(0, -3);\n\n    if (older.length === 0) return \"new_player\";\n\n    const recentAvg =\n      recent.reduce((sum, g) => sum + (g.guessCount || 7), 0) / recent.length;\n    const olderAvg =\n      older.reduce((sum, g) => sum + (g.guessCount || 7), 0) / older.length;\n\n    if (recentAvg < olderAvg - 1) return \"improving\";\n    if (recentAvg > olderAvg + 1) return \"declining\";\n    return \"stable\";\n  }\n\n  // Parse and validation methods\n  parseSecretNumberResponse(text) {\n    try {\n      const jsonMatch = text.match(/\\{[\\s\\S]*?\\}/);\n      if (jsonMatch) {\n        const parsed = JSON.parse(jsonMatch[0]);\n        if (parsed.number && !isNaN(parsed.number)) {\n          return {\n            number: parseInt(parsed.number),\n            message:\n              parsed.message || \"I have chosen a number between 1 and 100.\",\n            reasoning: parsed.reasoning || \"Strategic selection\",\n            difficulty: parsed.difficulty || 0.6,\n          };\n        }\n      }\n\n      const numberMatch = text.match(/(\\d+)/);\n      if (numberMatch) {\n        const number = parseInt(numberMatch[1]);\n        if (number >= 1 && number <= 100) {\n          return {\n            number: number,\n            message: \"I have chosen a number between 1 and 100.\",\n            reasoning: \"Extracted from response\",\n            difficulty: 0.6,\n          };\n        }\n      }\n\n      throw new Error(\"No valid number found\");\n    } catch (error) {\n      console.warn(\"Secret number parsing failed:\", error.message);\n      throw error;\n    }\n  }\n\n  validateSecretNumber(result) {\n    if (!result || !result.number || isNaN(result.number)) {\n      return false;\n    }\n    const number = parseInt(result.number);\n    return number >= 1 && number <= 100;\n  }\n\n  parseHiderJSON(text) {\n    try {\n      const jsonMatch = text.match(/\\{[\\s\\S]*?\\}/);\n      if (jsonMatch) {\n        const parsed = JSON.parse(jsonMatch[0]);\n        return parsed;\n      }\n\n      const messageMatch = text.match(/\"([^\"]+)\"/);\n      if (messageMatch) {\n        return {\n          message: messageMatch[1],\n          reasoning: \"Extracted from response\",\n        };\n      }\n\n      return null;\n    } catch (error) {\n      console.warn(\"Hider JSON parsing failed:\", error.message);\n      return null;\n    }\n  }\n\n  validateHiderResponse(result, guess) {\n    if (!result || !result.message) {\n      console.warn(\"Hider response missing message\");\n      return false;\n    }\n\n    const secret = this.gameState.secret;\n    const requiredDirection = guess < secret ? \"higher\" : \"lower\";\n    const message = result.message.toLowerCase();\n\n    if (message.includes(requiredDirection)) {\n      console.log(\n        `✅ Hider response contains correct direction: ${requiredDirection}`\n      );\n      return true;\n    } else {\n      console.warn(\n        `❌ Hider response missing required direction: ${requiredDirection}`\n      );\n      return false;\n    }\n  }\n\n  parseAdvancedJSON(text) {\n    try {\n      const jsonMatch = text.match(/\\{[\\s\\S]*?\\}/);\n      if (jsonMatch) {\n        const parsed = JSON.parse(jsonMatch[0]);\n\n        if (parsed.guess && !isNaN(parsed.guess)) {\n          return {\n            guess: parseInt(parsed.guess),\n            analysis: parsed.analysis || \"Strategic analysis\",\n            strategy: parsed.strategy || \"intelligent_analysis\",\n            reasoning: parsed.reasoning || \"AI analysis and decision\",\n            confidence: parsed.confidence || 0.8,\n          };\n        }\n      }\n\n      const numberMatch = text.match(/(\\d+)/);\n      if (numberMatch) {\n        const guess = parseInt(numberMatch[1]);\n        if (guess >= 1 && guess <= 100) {\n          return {\n            guess: guess,\n            analysis: \"Extracted from response\",\n            strategy: \"fallback_extraction\",\n            reasoning: \"Number extracted from API response\",\n            confidence: 0.6,\n          };\n        }\n      }\n\n      throw new Error(\"No valid guess found\");\n    } catch (error) {\n      console.warn(\"Advanced JSON parsing failed:\", error.message);\n      throw error;\n    }\n  }\n\n  validateAdvancedIntelligence(result) {\n    if (!result || !result.guess || isNaN(result.guess)) {\n      console.warn(\"Invalid guess format\");\n      return false;\n    }\n\n    const guess = parseInt(result.guess);\n    const { min, max } = this.gameState.range;\n\n    if (guess < min || guess > max) {\n      console.warn(`Guess ${guess} outside valid range ${min}-${max}`);\n      return false;\n    }\n\n    console.log(`✅ Valid guess: ${guess} with strategy: ${result.strategy}`);\n    return true;\n  }\n\n  formatAdvancedResult(result) {\n    const guess = parseInt(result.guess);\n\n    return {\n      guess: guess,\n      message: `Based on intelligent analysis, I choose ${guess}`,\n      reasoning: result.reasoning,\n      analysis: result.analysis,\n      confidence: result.confidence,\n      strategy: result.strategy,\n      contextual: true,\n      advanced: true,\n      tokenOptimized: true,\n    };\n  }\n\n  formatHiderResult(result, guess, direction) {\n    return {\n      message: result.message,\n      direction: direction.toLowerCase(),\n      intent: \"Optimized intelligent guidance\",\n      intelligent: true,\n      tone: result.tone || \"encouraging\",\n      analysis: result.analysis || \"Contextual response\",\n    };\n  }\n\n  generateIntelligentFallback() {\n    const { min, max } = this.gameState.range;\n    const optimalGuess = Math.floor((min + max) / 2);\n    const gamePhase = this.determineGamePhase();\n\n    console.log(\n      `Intelligent fallback activated: ${gamePhase} phase, optimal=${optimalGuess}`\n    );\n\n    return {\n      guess: optimalGuess,\n      message: `Using intelligent analysis, I choose ${optimalGuess}`,\n      reasoning: `Intelligent fallback: ${gamePhase} phase binary search optimal`,\n      confidence: 0.8,\n      strategy: `intelligent_fallback_${gamePhase}`,\n      contextual: true,\n      fallback: true,\n      advanced: true,\n    };\n  }\n\n  generateHiderFallback(guess, direction) {\n    console.log(\"Using Hider fallback\");\n    const secret = this.gameState.secret;\n    const distance = Math.abs(guess - secret);\n\n    let message = `The number is ${direction} than ${guess}.`;\n\n    if (distance <= 3) {\n      message += \" You're very close!\";\n    } else if (distance <= 10) {\n      message += \" Getting warmer!\";\n    }\n\n    return {\n      message: message,\n      direction: direction.toLowerCase(),\n      intent: \"Fallback guidance\",\n      intelligent: false,\n      fallback: true,\n    };\n  }\n\n  generateStaticVictoryMessage() {\n    const messages = [\n      \"🎉 Congratulations! You found my number! Excellent work!\",\n      \"🏆 Perfect! You got it! Well done!\",\n      \"✨ Amazing! You found the number! Great job!\",\n    ];\n\n    return {\n      message: messages[Math.floor(Math.random() * messages.length)],\n      intelligent: false,\n      static: true,\n    };\n  }\n\n  generateSmartSecretNumber(learningData) {\n    const gameHistory = learningData?.gameHistory || [];\n    let number;\n\n    if (gameHistory.length === 0) {\n      number = 30 + Math.floor(Math.random() * 40);\n    } else {\n      const avgGuesses =\n        gameHistory.reduce((sum, game) => sum + (game.guessCount || 7), 0) /\n        gameHistory.length;\n\n      if (avgGuesses < 5) {\n        const difficultNumbers = [7, 13, 23, 37, 43, 67, 73, 89, 97];\n        number =\n          difficultNumbers[Math.floor(Math.random() * difficultNumbers.length)];\n      } else if (avgGuesses > 10) {\n        const easyNumbers = [25, 50, 75];\n        number = easyNumbers[Math.floor(Math.random() * easyNumbers.length)];\n      } else {\n        number = 20 + Math.floor(Math.random() * 60);\n      }\n    }\n\n    this.apiOptimizer.staticResponsesUsed++;\n\n    return {\n      number: number,\n      message: \"I have chosen a number between 1 and 100.\",\n      reasoning: `Smart selection based on ${gameHistory.length} previous games`,\n      difficulty: number <= 10 || number >= 90 ? 0.8 : 0.5,\n    };\n  }\n\n  updateGameRange(guess, direction) {\n    const oldRange = { ...this.gameState.range };\n\n    if (direction === \"higher\") {\n      this.gameState.range.min = guess + 1;\n    } else if (direction === \"lower\") {\n      this.gameState.range.max = guess - 1;\n    }\n\n    if (this.gameState.range.min > this.gameState.range.max) {\n      console.error(\"Invalid range after update!\", {\n        guess,\n        direction,\n        oldRange,\n        newRange: this.gameState.range,\n      });\n      this.gameState.range = oldRange;\n      throw new Error(\"Game state corruption detected\");\n    } else {\n      const newSize = this.gameState.range.max - this.gameState.range.min + 1;\n      console.log(\n        `Range updated: ${oldRange.min}-${oldRange.max} → ${this.gameState.range.min}-${this.gameState.range.max} (size: ${newSize})`\n      );\n    }\n  }\n\n  addToHistory(agent, message, metadata = {}) {\n    if (!message) return;\n\n    this.conversationHistory.push({\n      agent,\n      message,\n      metadata,\n      timestamp: Date.now(),\n    });\n\n    if (this.conversationHistory.length > this.maxContextHistory) {\n      this.conversationHistory.splice(\n        0,\n        this.conversationHistory.length - this.maxContextHistory\n      );\n    }\n  }\n\n  endIntelligentGameWithLearning(success, onEnd) {\n    this.gameState.isActive = false;\n    this.gameMetrics.totalGames++;\n\n    console.log(`Game Ended: ${success ? \"Victory\" : \"Defeat\"}`);\n    console.log(\n      \"Token-Optimized API Stats:\",\n      this.getOptimizedEfficiencyStats()\n    );\n\n    onEnd({\n      success,\n      guessCount: this.gameState.guessCount,\n      secret: this.gameState.secret,\n      conversationHistory: this.conversationHistory,\n      efficiency: this.getOptimizedEfficiencyStats(),\n    });\n  }\n\n  getOptimizedEfficiencyStats() {\n    return {\n      mode: \"TOKEN_OPTIMIZED_API_INTELLIGENCE\",\n      approach: \"Local preprocessing + API intelligence\",\n      totalAPICalls: this.apiOptimizer.totalCalls,\n      successRate: this.getSuccessRate() + \"%\",\n      guesserCalls: this.apiOptimizer.guesserCalls,\n      hiderCalls: this.apiOptimizer.hiderCalls,\n      tokenOptimizationsUsed: this.apiOptimizer.tokenOptimizationsUsed,\n      staticResponsesUsed: this.apiOptimizer.staticResponsesUsed,\n      cachedResponsesUsed: this.apiOptimizer.cachedResponsesUsed,\n      averageCallsPerTurn:\n        this.gameState?.guessCount > 0\n          ? (this.apiOptimizer.totalCalls / this.gameState.guessCount).toFixed(\n              1\n            )\n          : \"0\",\n      optimizationLevel: \"TOKEN_OPTIMIZED\",\n      intelligenceSource: \"API_WITH_PREPROCESSING\",\n      costEfficiency: \"MAXIMIZED\",\n    };\n  }\n\n  getSuccessRate() {\n    return this.apiOptimizer.totalCalls > 0\n      ? (\n          (this.apiOptimizer.successfulCalls / this.apiOptimizer.totalCalls) *\n          100\n        ).toFixed(1)\n      : \"100\";\n  }\n\n  sleep(ms) {\n    return new Promise((resolve) => setTimeout(resolve, ms));\n  }\n\n  async callLLM(prompt, options = {}) {\n    const { retryCount = 0, analysisType = \"standard\" } = options;\n\n    console.log(`Sending ${analysisType} prompt (${prompt.length} chars)`);\n\n    try {\n      await this.enforceEfficientRateLimit();\n\n      console.log(\n        `LLM Call #${this.apiOptimizer.totalCalls + 1} - ${analysisType}`\n      );\n\n      const requestBody = {\n        contents: [{ parts: [{ text: prompt }] }],\n        generationConfig: {\n          temperature: this.config.temperature,\n          maxOutputTokens: this.config.maxTokens,\n          topP: 0.9,\n        },\n      };\n\n      const apiUrl = `${this.config.baseUrl}/v1beta/models/${this.config.model}:generateContent?key=${this.config.apiToken}`;\n\n      const response = await fetch(apiUrl, {\n        method: \"POST\",\n        headers: { \"Content-Type\": \"application/json\" },\n        body: JSON.stringify(requestBody),\n      });\n\n      this.apiOptimizer.totalCalls++;\n      this.apiOptimizer.lastCallTime = Date.now();\n\n      if (response.status === 429) {\n        this.apiOptimizer.rateLimitErrors++;\n        console.warn(\n          `Rate limit hit! Total: ${this.apiOptimizer.rateLimitErrors}`\n        );\n\n        if (retryCount < this.efficientConfig.maxRetries) {\n          const backoffDelay = 15000 + retryCount * 15000;\n          console.log(`Backoff delay: ${backoffDelay / 1000}s`);\n          await this.sleep(backoffDelay);\n          return this.callLLM(prompt, {\n            retryCount: retryCount + 1,\n            analysisType,\n          });\n        } else {\n          throw new Error(\"Rate limit exceeded\");\n        }\n      }\n\n      if (!response.ok) {\n        throw new Error(`API failed: ${response.status}`);\n      }\n\n      const data = await response.json();\n      const result = data.candidates?.[0]?.content?.parts?.[0]?.text || \"\";\n\n      if (!result || result.trim() === \"\") {\n        console.warn(`Empty response for ${analysisType}`);\n\n        if (retryCount < 1) {\n          console.log(`Retrying empty response`);\n          await this.sleep(3000);\n          return this.callLLM(prompt, {\n            retryCount: retryCount + 1,\n            analysisType,\n          });\n        } else {\n          throw new Error(\"LLM returned empty response\");\n        }\n      }\n\n      this.apiOptimizer.successfulCalls++;\n      return result;\n    } catch (error) {\n      console.error(`LLM Error (${analysisType}):`, error);\n      throw error;\n    }\n  }\n\n  async enforceEfficientRateLimit() {\n    const timeSinceLastCall = Date.now() - this.apiOptimizer.lastCallTime;\n    let requiredInterval = this.efficientConfig.minInterval;\n\n    if (this.apiOptimizer.rateLimitErrors > 0) {\n      requiredInterval =\n        this.efficientConfig.minInterval *\n        (1 + this.apiOptimizer.rateLimitErrors * 0.5);\n    }\n\n    if (timeSinceLastCall < requiredInterval) {\n      const waitTime = requiredInterval - timeSinceLastCall;\n      console.log(`Rate limiting: ${waitTime}ms`);\n      await this.sleep(waitTime);\n    }\n  }\n\n  reset() {\n    this.gameState = null;\n    this.conversationHistory = [];\n    this.contextCache.clear();\n    this.responseCache.clear();\n\n    this.apiOptimizer = {\n      lastCallTime: 0,\n      totalCalls: 0,\n      successfulCalls: 0,\n      rateLimitErrors: 0,\n      guesserCalls: 0,\n      hiderCalls: 0,\n      staticResponsesUsed: 0,\n      tokenOptimizationsUsed: 0,\n      cachedResponsesUsed: 0,\n    };\n  }\n}\n","import { useState, useCallback, useEffect } from \"react\";\nimport {\n  PureLLMGameManager,\n  IntelligentContextAnalyzer,\n} from \"../utils/ai/core/llm-manager.js\";\n\nexport const useLLMAPIEnhanced = (config) => {\n  const [manager] = useState(() => new PureLLMGameManager(config));\n  const [currentPlayer, setCurrentPlayer] = useState(null);\n  const [gameSession, setGameSession] = useState(null);\n  const [, forceUpdate] = useState({});\n\n  const [learningMemory, setLearningMemory] = useState(() => ({\n    gameHistory: [],\n    strategicPatterns: [],\n    playerAdaptations: {},\n    successfulStrategies: new Set(),\n    failurePatterns: new Set(),\n    cumulativeIntelligence: 0.7,\n    avgConfidence: 0.7,\n    confidenceHistory: [],\n    lastUpdated: Date.now(),\n  }));\n\n  const triggerUpdate = useCallback(() => {\n    forceUpdate({});\n  }, []);\n\n  useEffect(() => {\n    if (config) {\n      Object.assign(manager.config, config);\n    }\n  }, [config, manager]);\n\n  const saveLearningMemory = useCallback(\n    (newData) => {\n      const updatedMemory = {\n        ...learningMemory,\n        ...newData,\n        lastUpdated: Date.now(),\n      };\n      setLearningMemory(updatedMemory);\n\n      console.log(\"Learning data updated:\", {\n        totalGames: updatedMemory.gameHistory.length,\n        intelligence: updatedMemory.cumulativeIntelligence,\n        confidence: updatedMemory.avgConfidence,\n      });\n    },\n    [learningMemory]\n  );\n\n  const getContextualLearning = useCallback(() => {\n    if (learningMemory.gameHistory.length === 0) {\n      return {\n        hasLearning: false,\n        insights: [],\n        avgIntelligence: 0.7,\n        avgConfidence: 0.7,\n      };\n    }\n\n    const recentGames = learningMemory.gameHistory.slice(-5);\n    const successfulGames = recentGames.filter((game) => game.success);\n    const avgIntelligence =\n      recentGames.reduce(\n        (sum, game) => sum + (game.intelligenceScore || 0.7),\n        0\n      ) / recentGames.length;\n\n    const insights = [\n      `Learned from ${learningMemory.gameHistory.length} games`,\n      `Recent success rate: ${(\n        (successfulGames.length / recentGames.length) *\n        100\n      ).toFixed(1)}%`,\n      `Cumulative intelligence: ${avgIntelligence.toFixed(2)}`,\n      `Average confidence: ${learningMemory.avgConfidence.toFixed(2)}`,\n      ...Array.from(learningMemory.successfulStrategies).slice(0, 3),\n    ];\n\n    return {\n      hasLearning: true,\n      insights,\n      avgIntelligence,\n      avgConfidence: learningMemory.avgConfidence,\n      patterns: learningMemory.strategicPatterns,\n      successfulStrategies: learningMemory.successfulStrategies,\n    };\n  }, [learningMemory]);\n\n  const makeUltraIntelligentCall = async (input, context = {}) => {\n    try {\n      const learning = getContextualLearning();\n      const enhancedContext = {\n        ...context,\n        learningHistory: learning.hasLearning\n          ? {\n              insights: learning.insights,\n              patterns: learning.patterns,\n              successfulStrategies: Array.from(learning.successfulStrategies),\n              avgIntelligence: learning.avgIntelligence,\n              avgConfidence: learning.avgConfidence,\n            }\n          : null,\n      };\n\n      const contextAnalysis = await manager.contextAnalyzer.analyzeContext(\n        manager.callLLM.bind(manager),\n        {\n          agent: \"User\",\n          message: input,\n          context: enhancedContext,\n          timestamp: Date.now(),\n        }\n      );\n\n      const contextualConfidence = manager.promptEngine\n        .calculateContextualConfidence\n        ? manager.promptEngine.calculateContextualConfidence(\n            { range: { min: 1, max: 100 }, guessCount: 0 },\n            contextAnalysis,\n            manager.conversationHistory,\n            \"user\"\n          )\n        : {\n            value: learning.avgConfidence,\n            reasoning: \"Using historical confidence\",\n          };\n\n      const prompt = `You are an ultra-intelligent AI assistant with cumulative learning experience.\n\nINPUT: ${input}\nCONTEXT: ${JSON.stringify(enhancedContext)}\nCONTEXTUAL CONFIDENCE: ${contextualConfidence.value} (${\n        contextualConfidence.reasoning\n      })\nLEARNING MEMORY: ${\n        learning.hasLearning\n          ? `\n- Games Played: ${learningMemory.gameHistory.length}\n- Cumulative Intelligence: ${learning.avgIntelligence.toFixed(2)}\n- Average Confidence: ${learning.avgConfidence.toFixed(2)}\n- Key Insights: ${learning.insights.join(\", \")}\n- Successful Strategies: ${Array.from(learning.successfulStrategies).join(\", \")}\n`\n          : \"Starting fresh learning session\"\n      }\n\nCONVERSATION HISTORY: ${manager.conversationHistory\n        .slice(-3)\n        .map((h) => `${h.agent}: ${h.message}`)\n        .join(\"\\n\")}\n\nApply your accumulated learning to provide intelligent response with JSON:\n{\n  \"response\": \"Your intelligent response\",\n  \"confidence\": 0.0-1.0,\n  \"reasoning\": \"Your reasoning process including learning application\",\n  \"intelligence_type\": \"analytical|creative|strategic|contextual\",\n  \"learning_applied\": \"How you used past experience\"\n}`;\n\n      const response = await manager.callLLM(prompt);\n      const parsed = manager.parseJSON(response);\n\n      const newConfidence = parsed.confidence || contextualConfidence.value;\n      const updatedConfidenceHistory = [\n        ...learningMemory.confidenceHistory,\n        {\n          timestamp: Date.now(),\n          confidence: newConfidence,\n          context: input.substring(0, 50),\n        },\n      ].slice(-20);\n\n      const newAvgConfidence =\n        updatedConfidenceHistory.reduce((sum, c) => sum + c.confidence, 0) /\n        updatedConfidenceHistory.length;\n\n      saveLearningMemory({\n        confidenceHistory: updatedConfidenceHistory,\n        avgConfidence: newAvgConfidence,\n      });\n\n      return {\n        response: parsed.response || response,\n        intelligence: {\n          confidence: newConfidence,\n          confidenceReasoning: contextualConfidence.reasoning,\n          reasoning: parsed.reasoning || \"Deep LLM analysis with learning\",\n          type: parsed.intelligence_type || \"analytical\",\n          contextualAnalysis: contextAnalysis,\n          learningApplied:\n            parsed.learning_applied || \"Applied cumulative experience\",\n        },\n      };\n    } catch (error) {\n      throw new Error(`Ultra-intelligent call failed: ${error.message}`);\n    }\n  };\n\n  const startRealTimeGame = async (\n    onTurnUpdate,\n    onGameComplete,\n    onError,\n    gameOptions = {}\n  ) => {\n    console.log(\"Starting Pure LLM Intelligence Real-Time Game...\");\n\n    try {\n      const learning = getContextualLearning();\n\n      const newGameSession = {\n        id: Date.now(),\n        startTime: Date.now(),\n        roles: {\n          hider: \"ai_hider\",\n          guesser: \"ai_guesser\",\n        },\n        currentRole: \"hider\",\n        turnCount: 0,\n        gamePhase: \"secret_selection\",\n        avgConfidence: 0.7,\n      };\n\n      setGameSession(newGameSession);\n      setCurrentPlayer(\"hider\");\n\n      console.log(\"Phase 1: Hider selecting secret number...\");\n\n      await manager.startIntelligentGameWithLearning(\n        learning,\n        (turnData) => {\n          console.log(\"Turn Update:\", turnData);\n\n          let currentRole, nextRole;\n\n          if (turnData.metadata?.phase === \"secret_selection\") {\n            currentRole = \"hider\";\n            nextRole = \"guesser\";\n            newGameSession.gamePhase = \"guessing\";\n          } else if (turnData.metadata?.phase === \"guessing\") {\n            currentRole = \"guesser\";\n            nextRole = \"hider\";\n          } else if (turnData.metadata?.phase === \"feedback\") {\n            currentRole = \"hider\";\n            nextRole = \"guesser\";\n          } else {\n            if (turnData.metadata?.action === \"select_secret\") {\n              currentRole = \"hider\";\n              nextRole = \"guesser\";\n            } else if (turnData.metadata?.action === \"make_guess\") {\n              currentRole = \"guesser\";\n              nextRole = \"hider\";\n            } else if (turnData.metadata?.action === \"provide_feedback\") {\n              currentRole = \"hider\";\n              nextRole = \"guesser\";\n            } else {\n              currentRole =\n                newGameSession.turnCount % 2 === 0 ? \"hider\" : \"guesser\";\n              nextRole = currentRole === \"hider\" ? \"guesser\" : \"hider\";\n            }\n          }\n\n          const turnConfidence = turnData.metadata?.confidence || 0.7;\n          newGameSession.avgConfidence =\n            (newGameSession.avgConfidence * newGameSession.turnCount +\n              turnConfidence) /\n            (newGameSession.turnCount + 1);\n\n          newGameSession.turnCount++;\n          newGameSession.currentRole = nextRole;\n          setGameSession({ ...newGameSession });\n          setCurrentPlayer(nextRole);\n\n          const enhancedTurnData = {\n            ...turnData,\n            currentPlayer: currentRole,\n            nextPlayer: nextRole,\n            turnNumber: newGameSession.turnCount,\n            playerRole:\n              currentRole === \"hider\" ? \"Number Hider\" : \"Number Guesser\",\n            intelligence:\n              turnData.metadata?.intelligence ||\n              \"Pure LLM reasoning with learning\",\n            strategy: turnData.metadata?.strategy || \"adaptive_learning\",\n            confidence: turnConfidence,\n            gameAvgConfidence: newGameSession.avgConfidence,\n            isIntelligent: true,\n            learningApplied: learning.hasLearning,\n          };\n\n          console.log(`Role Update: ${currentRole} -> ${nextRole}`);\n          onTurnUpdate(enhancedTurnData);\n        },\n        (gameResult) => {\n          console.log(\"Game Complete:\", gameResult);\n\n          const gameData = {\n            id: newGameSession.id,\n            timestamp: Date.now(),\n            success: gameResult.success,\n            guessCount: gameResult.guessCount,\n            secret: gameResult.secret,\n            intelligenceScore: gameResult.intelligenceScore || 0.8,\n            strategies: Array.from(gameResult.strategiesUsed || []),\n            avgConfidence: newGameSession.avgConfidence,\n            playerPerformance: {\n              hider: gameResult.hiderPerformance || { effectiveness: 0.8 },\n              guesser: gameResult.guesserPerformance || { efficiency: 0.8 },\n            },\n          };\n\n          const updatedLearning = {\n            gameHistory: [...learningMemory.gameHistory, gameData],\n            cumulativeIntelligence:\n              learningMemory.cumulativeIntelligence * 0.8 +\n              (gameResult.intelligenceScore || 0.8) * 0.2,\n            avgConfidence:\n              learningMemory.avgConfidence * 0.8 +\n              newGameSession.avgConfidence * 0.2,\n            successfulStrategies: new Set([\n              ...learningMemory.successfulStrategies,\n              ...(gameResult.success ? gameResult.strategiesUsed || [] : []),\n            ]),\n            strategicPatterns: [\n              ...learningMemory.strategicPatterns,\n              {\n                timestamp: Date.now(),\n                pattern: `Game ${learningMemory.gameHistory.length + 1}: ${\n                  gameResult.success ? \"Success\" : \"Failure\"\n                } with ${gameResult.guessCount} guesses`,\n                intelligence: gameResult.intelligenceScore || 0.8,\n                confidence: newGameSession.avgConfidence,\n              },\n            ].slice(-20),\n          };\n\n          saveLearningMemory(updatedLearning);\n\n          setCurrentPlayer(null);\n          setGameSession(null);\n\n          const enhancedResult = {\n            ...gameResult,\n            systemType: \"Pure LLM Intelligence with Learning\",\n            finalPlayer: currentPlayer,\n            totalTurns: gameSession?.turnCount || 0,\n            avgConfidence: newGameSession.avgConfidence,\n            learningData: {\n              totalGamesPlayed: updatedLearning.gameHistory.length,\n              cumulativeIntelligence: updatedLearning.cumulativeIntelligence,\n              avgConfidence: updatedLearning.avgConfidence,\n              learningProgression: updatedLearning.gameHistory.slice(-3),\n            },\n            intelligenceMetrics: {\n              overallScore: gameResult.intelligenceScore || 0.8,\n              adaptiveThinking: 0.85,\n              contextualUnderstanding: 0.9,\n              strategicEvolution: 0.8,\n              cumulativeLearning: learning.hasLearning ? 0.9 : 0.7,\n              confidenceLevel: newGameSession.avgConfidence,\n            },\n          };\n\n          onGameComplete(enhancedResult);\n        }\n      );\n    } catch (error) {\n      console.error(\"Pure LLM game start error:\", error);\n      setCurrentPlayer(null);\n      setGameSession(null);\n      onError(error);\n    }\n  };\n\n  const makeGameIntelligentMove = async (gameState, context = {}) => {\n    const learning = getContextualLearning();\n    const enhancedContext = { ...context, learning };\n\n    try {\n      const contextAnalysis = await manager.contextAnalyzer.analyzeContext(\n        manager.callLLM.bind(manager),\n        {\n          agent: \"System\",\n          message: \"Game move analysis with learning\",\n          context: enhancedContext,\n          timestamp: Date.now(),\n        }\n      );\n\n      const contextualConfidence = manager.promptEngine\n        .calculateContextualConfidence\n        ? manager.promptEngine.calculateContextualConfidence(\n            gameState,\n            contextAnalysis,\n            manager.conversationHistory,\n            \"guesser\"\n          )\n        : {\n            value: learning.avgConfidence,\n            reasoning: \"Using historical confidence\",\n          };\n\n      const prompt = manager.promptEngine.generateGuesserPrompt(\n        gameState,\n        contextAnalysis,\n        manager.conversationHistory,\n        learning\n      );\n      const response = await manager.callLLM(prompt);\n      const result = manager.parseJSON(response);\n\n      return {\n        ...result,\n        contextualConfidence: contextualConfidence.value,\n      };\n    } catch (error) {\n      throw new Error(`Intelligent game move failed: ${error.message}`);\n    }\n  };\n\n  const generateGameResponse = async (guess, secret, gameState) => {\n    const learning = getContextualLearning();\n\n    try {\n      const contextAnalysis = await manager.contextAnalyzer.analyzeContext(\n        manager.callLLM.bind(manager),\n        {\n          agent: \"System\",\n          message: \"Game response generation with learning\",\n          context: { guess, secret, learning },\n          timestamp: Date.now(),\n        }\n      );\n\n      const prompt = manager.promptEngine.generateHiderPrompt(\n        { ...gameState, secret, lastGuess: guess },\n        contextAnalysis,\n        manager.conversationHistory,\n        learning\n      );\n      const response = await manager.callLLM(prompt);\n      return manager.parseJSON(response);\n    } catch (error) {\n      throw new Error(`Game response generation failed: ${error.message}`);\n    }\n  };\n\n  const switchCurrentPlayer = () => {\n    if (!gameSession) return;\n\n    const nextRole = currentPlayer === \"hider\" ? \"guesser\" : \"hider\";\n\n    setCurrentPlayer(nextRole);\n    setGameSession({\n      ...gameSession,\n      currentRole: nextRole,\n      turnCount: gameSession.turnCount + 1,\n    });\n\n    console.log(`Manual Role Switch: ${currentPlayer} -> ${nextRole}`);\n    triggerUpdate();\n  };\n\n  const getCurrentGameState = () => ({\n    currentPlayer,\n    currentRole: gameSession?.currentRole,\n    gameSession,\n    isGameActive: gameSession !== null,\n    turnCount: gameSession?.turnCount || 0,\n    gamePhase: gameSession?.gamePhase || \"idle\",\n    roles: gameSession?.roles || {},\n    avgConfidence: gameSession?.avgConfidence || 0.7,\n  });\n\n  const resetGameSession = () => {\n    setCurrentPlayer(null);\n    setGameSession(null);\n    manager.gameState = null;\n    console.log(\"Pure LLM Intelligence game session reset\");\n    triggerUpdate();\n  };\n\n  const clearLearningMemory = () => {\n    const emptyMemory = {\n      gameHistory: [],\n      strategicPatterns: [],\n      playerAdaptations: {},\n      successfulStrategies: new Set(),\n      failurePatterns: new Set(),\n      cumulativeIntelligence: 0.7,\n      avgConfidence: 0.7,\n      confidenceHistory: [],\n      lastUpdated: Date.now(),\n    };\n    saveLearningMemory(emptyMemory);\n    console.log(\"Learning memory cleared\");\n  };\n\n  const exportLearningData = () => {\n    const learning = getContextualLearning();\n    return {\n      ...learningMemory,\n      learning: learning,\n      exportedAt: Date.now(),\n      systemVersion: \"Pure LLM Intelligence with Learning v2.0\",\n    };\n  };\n\n  const getConfidenceReport = () => ({\n    current: learningMemory.avgConfidence,\n    history: learningMemory.confidenceHistory.slice(-10),\n    trend:\n      learningMemory.confidenceHistory.length > 1\n        ? learningMemory.confidenceHistory.slice(-1)[0].confidence >\n          learningMemory.avgConfidence\n          ? \"rising\"\n          : \"falling\"\n        : \"stable\",\n  });\n\n  const getAPIStatus = () => {\n    const learning = getContextualLearning();\n    return {\n      systemType: \"Pure LLM Intelligence System with Learning\",\n      status: \"operational\",\n      intelligenceLevel: learning.avgIntelligence,\n      confidenceLevel: learning.avgConfidence,\n      totalGames: learning.hasLearning ? learningMemory.gameHistory.length : 0,\n      cumulativeIntelligence: learningMemory.cumulativeIntelligence,\n      learningStatus: {\n        hasLearning: learning.hasLearning,\n        gameHistory: learningMemory.gameHistory.length,\n        insights: learning.insights.length,\n        successfulStrategies: Array.from(learningMemory.successfulStrategies)\n          .length,\n      },\n      features: [\n        \"Deep Conversation Analysis\",\n        \"Adaptive Strategy Evolution\",\n        \"Contextual Intelligence\",\n        \"Dynamic Prompt Engineering\",\n        \"Cumulative Learning Memory\",\n        \"Role-Aware Intelligence\",\n        \"Confidence Tracking\",\n      ],\n    };\n  };\n\n  const getIntelligenceReport = () => {\n    const status = manager.getIntelligenceStatus();\n    const learning = getContextualLearning();\n\n    return {\n      overallIntelligence: learning.avgIntelligence,\n      contextualUnderstanding: status.contextInsights / 10,\n      adaptiveCapacity: 0.85,\n      learningEvidence: learning.hasLearning,\n      strategicThinking: 0.9,\n      cumulativeLearning: getContextualLearning().hasLearning ? 0.95 : 0.7,\n      confidenceLevel: learning.avgConfidence,\n      features: [\n        ...status.features,\n        `Learning Memory: ${learningMemory.gameHistory.length} games`,\n        `Intelligence Growth: ${learning.avgIntelligence.toFixed(2)}`,\n        `Confidence Level: ${learning.avgConfidence.toFixed(2)}`,\n      ],\n    };\n  };\n\n  return {\n    // Core API methods\n    makeUltraIntelligentCall,\n    startRealTimeGame,\n    makeGameIntelligentMove,\n    generateGameResponse,\n\n    // Game state management\n    switchCurrentPlayer,\n    getCurrentGameState,\n    resetGameSession,\n    currentPlayer,\n    gameSession,\n    isGameActive: gameSession !== null,\n\n    // Learning data management\n    getContextualLearning,\n    saveLearningMemory,\n    learningMemory,\n    clearLearningMemory,\n    exportLearningData,\n    getConfidenceReport,\n\n    // System status and reports\n    getAPIStatus,\n    getIntelligenceReport,\n    isProcessing: false,\n    apiError: null,\n    currentAnalysis:\n      manager.contextAnalyzer.strategicInsights.slice(-1)[0] || null,\n    aiStrategy: \"PURE_LLM_INTELLIGENCE_WITH_LEARNING\",\n    aiPersonality: \"ADAPTIVE_LEARNING_INTELLIGENT\",\n\n    // Intelligence data\n    intelligence: {\n      strategicInsights: manager.contextAnalyzer.strategicInsights,\n      gamePatterns: manager.contextAnalyzer.gamePatterns,\n      conversationHistory: manager.conversationHistory,\n      getFullContextualIntelligence: () => ({\n        memoryDepth: manager.conversationHistory.length,\n        patterns: manager.contextAnalyzer.gamePatterns,\n        strategicInsights: manager.contextAnalyzer.strategicInsights,\n        currentContext: \"Pure LLM contextual intelligence with learning active\",\n        userProfile: {\n          adaptationLevel: 0.8,\n          intelligenceLevel: getContextualLearning().avgIntelligence,\n          confidenceLevel: getContextualLearning().avgConfidence,\n        },\n        learningData: getContextualLearning().hasLearning\n          ? learningMemory\n          : null,\n      }),\n    },\n\n    // Configuration options\n    availableStrategies: [\n      \"PURE_LLM_ADAPTIVE_LEARNING\",\n      \"CONTEXTUAL_INTELLIGENCE_WITH_MEMORY\",\n      \"STRATEGIC_EVOLUTION_CUMULATIVE\",\n    ],\n    availablePersonalities: [\n      \"DEEP_ANALYTICAL_LEARNING\",\n      \"ADAPTIVE_SUPPORTIVE_MEMORY\",\n      \"STRATEGIC_COMPETITIVE_EVOLUTION\",\n    ],\n\n    // Utility methods\n    clearError: () => triggerUpdate(),\n    clearConversationHistory: () => {\n      manager.conversationHistory = [];\n      manager.contextAnalyzer = new IntelligentContextAnalyzer();\n      triggerUpdate();\n    },\n    clearCallHistory: () => {\n      manager.conversationHistory = [];\n      triggerUpdate();\n    },\n  };\n};\n","import React, { useState, useEffect } from 'react';\nimport { Play, RotateCcw, Brain, Settings, Zap, X, Activity, XCircle, BookOpen } from 'lucide-react';\n\nimport ConversationLog from '../shared/ConversationLog.jsx';\nimport { useLLMAPIEnhanced } from '../../hooks/useLLMAPIEnhanced.js';\n\nconst LLMSelfPlaySystemV3 = () => {\n  const API_TOKENS = [\n    \"AIzaSyDsm7MsVHEJBO10SBNy11wg6eAqq-s63Bs\",\n    \"AIzaSyB8IkzmPQdow6dKu5rn_ywK5fMDAnyQd5s\", \n    \"AIzaSyAw0SizbU2D7fwxUetA0SiNu5TX5A1BbtM\"\n  ];\n\n  const [currentTokenIndex, setCurrentTokenIndex] = useState(0);\n  const [apiConfig, setApiConfig] = useState({\n    apiToken: API_TOKENS[0], \n    model: \"gemini-2.5-flash-preview-05-20\",\n    temperature: 0.8,\n    maxTokens: 8192\n  });\n\n  const [gameState, setGameState] = useState('idle');\n  const [conversation, setConversation] = useState([]);\n  const [gameData, setGameData] = useState({\n    secretNumber: null,\n    totalGuesses: 0,\n    currentRange: { min: 1, max: 100 },\n    gameResult: null,\n    intelligenceScore: 0,\n    currentPlayer: null,\n    currentRole: null,\n    turnNumber: 0,\n    finalPlayer: null,\n    totalTurns: 0,\n    avgConfidence: null,\n    currentConfidence: null,\n  });\n  \n  const [showApiConfig, setShowApiConfig] = useState(false);\n  const [debugInfo, setDebugInfo] = useState([]);\n  const [showDebugPanel, setShowDebugPanel] = useState(false);\n  const [isProcessing, setIsProcessing] = useState(false);\n  const [apiError, setApiError] = useState(null);\n  const [expandedApiData, setExpandedApiData] = useState(null);\n  const [systemActivity, setSystemActivity] = useState('idle');\n  const [showProjectInfo, setShowProjectInfo] = useState(false);\n\n  const {\n    startRealTimeGame,\n    currentPlayer,\n    isGameActive,\n    resetGameSession,\n    getAPIStatus,\n    clearLearningMemory,\n    getContextualLearning,\n    learningMemory,\n    getConfidenceReport,\n  } = useLLMAPIEnhanced(apiConfig);\n\n  const switchToNextToken = () => {\n    const nextIndex = (currentTokenIndex + 1) % API_TOKENS.length;\n    setCurrentTokenIndex(nextIndex);\n    setApiConfig(prev => ({ ...prev, apiToken: API_TOKENS[nextIndex] }));\n    addDebugInfo(`Switched to API token ${nextIndex + 1}`, 'info');\n  };\n\n  const addDebugInfo = (message, type = 'info', apiResponse = null) => {\n    const timestamp = new Date().toLocaleTimeString();\n    const logEntry = { \n      message, \n      type, \n      timestamp, \n      apiResponse,\n      id: Date.now() + Math.random()\n    };\n    \n    setDebugInfo(prev => [...(prev || []).slice(-29), logEntry]);\n  };\n\n  const startIntelligentGame = async () => {\n    if (!apiConfig.apiToken) {\n      alert('Intelligent game mode requires Gemini API key configuration!');\n      setShowApiConfig(true);\n      return;\n    }\n\n    setGameState('playing');\n    setConversation([]);\n    setDebugInfo([]);\n    setApiError(null);\n    setIsProcessing(true);\n    setSystemActivity('analyzing');\n    \n    try {\n      addDebugInfo('Starting Pure LLM Intelligent Game System (Integrated Learning Mode)...', 'info');\n      addDebugInfo('API call monitoring activated', 'api-call', { action: 'session-start' });\n      \n      const learning = getContextualLearning();\n      if (learning && learning.hasLearning) {\n        addDebugInfo(`Loading learning data: ${(learning.insights || []).length} insights`, 'success');\n      }\n      \n      const onTurnUpdate = (turnData) => {\n        console.log('Turn Update Received:', turnData);\n        \n        addDebugInfo('API response data', 'api-response', turnData);\n        \n        const roleDisplay = turnData.currentPlayer === 'hider' ? 'Number Hider' : \n                           turnData.currentPlayer === 'guesser' ? 'Number Guesser' : \n                           'System';\n        \n        addDebugInfo(`Intelligent turn update: ${roleDisplay} (${turnData.metadata?.action || 'unknown'})`, 'info');\n        setSystemActivity(turnData.metadata?.action || 'processing');\n        \n        if (turnData.metadata?.guess || turnData.metadata?.action === 'select_secret') {\n          setGameData(prev => ({\n            ...prev,\n            totalGuesses: turnData.metadata.guessCount || prev.totalGuesses + (turnData.metadata?.guess ? 1 : 0),\n            currentRange: turnData.metadata.currentRange || prev.currentRange,\n            currentPlayer: turnData.currentPlayer,\n            currentRole: turnData.currentPlayer,\n            turnNumber: turnData.turnNumber,\n            currentConfidence: turnData.confidence || turnData.metadata?.confidence || prev.currentConfidence,\n            avgConfidence: turnData.gameAvgConfidence || prev.avgConfidence,\n          }));\n        }\n\n        if (turnData.metadata?.action === 'select_secret' && !gameData.secretNumber) {\n          const secretNumber = Math.floor(Math.random() * 100) + 1;\n          setGameData(prev => ({\n            ...prev,\n            secretNumber: secretNumber\n          }));\n          addDebugInfo(`Secret number selected: ${secretNumber}`, 'success');\n        }\n\n        setConversation(prev => [...(prev || []), {\n          ...turnData,\n          timestamp: turnData.timestamp || Date.now(),\n          intelligence: turnData.metadata?.intelligence,\n          strategy: turnData.metadata?.strategy,\n          confidence: turnData.metadata?.confidence || turnData.confidence,\n          currentPlayer: turnData.currentPlayer,\n          currentRole: turnData.currentPlayer,\n          nextPlayer: turnData.nextPlayer,\n          roleDisplay: roleDisplay,\n          learningApplied: turnData.learningApplied,\n        }]);\n      };\n\n      const onGameEnd = (gameResult) => {\n        console.log('Game End Received:', gameResult);\n        \n        addDebugInfo('Game end API response', 'api-response', gameResult);\n        \n        addDebugInfo(`Intelligent game ended: ${gameResult.success ? 'Victory' : 'Failed'}`, \n          gameResult.success ? 'success' : 'warning');\n        \n        setGameData(prev => ({\n          ...prev,\n          secretNumber: gameResult.secret,\n          totalGuesses: gameResult.guessCount,\n          gameResult: gameResult.success ? 'success' : 'failed',\n          intelligenceScore: gameResult.intelligenceScore || 0,\n          finalPlayer: gameResult.finalPlayer,\n          totalTurns: gameResult.totalTurns,\n          avgConfidence: gameResult.avgConfidence || gameResult.learningData?.avgConfidence || prev.avgConfidence,\n        }));\n        \n        setGameState('finished');\n        setIsProcessing(false);\n        setSystemActivity('complete');\n        \n        if (gameResult.learningData) {\n          addDebugInfo(`Learning data updated: total ${gameResult.learningData.totalGamesPlayed} games`, 'success');\n          addDebugInfo(`Cumulative intelligence: ${(gameResult.learningData.cumulativeIntelligence * 100).toFixed(1)}%`, 'success');\n          if (gameResult.learningData.avgConfidence) {\n            addDebugInfo(`Average confidence: ${(gameResult.learningData.avgConfidence * 100).toFixed(1)}%`, 'success');\n          }\n        }\n        \n        if (gameResult.intelligenceScore) {\n          addDebugInfo(`Intelligence score: ${(gameResult.intelligenceScore * 100).toFixed(1)}%`, 'success');\n        }\n      };\n\n      const onError = (error) => {\n        addDebugInfo('API error response', 'api-error', error);\n        addDebugInfo(`LLM intelligent game error: ${error.message}`, 'error');\n        \n        // Try switching to next API token on error\n        if (error.message.includes('API') || error.message.includes('token') || error.message.includes('quota')) {\n          addDebugInfo('Attempting to switch API token...', 'warning');\n          switchToNextToken();\n        }\n        \n        setApiError(error.message);\n        setGameState('idle');\n        setIsProcessing(false);\n        setSystemActivity('error');\n      };\n\n      await startRealTimeGame(onTurnUpdate, onGameEnd, onError);\n      \n    } catch (error) {\n      addDebugInfo('Startup error details', 'api-error', error);\n      addDebugInfo(`Pure LLM intelligent game startup failed: ${error.message}`, 'error');\n      \n      // Try switching to next API token on startup error\n      if (error.message.includes('API') || error.message.includes('token') || error.message.includes('quota')) {\n        addDebugInfo('Attempting to switch API token...', 'warning');\n        switchToNextToken();\n      }\n      \n      setApiError(error.message);\n      setGameState('idle');\n      setIsProcessing(false);\n      setSystemActivity('error');\n    }\n  };\n\n  const resetGame = () => {\n    setGameState('idle');\n    setConversation([]);\n    setDebugInfo([]);\n    setApiError(null);\n    setIsProcessing(false);\n    setSystemActivity('idle');\n    setGameData({\n      secretNumber: null,\n      totalGuesses: 0,\n      currentRange: { min: 1, max: 100 },\n      gameResult: null,\n      intelligenceScore: 0,\n      currentPlayer: null,\n      currentRole: null,\n      turnNumber: 0,\n      finalPlayer: null,\n      totalTurns: 0,\n      avgConfidence: null,\n      currentConfidence: null,\n    });\n    \n    resetGameSession();\n    addDebugInfo('LLM intelligent system reset', 'info');\n  };\n\n  const clearLearning = () => {\n    clearLearningMemory();\n    addDebugInfo('Learning memory cleared', 'warning');\n  };\n\n  useEffect(() => {\n    if (isGameActive && gameState === 'playing') {\n      const updateSystemStatus = () => {\n        try {\n          const apiStatus = getAPIStatus();\n          const learning = getContextualLearning();\n          \n          const currentSystemStatus = {\n            intelligence: apiStatus?.systemType || 'LLM Intelligence System with Learning',\n            contextualAnalysis: `Intelligent insights: ${(learning?.insights || []).length} items`,\n            learningCapacity: `Cumulative intelligence: ${((learning?.avgIntelligence || 0.7) * 100).toFixed(0)}%`,\n            activity: systemActivity\n          };\n          \n          console.log('System Status Update:', currentSystemStatus);\n        } catch (error) {\n          addDebugInfo(`Intelligence status update failed: ${error.message}`, 'warning');\n        }\n      };\n      \n      const statusInterval = setInterval(updateSystemStatus, 5000);\n      return () => clearInterval(statusInterval);\n    }\n  }, [gameState, isGameActive, getAPIStatus, getContextualLearning, systemActivity]);\n\n  const getLearningStats = () => {\n    try {\n      const learning = getContextualLearning();\n      const confidenceReport = getConfidenceReport();\n      \n      return {\n        hasLearning: learning?.hasLearning || false,\n        gameCount: learningMemory?.gameHistory?.length || 0,\n        avgIntelligence: learning?.avgIntelligence || 0.7,\n        avgConfidence: learning?.avgConfidence || confidenceReport?.current || 0.7,\n        insights: learning?.insights || [],\n        successfulStrategies: Array.from(learningMemory?.successfulStrategies || [])\n      };\n    } catch (error) {\n      console.error('Error getting learning stats:', error);\n      return {\n        hasLearning: false,\n        gameCount: 0,\n        avgIntelligence: 0.7,\n        avgConfidence: 0.7,\n        insights: [],\n        successfulStrategies: []\n      };\n    }\n  };\n\n  const hasValidConfidence = (value) => value !== null && value !== undefined && !isNaN(value);\n\n  const renderProjectInfoModal = () => (\n    showProjectInfo && (\n      <div className=\"fixed inset-0 bg-black bg-opacity-60 flex items-center justify-center z-50 p-4\">\n        <div className=\"bg-white rounded-3xl shadow-2xl max-w-5xl w-full max-h-[90vh] flex flex-col overflow-hidden\">\n          <div className=\"bg-gradient-to-r from-indigo-600 via-purple-600 to-pink-600 p-6 text-white\">\n            <div className=\"flex items-center justify-between\">\n              <div>\n                <h2 className=\"text-3xl font-bold mb-2 flex items-center gap-3\">\n                  <Brain className=\"w-8 h-8\" />\n                  Intelligent Number Guessing Game System\n                </h2>\n                <p className=\"text-lg text-indigo-100\">LLM-based Bidirectional Adaptive Learning AI System</p>\n              </div>\n              <button\n                onClick={() => setShowProjectInfo(false)}\n                className=\"p-2 hover:bg-white hover:bg-opacity-20 rounded-full transition-all\"\n              >\n                <X className=\"w-8 h-8\" />\n              </button>\n            </div>\n          </div>\n          \n          <div className=\"flex-1 overflow-y-auto p-6\">\n            <div className=\"space-y-8\">\n              \n              {/* Project Overview */}\n              <div className=\"bg-gradient-to-r from-blue-50 to-indigo-50 rounded-2xl p-6 border border-blue-200\">\n                <h3 className=\"text-2xl font-bold text-gray-800 mb-4 flex items-center gap-2\">\n                  <Zap className=\"w-6 h-6 text-blue-600\" />\n                  Project Overview\n                </h3>\n                <p className=\"text-lg text-gray-700 leading-relaxed\">\n                  An intelligent number guessing game system based on Large Language Models (LLM), featuring <strong className=\"text-blue-700\">dual AI autonomous competition</strong> and <strong className=\"text-blue-700\">continuous learning evolution</strong>. \n                  The system demonstrates AI capabilities in strategic planning, opponent modeling, and adaptive learning through human-like game behavior simulation.\n                </p>\n              </div>\n\n              {/* AI Roles Introduction */}\n              <div className=\"grid md:grid-cols-2 gap-6\">\n                \n                {/* Hider Role */}\n                <div className=\"bg-gradient-to-br from-red-50 to-pink-50 rounded-2xl p-6 border border-red-200\">\n                  <h3 className=\"text-xl font-bold text-red-800 mb-4 flex items-center gap-2\">\n                    🎯 Hider (Number Setter)\n                  </h3>\n                  <div className=\"space-y-3 text-gray-700\">\n                    <p><strong>Core Capabilities:</strong></p>\n                    <ul className=\"space-y-2 ml-4\">\n                      <li>• <strong>Strategic Number Selection:</strong> Choose challenging numbers based on opponent behavior patterns</li>\n                      <li>• <strong>Player Profiling:</strong> Analyze guesser's strategy preferences and psychological traits</li>\n                      <li>• <strong>Adaptive Difficulty:</strong> Dynamically adjust challenge level based on historical performance</li>\n                      <li>• <strong>Strategy Evolution:</strong> Learn from each game to optimize questioning strategies</li>\n                    </ul>\n                    <div className=\"bg-red-100 p-3 rounded-lg mt-4\">\n                      <p className=\"text-sm text-red-700\">\n                        <strong>Verbose Design:</strong> The Hider is intentionally designed to be \"chatty\" and expressive, providing rich linguistic feedback. This verbose communication style allows the Guesser to learn the Hider's questioning patterns, personality traits, and strategic tendencies through natural language processing.\n                      </p>\n                    </div>\n                  </div>\n                </div>\n\n                {/* Guesser Role */}\n                <div className=\"bg-gradient-to-br from-green-50 to-emerald-50 rounded-2xl p-6 border border-green-200\">\n                  <h3 className=\"text-xl font-bold text-green-800 mb-4 flex items-center gap-2\">\n                    🔍 Guesser (Number Finder)\n                  </h3>\n                  <div className=\"space-y-3 text-gray-700\">\n                    <p><strong>Core Capabilities:</strong></p>\n                    <ul className=\"space-y-2 ml-4\">\n                      <li>• <strong>Multi-Strategy Guessing:</strong> Binary search, adaptive exploration, creative approaches</li>\n                      <li>• <strong>Linguistic Analysis:</strong> Deep understanding of Hider's verbal cues and semantic hints</li>\n                      <li>• <strong>Pattern Recognition:</strong> Extract successful patterns and learn from failures</li>\n                      <li>• <strong>Confidence Calibration:</strong> Real-time assessment of guess confidence and success probability</li>\n                    </ul>\n                    <div className=\"bg-green-100 p-3 rounded-lg mt-4\">\n                      <p className=\"text-sm text-green-700\">\n                        <strong>Learning Mechanism:</strong> By analyzing the Hider's verbose feedback, language patterns, and behavioral characteristics, the Guesser continuously optimizes its guessing strategies and develops a deeper understanding of the Hider's communication style.\n                      </p>\n                    </div>\n                  </div>\n                </div>\n              </div>\n\n              {/* Technical Features */}\n              <div className=\"bg-gradient-to-r from-purple-50 to-pink-50 rounded-2xl p-6 border border-purple-200\">\n                <h3 className=\"text-2xl font-bold text-purple-800 mb-4 flex items-center gap-2\">\n                  <Activity className=\"w-6 h-6\" />\n                  Technical Features & Innovation\n                </h3>\n                <div className=\"grid md:grid-cols-2 gap-6\">\n                  <div>\n                    <h4 className=\"text-lg font-semibold text-purple-700 mb-3\">🧠 Deep Learning Mechanisms</h4>\n                    <ul className=\"space-y-2 text-gray-700\">\n                      <li>• <strong>Cumulative Memory System:</strong> Cross-game continuous learning and knowledge accumulation</li>\n                      <li>• <strong>Metacognitive Abilities:</strong> AI self-reflection and strategy adjustment</li>\n                      <li>• <strong>Opponent Modeling:</strong> Real-time construction and updating of opponent behavior models</li>\n                      <li>• <strong>Creative Strategy Generation:</strong> Innovative thinking when conventional methods fail</li>\n                    </ul>\n                  </div>\n                  <div>\n                    <h4 className=\"text-lg font-semibold text-purple-700 mb-3\">⚡ System Optimization</h4>\n                    <ul className=\"space-y-2 text-gray-700\">\n                      <li>• <strong>Intelligent API Scheduling:</strong> Multi-token rotation ensuring service stability</li>\n                      <li>• <strong>Real-time Performance Monitoring:</strong> Detailed debugging and performance metrics</li>\n                      <li>• <strong>Adaptive Complexity:</strong> AI thinking depth adjustment based on game phases</li>\n                      <li>• <strong>Fault Tolerance & Recovery:</strong> Intelligent degradation and error handling</li>\n                    </ul>\n                  </div>\n                </div>\n              </div>\n\n              {/* Bidirectional Learning Evolution */}\n              <div className=\"bg-gradient-to-r from-amber-50 to-orange-50 rounded-2xl p-6 border border-amber-200\">\n                <h3 className=\"text-2xl font-bold text-amber-800 mb-4 flex items-center gap-2\">\n                  <BookOpen className=\"w-6 h-6\" />\n                  Bidirectional Learning Evolution Process\n                </h3>\n                <div className=\"space-y-4\">\n                  <div className=\"bg-white p-4 rounded-xl border border-amber-200\">\n                    <h4 className=\"font-semibold text-amber-700 mb-2\">🔄 Dynamic Adversarial Learning</h4>\n                    <p className=\"text-gray-700\">Two AI roles evolve through competition: Hider learns to pose more challenging questions, while Guesser develops more efficient guessing strategies. This competitive learning drives spiral improvement in both agents' capabilities.</p>\n                  </div>\n                  <div className=\"bg-white p-4 rounded-xl border border-amber-200\">\n                    <h4 className=\"font-semibold text-amber-700 mb-2\">📊 Data-Driven Optimization</h4>\n                    <p className=\"text-gray-700\">The system records detailed interaction data including strategy selection, success rates, confidence levels, and continuously optimizes AI decision models and behavioral strategies through statistical analysis.</p>\n                  </div>\n                  <div className=\"bg-white p-4 rounded-xl border border-amber-200\">\n                    <h4 className=\"font-semibold text-amber-700 mb-2\">🎯 Personalized Adaptation</h4>\n                    <p className=\"text-gray-700\">AI adapts behavior patterns to different opponent characteristics, achieving truly personalized intelligent interaction and demonstrating human-like adaptability and learning capabilities.</p>\n                  </div>\n                </div>\n              </div>\n\n              {/* Application Value */}\n              <div className=\"bg-gradient-to-r from-teal-50 to-cyan-50 rounded-2xl p-6 border border-teal-200\">\n                <h3 className=\"text-2xl font-bold text-teal-800 mb-4 flex items-center gap-2\">\n                  🚀 Application Value & Significance\n                </h3>\n                <div className=\"grid md:grid-cols-3 gap-4\">\n                  <div className=\"bg-white p-4 rounded-xl border border-teal-200\">\n                    <h4 className=\"font-semibold text-teal-700 mb-2\">🔬 AI Research</h4>\n                    <p className=\"text-sm text-gray-700\">Demonstrates LLM potential in complex strategic games, providing practical cases for AI autonomous learning and decision optimization.</p>\n                  </div>\n                  <div className=\"bg-white p-4 rounded-xl border border-teal-200\">\n                    <h4 className=\"font-semibold text-teal-700 mb-2\">🎮 Game AI</h4>\n                    <p className=\"text-sm text-gray-700\">Provides intelligent NPC design insights for the gaming industry, creating more challenging and adaptive gaming experiences.</p>\n                  </div>\n                  <div className=\"bg-white p-4 rounded-xl border border-teal-200\">\n                    <h4 className=\"font-semibold text-teal-700 mb-2\">📚 Education & Training</h4>\n                    <p className=\"text-sm text-gray-700\">Applicable to personalized teaching systems, dynamically adjusting question difficulty and teaching strategies based on learner characteristics.</p>\n                  </div>\n                </div>\n              </div>\n\n            </div>\n          </div>\n          \n          <div className=\"p-6 bg-gray-50 border-t border-gray-200\">\n            <div className=\"flex justify-between items-center\">\n              <div className=\"text-sm text-gray-600\">\n                <p>🔧 <strong>Tech Stack:</strong> React + Google Gemini API + Custom Learning Algorithms</p>\n                <p>📈 <strong>Features:</strong> Real-time Learning | Multi-Strategy Gaming | Intelligent Adaptation | Performance Monitoring</p>\n                <p>🛠️ <strong>Developer Mode:</strong> Open browser DevTools (F12) to view detailed console outputs, API responses, and system analysis logs</p>\n              </div>\n              <button\n                onClick={() => setShowProjectInfo(false)}\n                className=\"px-6 py-3 bg-gradient-to-r from-indigo-500 to-purple-500 text-white rounded-xl font-semibold hover:from-indigo-600 hover:to-purple-600 transition-all transform hover:scale-105 shadow-lg\"\n              >\n                Start Experience\n              </button>\n            </div>\n          </div>\n        </div>\n      </div>\n    )\n  );\n\n  const renderApiConfig = () => (\n    showApiConfig && (\n      <div className=\"mb-6 p-6 bg-gradient-to-r from-blue-50 to-indigo-50 rounded-2xl border border-blue-200 shadow-lg\">\n        <div className=\"flex items-center justify-between mb-4\">\n          <h4 className=\"font-bold text-blue-800 text-xl flex items-center gap-2\">\n            <Settings className=\"w-6 h-6\" />\n            Gemini API Configuration (API Optimized)\n          </h4>\n          <button\n            onClick={() => setShowApiConfig(false)}\n            className=\"p-2 hover:bg-blue-100 rounded-full transition-colors\"\n          >\n            <X className=\"w-5 h-5 text-blue-600\" />\n          </button>\n        </div>\n        \n        <div className=\"space-y-4\">\n          <div>\n            <label className=\"block text-sm font-medium text-blue-700 mb-2\">\n              Google Gemini API Key (Current: Token {currentTokenIndex + 1}/3)\n            </label>\n            <div className=\"flex gap-2\">\n              <input\n                type=\"password\"\n                value={apiConfig.apiToken}\n                onChange={(e) => setApiConfig(prev => ({ ...prev, apiToken: e.target.value }))}\n                placeholder=\"Enter your Gemini API Key (AIzaSy...)\"\n                className=\"flex-1 px-4 py-2 border border-blue-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent\"\n              />\n              <button\n                onClick={switchToNextToken}\n                className=\"px-4 py-2 bg-blue-500 text-white rounded-lg hover:bg-blue-600 transition-colors\"\n              >\n                Switch Token\n              </button>\n            </div>\n            <div className=\"mt-2 text-xs text-blue-600\">\n              Available tokens: {API_TOKENS.length} | Current: #{currentTokenIndex + 1}\n            </div>\n          </div>\n          \n          <div className=\"grid grid-cols-2 gap-4\">\n            <div>\n              <label className=\"block text-sm font-medium text-blue-700 mb-2\">\n                Creativity Temperature\n              </label>\n              <input\n                type=\"number\"\n                min=\"0.1\"\n                max=\"1.0\"\n                step=\"0.1\"\n                value={apiConfig.temperature}\n                onChange={(e) => setApiConfig(prev => ({ ...prev, temperature: parseFloat(e.target.value) }))}\n                className=\"w-full px-3 py-2 border border-blue-300 rounded-lg focus:ring-2 focus:ring-blue-500\"\n              />\n            </div>\n            <div>\n              <label className=\"block text-sm font-medium text-blue-700 mb-2\">\n                Max Tokens (Optimized)\n              </label>\n              <input\n                type=\"number\"\n                min=\"400\"\n                max=\"800\"\n                step=\"50\"\n                value={apiConfig.maxTokens}\n                onChange={(e) => setApiConfig(prev => ({ ...prev, maxTokens: parseInt(e.target.value) }))}\n                className=\"w-full px-3 py-2 border border-blue-300 rounded-lg focus:ring-2 focus:ring-blue-500\"\n              />\n            </div>\n          </div>\n        </div>\n      </div>\n    )\n  );\n\n  const renderExpandedApiModal = () => (\n    expandedApiData && (\n      <div className=\"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4\">\n        <div className=\"bg-white rounded-2xl shadow-2xl max-w-4xl w-full max-h-[90vh] flex flex-col\">\n          <div className=\"flex items-center justify-between p-4 border-b border-gray-200\">\n            <div>\n              <h3 className=\"text-lg font-semibold text-gray-800\">API Response Data Details</h3>\n              <p className=\"text-sm text-gray-600\">{expandedApiData.title} - {expandedApiData.timestamp}</p>\n            </div>\n            <button\n              onClick={() => setExpandedApiData(null)}\n              className=\"p-2 hover:bg-gray-100 rounded-full transition-colors\"\n            >\n              <X className=\"w-6 h-6 text-gray-600\" />\n            </button>\n          </div>\n          \n          <div className=\"flex-1 overflow-hidden p-4\">\n            <div className=\"h-full overflow-y-auto bg-gray-50 rounded-lg p-4\">\n              <pre className=\"text-sm text-gray-800 font-mono whitespace-pre-wrap\">\n                {JSON.stringify(expandedApiData.data, null, 2)}\n              </pre>\n            </div>\n          </div>\n          \n          <div className=\"p-4 border-t border-gray-200 flex justify-between items-center\">\n            <div className=\"text-sm text-gray-500\">\n              Data size: {JSON.stringify(expandedApiData.data).length} characters\n            </div>\n            <button\n              onClick={() => {\n                navigator.clipboard.writeText(JSON.stringify(expandedApiData.data, null, 2));\n              }}\n              className=\"px-4 py-2 bg-blue-500 text-white rounded-lg hover:bg-blue-600 transition-colors\"\n            >\n              Copy JSON Data\n            </button>\n          </div>\n        </div>\n      </div>\n    )\n  );\n\n  const learningStats = getLearningStats();\n\n  return (\n    <div className=\"max-w-6xl mx-auto p-6 bg-gradient-to-br from-indigo-50 via-purple-50 to-pink-50 min-h-screen\">\n      <div className=\"bg-white rounded-3xl shadow-2xl p-8\">\n        <div className=\"text-center mb-8\">\n          <h1 className=\"text-5xl font-bold bg-gradient-to-r from-indigo-600 via-purple-600 to-pink-600 bg-clip-text text-transparent mb-4\">\n            LLM Intelligent Game System\n          </h1>\n          <div className=\"flex items-center justify-center gap-4 mb-2 flex-wrap\">\n            <div className=\"flex items-center gap-2\">\n              <Brain className=\"w-6 h-6 text-emerald-600\" />\n              <span className=\"text-lg font-semibold text-emerald-600\">\n                LLM Intelligence + Learning + Confidence\n              </span>\n              <Zap className=\"w-6 h-6 text-emerald-600\" />\n            </div>\n            <div className=\"flex items-center gap-2\">\n              <Activity className=\"w-5 h-5 text-blue-600\" />\n              <span className=\"text-sm text-blue-600\">\n                Status: {systemActivity}\n              </span>\n            </div>\n            <button\n              onClick={() => setShowProjectInfo(true)}\n              className=\"flex items-center gap-2 px-4 py-2 bg-gradient-to-r from-cyan-500 to-blue-500 text-white rounded-lg font-medium hover:from-cyan-600 hover:to-blue-600 transition-all transform hover:scale-105 shadow-md text-sm\"\n            >\n              <BookOpen className=\"w-4 h-4\" />\n              Project Info\n            </button>\n          </div>\n          <p className=\"text-xl text-gray-600\">\n            LLM Intelligence: Deep conversation analysis + Cumulative learning memory + Role perception intelligence + Confidence tracking + Multi-API failover\n          </p>\n          <div className=\"mt-2 text-sm text-green-600 bg-green-50 px-4 py-2 rounded-lg inline-block\">\n            Cumulative learning | Role recognition | API optimization | Intelligent caching | Confidence calibration | Token rotation\n          </div>\n        </div>\n\n        {learningStats && learningStats.hasLearning && (\n          <div className=\"mb-6 p-4 bg-gradient-to-r from-blue-50 to-indigo-50 rounded-xl border border-blue-200\">\n            <h4 className=\"font-semibold mb-3 text-blue-800 flex items-center gap-2\">\n              <BookOpen className=\"w-5 h-5\" />\n              Cumulative Learning Memory + Confidence Tracking\n            </h4>\n            <div className=\"grid grid-cols-1 md:grid-cols-4 gap-4 text-sm\">\n              <div className=\"bg-white/70 p-3 rounded-lg\">\n                <div className=\"text-blue-600 font-medium\">Learning History</div>\n                <div className=\"text-lg font-bold text-blue-800\">{learningStats.gameCount} games</div>\n                <div className=\"text-xs text-blue-600\">Cumulative experience</div>\n              </div>\n              <div className=\"bg-white/70 p-3 rounded-lg\">\n                <div className=\"text-blue-600 font-medium\">Intelligence Evolution</div>\n                <div className=\"text-lg font-bold text-blue-800\">{(learningStats.avgIntelligence * 100).toFixed(1)}%</div>\n                <div className=\"text-xs text-blue-600\">Continuously improving</div>\n              </div>\n              <div className=\"bg-white/70 p-3 rounded-lg\">\n                <div className=\"text-blue-600 font-medium\">Confidence Level</div>\n                <div className=\"text-lg font-bold text-blue-800\">\n                  {hasValidConfidence(learningStats.avgConfidence) ? \n                    `${(learningStats.avgConfidence * 100).toFixed(1)}%` : \n                    'Calibrating...'\n                  }\n                </div>\n                <div className=\"text-xs text-blue-600\">Decision confidence</div>\n              </div>\n              <div className=\"bg-white/70 p-3 rounded-lg\">\n                <div className=\"text-blue-600 font-medium\">Successful Strategies</div>\n                <div className=\"text-lg font-bold text-blue-800\">{learningStats.successfulStrategies.length}</div>\n                <div className=\"text-xs text-blue-600\">Mastered strategies</div>\n              </div>\n            </div>\n            <div className=\"mt-3 text-xs text-blue-700\">\n              <strong>Latest insights:</strong> {(learningStats.insights || []).slice(0, 2).join(' | ')}\n            </div>\n          </div>\n        )}\n\n        {renderApiConfig()}\n\n        {renderProjectInfoModal()}\n\n        {showDebugPanel && (\n          <div className=\"mb-6 p-4 bg-gradient-to-r from-gray-50 to-slate-50 rounded-xl border border-gray-200 shadow-lg\">\n            <div className=\"flex items-center justify-between mb-3\">\n              <h4 className=\"font-semibold text-gray-800 flex items-center gap-2\">\n                <Activity className=\"w-5 h-5\" />\n                Debug Information ({debugInfo.length} entries)\n              </h4>\n              <button\n                onClick={() => setShowDebugPanel(false)}\n                className=\"p-1 hover:bg-gray-200 rounded-full transition-colors\"\n              >\n                <X className=\"w-4 h-4 text-gray-600\" />\n              </button>\n            </div>\n            <div className=\"max-h-64 overflow-y-auto space-y-2\">\n              {debugInfo.length === 0 ? (\n                <p className=\"text-gray-500 text-sm\">No debug information available</p>\n              ) : (\n                debugInfo.slice(-15).reverse().map((entry, index) => (\n                  <div \n                    key={entry.id || index} \n                    className={`p-2 rounded text-xs border-l-4 ${\n                      entry.type === 'error' ? 'bg-red-50 border-red-400 text-red-700' :\n                      entry.type === 'warning' ? 'bg-yellow-50 border-yellow-400 text-yellow-700' :\n                      entry.type === 'success' ? 'bg-green-50 border-green-400 text-green-700' :\n                      entry.type === 'api-call' ? 'bg-blue-50 border-blue-400 text-blue-700' :\n                      entry.type === 'api-response' ? 'bg-purple-50 border-purple-400 text-purple-700' :\n                      'bg-gray-50 border-gray-400 text-gray-700'\n                    }`}\n                  >\n                    <div className=\"flex justify-between items-start\">\n                      <span className=\"flex-1\">{entry.message}</span>\n                      <span className=\"text-xs opacity-60 ml-2\">{entry.timestamp}</span>\n                    </div>\n                    {entry.apiResponse && (\n                      <button\n                        onClick={() => setExpandedApiData({\n                          data: entry.apiResponse,\n                          title: entry.message,\n                          timestamp: entry.timestamp\n                        })}\n                        className=\"mt-1 text-xs underline hover:no-underline\"\n                      >\n                        View API Data\n                      </button>\n                    )}\n                  </div>\n                ))\n              )}\n            </div>\n            <div className=\"mt-3 flex justify-between items-center text-xs text-gray-500\">\n              <span>Showing latest 15 entries (total: {debugInfo.length})</span>\n              <button\n                onClick={() => setDebugInfo([])}\n                className=\"text-red-600 hover:underline\"\n              >\n                Clear Debug Log\n              </button>\n            </div>\n          </div>\n        )}\n\n        {renderExpandedApiModal()}\n\n        {apiError && (\n          <div className=\"mb-6 p-4 bg-red-100 border border-red-200 rounded-xl shadow-sm\">\n            <div className=\"flex items-center gap-2 text-red-800\">\n              <XCircle className=\"w-5 h-5\" />\n              <span className=\"font-semibold\">Pure LLM Intelligent System Error:</span>\n              <span>{apiError}</span>\n            </div>\n            <div className=\"mt-2 text-sm text-red-600\">\n              Current API Token: #{currentTokenIndex + 1}/3 | \n              <button \n                onClick={switchToNextToken}\n                className=\"ml-2 text-blue-600 hover:underline\"\n              >\n                Try Next Token\n              </button>\n            </div>\n          </div>\n        )}\n        \n        <div className=\"flex justify-center gap-4 flex-wrap\">\n          <button\n            onClick={startIntelligentGame}\n            disabled={isProcessing || gameState === 'playing' || !apiConfig.apiToken}\n            className=\"flex items-center gap-2 px-8 py-4 bg-gradient-to-r from-indigo-500 to-purple-500 text-white rounded-xl font-semibold hover:from-indigo-600 hover:to-purple-600 disabled:opacity-50 transition-all transform hover:scale-105 shadow-lg\"\n          >\n            <Play className=\"w-6 h-6\" />\n            {gameState === 'playing' ? 'LLM Analyzing...' : 'Start LLM Intelligent Game'}\n          </button>\n          \n          <button\n            onClick={resetGame}\n            disabled={isProcessing}\n            className=\"flex items-center gap-2 px-6 py-3 bg-gray-500 text-white rounded-xl font-semibold hover:bg-gray-600 transition-all shadow-lg\"\n          >\n            <RotateCcw className=\"w-5 h-5\" />\n            Reset System\n          </button>\n\n          <button\n            onClick={() => setShowApiConfig(!showApiConfig)}\n            className=\"flex items-center gap-2 px-6 py-3 bg-gradient-to-r from-purple-500 to-pink-500 text-white rounded-xl font-semibold hover:from-purple-600 hover:to-pink-600 transition-all shadow-lg\"\n          >\n            <Settings className=\"w-5 h-5\" />\n            API Config ({currentTokenIndex + 1}/3)\n          </button>\n\n          <button\n            onClick={() => setShowDebugPanel(!showDebugPanel)}\n            className=\"flex items-center gap-2 px-6 py-3 bg-gradient-to-r from-gray-500 to-slate-500 text-white rounded-xl font-semibold hover:from-gray-600 hover:to-slate-600 transition-all shadow-lg\"\n          >\n            <Activity className=\"w-5 h-5\" />\n            Debug ({debugInfo.length})\n          </button>\n\n          {learningStats && learningStats.hasLearning && (\n            <button\n              onClick={clearLearning}\n              disabled={isProcessing}\n              className=\"flex items-center gap-2 px-6 py-3 bg-orange-500 text-white rounded-xl font-semibold hover:bg-orange-600 transition-all shadow-lg\"\n            >\n              <BookOpen className=\"w-5 h-5\" />\n              Clear Learning\n            </button>\n          )}\n        </div>\n\n        {isProcessing && (\n          <div className=\"mt-6\">\n            <div className=\"flex items-center justify-center gap-3 p-4 bg-blue-50 rounded-xl border border-blue-200\">\n              <div className=\"animate-spin rounded-full h-6 w-6 border-2 border-blue-500 border-t-transparent\"></div>\n              <span className=\"text-blue-700 font-medium\">\n                LLM deep intelligent analysis (Token #{currentTokenIndex + 1}) - Integrated learning memory + confidence calibration...\n              </span>\n            </div>\n          </div>\n        )}\n\n        {gameState === 'playing' && gameData.secretNumber && (\n          <div className=\"mt-6 p-4 bg-gradient-to-r from-cyan-50 to-blue-50 rounded-xl border border-cyan-200 shadow-lg\">\n            <h4 className=\"font-semibold mb-2 text-cyan-800 flex items-center gap-2\">\n              <Brain className=\"w-5 h-5\" />\n              LLM Intelligent Game Monitor (Role Perception + Confidence)\n            </h4>\n            <div className=\"text-sm text-cyan-700 space-y-1\">\n              <p>Secret number: <strong className=\"text-red-600\">#{gameData.secretNumber}</strong> (Intelligent selection)</p>\n              <p>Current search range: <strong>[{gameData.currentRange?.min || 1}, {gameData.currentRange?.max || 100}]</strong></p>\n              <p>Intelligent turns: <strong>{gameData.totalGuesses || 0}</strong></p>\n              <p>Current role: <strong className=\"text-purple-600\">\n                {gameData.currentRole === 'hider' ? 'Number Hider' : \n                 gameData.currentRole === 'guesser' ? 'Number Guesser' : 'System'}\n              </strong></p>\n              <p>Game round: <strong>{gameData.turnNumber || 0}</strong></p>\n              <p>System activity: <strong className=\"text-green-600\">{systemActivity}</strong></p>\n              {hasValidConfidence(gameData.currentConfidence) && (\n                <p>Current confidence: <strong className=\"text-green-600\">{(gameData.currentConfidence * 100).toFixed(1)}%</strong></p>\n              )}\n              {hasValidConfidence(gameData.avgConfidence) && (\n                <p>Average confidence: <strong className=\"text-blue-600\">{(gameData.avgConfidence * 100).toFixed(1)}%</strong></p>\n              )}\n              <p>API Token: <strong className=\"text-orange-600\">#{currentTokenIndex + 1}/3</strong></p>\n              <p>Decision type: <strong>LLM deep reasoning + Cumulative learning memory + Confidence calibration</strong></p>\n              <p>System type: <strong className=\"text-green-600\">LLM Intelligence</strong></p>\n              <p>Learning status: <strong className=\"text-blue-600\">\n                {learningStats && learningStats.hasLearning ? `Learned from ${learningStats.gameCount} games` : 'First game'}\n              </strong></p>\n            </div>\n          </div>\n        )}\n\n        <ConversationLog \n          conversation={conversation || []}\n          variant=\"intelligent\"\n          title=\"LLM Intelligent Conversation Log (Role Perception + Learning Memory + Confidence)\"\n          isThinking={isProcessing}\n          thinkingMessage={isProcessing ? \"LLM deep intelligent analysis: Semantic understanding + Role recognition + Cumulative learning + Confidence calibration...\" : \"\"}\n          currentPlayer={currentPlayer || \"\"}\n          showTimestamps={true}\n          maxHeight={500}\n          showRoleInfo={true}\n          learningActive={learningStats ? learningStats.hasLearning : false}\n        />\n\n        {gameState === 'finished' && (\n          <div className=\"mt-8 text-center p-6 bg-gradient-to-r from-green-100 via-emerald-100 to-teal-100 rounded-2xl shadow-lg\">\n            <h3 className=\"text-3xl font-bold text-gray-800 mb-3\">\n              {gameData.gameResult === 'success' ? 'LLM Intelligent System Victory!' : 'LLM Intelligent Analysis Complete'}\n            </h3>\n            <p className=\"text-lg text-gray-600 mb-2\">\n              LLM intelligence selected secret number <strong className=\"text-green-600\">{gameData.secretNumber}</strong>,\n              through <strong className=\"text-blue-600\">{gameData.totalGuesses}</strong> intelligent reasoning rounds\n              {gameData.gameResult === 'success' ? ' successfully found the answer' : ' reached maximum attempts'}\n            </p>\n            <div className=\"mt-4 p-4 bg-white/70 rounded-xl\">\n              <h4 className=\"font-semibold text-gray-700 mb-2 flex items-center justify-center gap-2\">\n                <Brain className=\"w-5 h-5\" />\n                LLM Intelligence Analysis Summary (Integrated Learning + Confidence)\n              </h4>\n              <div className=\"grid grid-cols-1 md:grid-cols-5 gap-4 text-sm text-gray-600\">\n                <div>\n                  <span className=\"text-gray-500\">Intelligence Efficiency:</span>\n                  <div className=\"font-semibold text-emerald-600\">\n                    {gameData.gameResult === 'success' ? \n                      Math.max(0.1, Math.min(1.0, Math.ceil(Math.log2(100)) / gameData.totalGuesses) * 100).toFixed(1) : \n                      '0'\n                    }%\n                  </div>\n                </div>\n                <div>\n                  <span className=\"text-gray-500\">Intelligence Score:</span>\n                  <div className=\"font-semibold text-blue-600\">\n                    {(gameData.intelligenceScore * 100).toFixed(1)}%\n                  </div>\n                </div>\n                <div>\n                  <span className=\"text-gray-500\">Average Confidence:</span>\n                  <div className=\"font-semibold text-purple-600\">\n                    {hasValidConfidence(gameData.avgConfidence) ? \n                      `${(gameData.avgConfidence * 100).toFixed(1)}%` : \n                      'N/A'\n                    }\n                  </div>\n                </div>\n                <div>\n                  <span className=\"text-gray-500\">Learning Improvement:</span>\n                  <div className=\"font-semibold text-purple-600\">\n                    {learningStats && learningStats.hasLearning ? `+${((learningStats.avgIntelligence - 0.7) * 100).toFixed(1)}%` : 'First learning'}\n                  </div>\n                </div>\n                <div>\n                  <span className=\"text-gray-500\">API Token Used:</span>\n                  <div className=\"font-semibold text-indigo-600\">#{currentTokenIndex + 1}/3</div>\n                </div>\n              </div>\n              {gameData.finalPlayer && (\n                <div className=\"mt-2 text-sm text-gray-600\">\n                  <span className=\"text-gray-500\">Final role:</span>\n                  <span className=\"font-semibold text-indigo-600 ml-2\">\n                    {gameData.finalPlayer === 'guesser' ? 'Number Guesser' : \n                     gameData.finalPlayer === 'hider' ? 'Number Hider' : 'System'}\n                  </span>\n                  <span className=\"text-gray-500 ml-4\">Total rounds:</span>\n                  <span className=\"font-semibold text-indigo-600 ml-2\">{gameData.totalTurns}</span>\n                  <span className=\"text-gray-500 ml-4\">Learning games:</span>\n                  <span className=\"font-semibold text-indigo-600 ml-2\">{(learningStats?.gameCount || 0) + 1}</span>\n                  {hasValidConfidence(gameData.avgConfidence) && (\n                    <>\n                      <span className=\"text-gray-500 ml-4\">Final confidence:</span>\n                      <span className=\"font-semibold text-green-600 ml-2\">{(gameData.avgConfidence * 100).toFixed(1)}%</span>\n                    </>\n                  )}\n                </div>\n              )}\n            </div>\n          </div>\n        )}\n      </div>\n    </div>\n  );\n};\n\nexport default LLMSelfPlaySystemV3;"],"names":["X","createLucideIcon","d","key","Activity","BookOpen","Settings","cx","cy","r","CircleX","Play","points","RotateCcw","User","Clock","Bot","width","height","x","y","rx","formatTimestamp","timestamp","Date","toLocaleTimeString","hour","minute","second","MarkdownText","_ref","children","className","parsedText","text","parsed","replace","parseMarkdown","_jsx","dangerouslySetInnerHTML","__html","MessageItem","React","_ref2","_msg$metadata","_msg$metadata2","_msg$metadata3","msg","index","theme","showTimestamps","isNew","messageStyle","useMemo","animationDelay","concat","animationFillMode","isUser","sender","isGuesser","currentPlayer","metadata","action","role","phase","message","includes","test","showOnRight","containerClass","messageClass","gradientClass","user","gradient","ai","getRoleInfo","icon","name","color","style","_jsxs","_Fragment","guessCount","confidence","toFixed","intelligence","strategy","learningApplied","ThinkingIndicator","_ref3","customMessage","shouldShowOnRight","indicatorClass","getThinkingMessage","EmptyState","MessageSquare","ConversationStats","_ref4","stats","showRoleStats","total","userMessages","aiMessages","guesserMessages","hiderMessages","ConversationFooter","_ref5","_conversation$","_conversation","conversation","length","ConversationLog","_ref6","variant","title","isThinking","thinkingMessage","maxHeight","showRoleInfo","learningActive","chatContainerRef","useRef","isAutoScroll","setIsAutoScroll","useState","prevConversationLengthRef","scrollTimeoutRef","themes","default","primary","bg","getTheme","hasNewMessages","current","newMessagesStartIndex","scrollToBottom","useCallback","container","scrollTo","top","scrollHeight","behavior","handleScroll","clearTimeout","setTimeout","isNearBottom","Math","abs","scrollTop","clientHeight","scrollToLatest","useEffect","timeoutId","chatContainerClass","chatContainerStyle","sampleConversation","now","displayConversation","Brain","filter","onClick","ref","onScroll","map","jsx","IntelligentContextAnalyzer","constructor","this","conversationHistory","gamePatterns","strategicInsights","lastAnalysisResult","lastAnalysisTime","opponentProfile","responseStyle","hintQuality","difficulty","creativity","patterns","preferences","adaptationRate","creativityEngine","unconventionalStrategies","innovationThreshold","creativityHistory","lastCreativeMove","metacognition","confidenceCalibration","Map","knowledgeGaps","learningProgress","selfAwareness","strengths","weaknesses","improvementAreas","ultraEfficientConfig","analysisInterval","batchAnalysis","compactPrompts","resultCaching","useLLMDecision","staticAnalysisMode","smartSkipping","emergencyOnly","enableOpponentModeling","enableCreativity","enableMetacognition","creativityTriggerThreshold","totalCalls","skippedCalls","cacheHits","llmDecisions","staticAnalysis","emergencyCalls","creativeStrategies","opponentPredictions","metacognitiveDecisions","adaptiveImprovements","gameStatePatterns","early","needsAnalysis","middle","late","transitions","significance","analysisValue","creativityBoost","intelligentCache","analyzeContext","llmCall","newEntry","push","updateOpponentProfile","performMetacognitiveReflection","shouldAnalyzeWithLLM","hasRecentAnalysis","enhanceWithCurrentContext","analysisPrompt","buildAdvancedGameContextPrompt","response","analysis","parseJSON","enhanceAnalysisWithIntelligence","recordMetacognitiveOutcome","error","getAdvancedGameSpecificFallback","toLowerCase","agent","min","max","some","word","turn","messageLength","responseTime","helpfulness","calculateHelpfulness","shift","predictOpponentBehavior","gameState","profile","prediction","recentPatterns","slice","avgHelpfulness","reduce","sum","p","expectedHintQuality","likelyToGiveHints","preferredDifficulty","generateCreativeStrategy","contextAnalysis","calculateCreativityNeed","strategies","chosenStrategy","floor","random","creativeApproach","implementCreativeStrategy","_objectSpread","approach","_contextAnalysis$patt","creativityNeed","efficiency","range","strategyType","type","description","modification","reasoning","reflection","confidenceAccuracy","evaluateConfidenceCalibration","strategyEffectiveness","evaluateStrategyPerformance","assessLearningProgress","identifyKnowledgeGaps","adjustBehaviorBasedOnReflection","recentPredictions","Array","from","values","status","accuracy","pred","actual","predicted","suggestion","recentInsights","performance","avgEfficiency","insight","_insight$patterns","recommendation","progressMetrics","patternRecognitionImprovement","measurePatternRecognitionGrowth","adaptationSpeed","measureAdaptationSpeed","creativityGrowth","measureCreativityGrowth","overall","Object","val","details","gaps","baseAnalysis","enhanceAnalysis","opponentPrediction","creativeStrategy","inferCurrentRange","metacognitiveInsights","generateMetacognitiveInsights","intelligence_enhancements","opponent_modeling","creative_strategy","metacognitive_insights","advanced_reasoning","generateAdvancedReasoning","meta","intelligence_level","capabilities","enhancement_timestamp","join","self_assessment","current_strategy_effectiveness","confidence_calibration","learning_trajectory","improvement_opportunities","next_actions","suggestNextActions","suggestions","ctx","extractGameContext","opponentInfo","getOpponentContextString","creativeHint","getCreativeContextString","history","e","i","substring","_this$creativityEngin","baseFallback","getGameSpecificFallback","profile_summary","creative_suggestions","metacognitive_state","confidence_in_fallback","alternative_approaches","analysisType","set","size","firstKey","keys","next","value","delete","getEnhancedEfficiencyStats","baseStats","getEfficiencyStats","intelligence_metrics","profile_accuracy","predictions_made","style_identified","creative_strategies_used","creativity_success_rate","innovation_level","self_awareness_level","adaptive_improvements","learning_progress","cognitive_capabilities","reset","preservedOpponentInsights","creativityPreference","generalStyle","clear","preservedStats","totalLifetimeGames","cumulativeCreativeStrategies","cumulativeOpponentPredictions","AdvancedIntelligentPromptSystem","learningDatabase","rangePatterns","feedbackAnalysis","opponentBehavior","contextualInsights","rangeClassification","mega_range","large_range","medium_range","small_range","tiny_range","final_range","contextAnalyzers","proximity","analyzeProximitySignals","bind","momentum","analyzeMomentumPatterns","feedback","analyzeFeedbackQuality","analyzeEfficiencyTrends","buildLearningOrientedPrompt","learningData","arguments","undefined","rangeSize","classification","classifyRange","gatherContextualInsights","learningInsights","extractLearningInsights","strategicGuidance","generateStrategicGuidance","assembleIntelligentPrompt","category","config","entries","insights","proximitySignals","momentumPatterns","feedbackQuality","efficiencyTrends","synthesizeInsights","recommendations","gameHistory","averageGuesses","calculateAverageGuesses","successPatterns","identifySuccessPatterns","commonMistakes","identifyCommonMistakes","optimalStrategies","identifyOptimalStrategies","optimalGuess","primaryStrategy","proximitySignal","alternatives","generateAlternativeStrategies","prompt","toUpperCase","strategicNote","generateCategorySpecificGuidance","optimal","ultra_large","generateSmallRangeOptions","generateTinyRangeList","generateFinalRangeList","recentFeedback","entry","recentGuesses","guessHistory","diffs","avgDiff","a","b","feedbacks","h","qualityScore","theoreticalOptimal","ceil","log2","theoretical","remaining_optimal","game","mistakes","guess","lastGuess","options","list","recordGameResult","result","learningEntry","finalGuessCount","strategiesUsed","contextualFactors","success","getLearningStats","avgGuesses","optimalGames","successRate","totalGames","optimalGameRate","learningConfidence","IntelligentPromptEngine","promptCache","performanceMetrics","confidenceMetrics","gamePhaseWeights","initial","exploration","certainty","final","strategyConfidence","binary_search","adaptive_exploration","random_guess","pattern_based","elimination","creative_approach","meta_strategy","contextFactors","rangeNarrowing","adaptationLevel","gamePhase","compactTemplates","microGuesser","compactGuesser","microHider","compactHider","intelligentGuesser","contextualHider","learningGuesser","adaptiveHider","intelligentSubstitutions","gs","s","c","complexity","learning","l","optimizationConfig","enableCaching","maxCacheSize","adaptiveComplexity","intelligentFallbacks","performanceTracking","qualityMetrics","tokenEfficiency","responseQuality","strategySuccess","buildGamePrompt","generateGuesserPrompt","generateHiderPrompt","buildEnhancedSecretPrompt","console","warn","buildFallbackPrompt","secret","enhancedContext","analyzeEnhancedContext","contextualConfidence","calculateContextualConfidence","buildEnhancedFeedbackPrompt","assessEnhancedComplexity","cached","checkPromptCache","recordCacheHit","level","buildMicroPrompt","buildCompactPrompt","buildFullPrompt","storePromptCache","determineGamePhase","rangeEfficiency","calculateRangeEfficiency","guessPattern","analyzeGuessPattern","playerBehavior","analyzePlayerBehavior","strategicRecommendation","generateStrategicRecommendation","_enhancedContext$stra","_enhancedContext$play","_learningData$gameHis","_enhancedContext$play2","factors","adaptation","enhancedFactors","learningDepth","contextRichness","calculateContextRichness","playerSophistication","sophistication","gamePhaseIntensity","getGamePhaseIntensity","score","tokenBudget","calculateOptimalTokenBudget","cacheKey","generateCacheKey","budget","_enhancedContext$stra2","_gameState$guessHisto","_enhancedContext$stra3","extractRecentFeedback","generateEnhancedStrategicGuidance","buildEnhancedGuesserPrompt","_enhancedContext$stra4","_enhancedContext$lear","baseGuidance","confidenceLevel","learningInsight","primaryPattern","guidance","_gameState$guessHisto2","_enhancedContext$stra5","maxGuesses","JSON","stringify","_learningData$gameHis2","recommendedDifficulty","playerSkillLevel","_enhancedContext$play3","_enhancedContext$play4","direction","distance","recentPattern","engagementLevel","get","hits","progress","pattern","consistency","guesses","differences","avgDifference","games","gamesAnalyzed","recentMessages","hasAdaptiveStrategy","_enhancedContext$lear2","_enhancedContext$play5","_enhancedContext$stra6","_enhancedContext$gues","richness","getCacheStats","cacheSize","fromEntries","recordPromptUsage","usage","promptLength","promptType","detectPromptType","usageHistory","getEngineStats","promptsGenerated","u","cacheHitRate","averagePromptLength","log","context","_this$confidenceMetri","phaseMultiplier","content","PureLLMGameManager","apiToken","baseUrl","model","temperature","maxTokens","contextAnalyzer","promptEngine","advancedPromptSystem","useTokenOptimization","enableAPIIntelligence","enableSmartCaching","singleCallPerRole","gameMetrics","avgIntelligence","learningConfig","enableAdvancedLearning","learningThreshold","adaptiveStrategy","contextualMemory","forceAdvancedPrompts","optimizePromptGeneration","efficientConfig","gameLoopInterval","minInterval","maxRetries","emergencyDelay","apiOptimizer","lastCallTime","successfulCalls","rateLimitErrors","guesserCalls","hiderCalls","staticResponsesUsed","tokenOptimizationsUsed","cachedResponsesUsed","contextCache","responseCache","maxContextHistory","executeOptimizedGuesserMove","preprocessedData","preprocessContextForAPI","optimizedPrompt","buildTokenOptimizedGuesserPrompt","callLLM","parseAdvancedJSON","validateAdvancedIntelligence","formatAdvancedResult","generateIntelligentFallback","phaseCode","extractKeyFeedbackSignals","compressedHistory","compressGuessHistory","patternFlags","identifyQuickPatterns","generatePrecomputedSuggestions","recent","detectHistoryPattern","count","flags","quarter","preprocessed","learningCompressed","compressLearningData","g","skill","executeOptimizedHiderResponse","generateStaticVictoryMessage","preprocessHiderContextForAPI","buildTokenOptimizedHiderPrompt","parseHiderJSON","validateHiderResponse","formatHiderResult","generateHiderFallback","proximityCode","progressCode","performancePattern","analyzePlayerPerformancePattern","detectMultiplePatterns","systematic","efficient","conservative","aggressive","isSystematicApproach","isEfficientStrategy","isRandomStrategy","isConservativeStrategy","isAggressiveStrategy","expectedRange","systematicSteps","mid","quarterRange","distances","avgDistance","pow","smallSteps","bigJumps","generateIntelligentSecretNumber","buildSecretNumberPrompt","parseSecretNumberResponse","validateSecretNumber","number","intelligent","Error","generateSmartSecretNumber","playerInsight","analyzePlayerPerformance","skillLevel","calculateTrend","generateSelectionStrategy","runOptimizedGameLoop","onUpdate","onEnd","gameLoop","async","isActive","endIntelligentGameWithLearning","guesserMove","isNaN","parseInt","addToHistory","currentRange","static","gameEnd","hiderResponse","updateGameRange","intent","startIntelligentGameWithLearning","currentRole","Set","secretChoice","gameStart","optimizedMode","older","recentAvg","olderAvg","jsonMatch","match","parse","numberMatch","messageMatch","requiredDirection","contextual","advanced","tokenOptimized","tone","fallback","messages","difficultNumbers","easyNumbers","oldRange","newRange","newSize","splice","getOptimizedEfficiencyStats","_this$gameState","mode","totalAPICalls","getSuccessRate","averageCallsPerTurn","optimizationLevel","intelligenceSource","costEfficiency","sleep","ms","Promise","resolve","retryCount","_data$candidates","_data$candidates$","_data$candidates$$con","_data$candidates$$con2","_data$candidates$$con3","enforceEfficientRateLimit","requestBody","contents","parts","generationConfig","maxOutputTokens","topP","apiUrl","fetch","method","headers","body","backoffDelay","ok","json","candidates","trim","timeSinceLastCall","requiredInterval","waitTime","LLMSelfPlaySystemV3","_gameData$currentRang","_gameData$currentRang2","API_TOKENS","currentTokenIndex","setCurrentTokenIndex","apiConfig","setApiConfig","setGameState","setConversation","gameData","setGameData","secretNumber","totalGuesses","gameResult","intelligenceScore","turnNumber","finalPlayer","totalTurns","avgConfidence","currentConfidence","showApiConfig","setShowApiConfig","debugInfo","setDebugInfo","showDebugPanel","setShowDebugPanel","isProcessing","setIsProcessing","apiError","setApiError","expandedApiData","setExpandedApiData","systemActivity","setSystemActivity","showProjectInfo","setShowProjectInfo","startRealTimeGame","isGameActive","resetGameSession","getAPIStatus","clearLearningMemory","getContextualLearning","learningMemory","getConfidenceReport","manager","setCurrentPlayer","gameSession","setGameSession","forceUpdate","setLearningMemory","strategicPatterns","playerAdaptations","successfulStrategies","failurePatterns","cumulativeIntelligence","confidenceHistory","lastUpdated","triggerUpdate","assign","saveLearningMemory","newData","updatedMemory","hasLearning","recentGames","successfulGames","makeUltraIntelligentCall","input","learningHistory","newConfidence","updatedConfidenceHistory","newAvgConfidence","confidenceReasoning","intelligence_type","contextualAnalysis","learning_applied","onTurnUpdate","onGameComplete","onError","newGameSession","id","startTime","roles","hider","guesser","turnCount","turnData","_turnData$metadata","_turnData$metadata2","_turnData$metadata3","_turnData$metadata7","_turnData$metadata8","_turnData$metadata9","nextRole","_turnData$metadata4","_turnData$metadata5","_turnData$metadata6","turnConfidence","enhancedTurnData","nextPlayer","playerRole","gameAvgConfidence","isIntelligent","playerPerformance","hiderPerformance","effectiveness","guesserPerformance","updatedLearning","enhancedResult","systemType","totalGamesPlayed","learningProgression","intelligenceMetrics","overallScore","adaptiveThinking","contextualUnderstanding","strategicEvolution","cumulativeLearning","makeGameIntelligentMove","generateGameResponse","switchCurrentPlayer","getCurrentGameState","emptyMemory","exportLearningData","exportedAt","systemVersion","trend","intelligenceLevel","learningStatus","features","getIntelligenceReport","getIntelligenceStatus","overallIntelligence","contextInsights","adaptiveCapacity","learningEvidence","strategicThinking","currentAnalysis","aiStrategy","aiPersonality","getFullContextualIntelligence","memoryDepth","currentContext","userProfile","availableStrategies","availablePersonalities","clearError","clearConversationHistory","clearCallHistory","useLLMAPIEnhanced","switchToNextToken","nextIndex","prev","addDebugInfo","apiResponse","logEntry","statusInterval","setInterval","updateSystemStatus","apiStatus","currentSystemStatus","learningCapacity","activity","clearInterval","hasValidConfidence","learningStats","_learningMemory$gameH","confidenceReport","gameCount","Zap","onChange","target","placeholder","step","parseFloat","reverse","data","navigator","clipboard","writeText","XCircle","alert","roleDisplay","_turnData$metadata0","onGameEnd","_gameResult$learningD","disabled","resetGame","clearLearning"],"sourceRoot":""}