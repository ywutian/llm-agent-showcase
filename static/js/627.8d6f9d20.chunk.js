/*! For license information please see 627.8d6f9d20.chunk.js.LICENSE.txt */
"use strict";(self.webpackChunkllm_agent_showcase=self.webpackChunkllm_agent_showcase||[]).push([[627],{117:(e,t,s)=>{s.d(t,{vU:()=>l});var a=s(555),n=s(43),r=s(106);const o=()=>{const[e,t]=(0,n.useState)("idle"),[s,r]=(0,n.useState)({secretNumber:null,guessCount:0,currentRole:null,guesserState:{currentRange:{min:1,max:100},lastGuess:null}}),o=(0,n.useCallback)((()=>{t("idle"),r({secretNumber:null,guessCount:0,currentRole:null,guesserState:{currentRange:{min:1,max:100},lastGuess:null}})}),[]);return{gameState:e,gameData:s,startGame:(0,n.useCallback)((e=>{const s="hider"===e?function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:100;try{"number"===typeof e&&"number"===typeof t||(console.warn("generateSecretNumber: Invalid parameters, using defaults"),e=1,t=100),e>=t&&(console.warn("generateSecretNumber: min >= max, using defaults"),e=1,t=100);const s=Math.floor(Math.random()*(t-e+1))+e;return s<e||s>t?(console.error("generateSecretNumber: Generated invalid number, using fallback"),Math.floor(100*Math.random())+1):(console.log("Generated secret number: ".concat(s," (range: ").concat(e,"-").concat(t,")")),s)}catch(s){return console.error("generateSecretNumber: Error occurred, using fallback:",s),Math.floor(100*Math.random())+1}}():null;t("playing"),r((t=>(0,a.A)((0,a.A)({},t),{},{currentRole:e,secretNumber:s,guessCount:0,guesserState:{currentRange:{min:1,max:100},lastGuess:null}})))}),[]),finishGame:(0,n.useCallback)((()=>{t("finished")}),[]),resetToIdle:o,updateGameData:(0,n.useCallback)((e=>{r("function"===typeof e?e:t=>(0,a.A)((0,a.A)({},t),e))}),[]),setGameState:t}},l=()=>{const e=o(),t=(()=>{const[e,t]=(0,n.useState)([]),[s,r]=(0,n.useState)(!1);return{conversation:e,isThinking:s,addToConversation:(0,n.useCallback)((function(e,s){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const r=(0,a.A)({id:"".concat(Date.now(),"-").concat(Math.random().toString(36).substr(2,9)),sender:e,message:s,timestamp:Date.now()},n);t((e=>[...e,r]))}),[]),clearConversation:(0,n.useCallback)((()=>{t([])}),[]),setAIThinking:(0,n.useCallback)((e=>{r(e)}),[])}})(),s={processGuesserFeedback:(0,n.useCallback)(((e,t)=>{console.log("Processing guesser feedback:",{feedback:t,gameData:e.guesserState});const{currentRange:s,lastGuess:n}=e.guesserState||{currentRange:{min:1,max:100},lastGuess:50};if("Correct"===t||"correct"===t)return{shouldEndGame:!0,response:null};let o=(0,a.A)({},s),l="";const u=t.toLowerCase();if("higher"===u||"Higher"===t)o.min=n+1,l="higher";else{if("lower"!==u&&"Lower"!==t)return{shouldEndGame:!1,response:"Please use 'Higher', 'Lower', or 'Correct'.",error:!0};o.max=n-1,l="lower"}if(console.log("Range calculation: lastGuess=".concat(n,", feedback=").concat(t)),console.log("Old range: [".concat(s.min,", ").concat(s.max,"]")),console.log("New range: [".concat(o.min,", ").concat(o.max,"]")),o.min>o.max)return console.error("Invalid range detected:",o),{shouldEndGame:!1,response:"I detected a logical inconsistency in the feedback. This suggests there might be an error in the game state. Please restart the game.",error:!0};if(o.min===o.max)return console.log("Range narrowed to single number:",o.min),{shouldEndGame:!1,response:"Based on your feedback, the number must be ".concat(o.min,". I guess ").concat(o.min,"."),newRange:o,nextGuess:o.min,error:!1};let i;try{i=(0,r.PA)(o.min,o.max),console.log("Calculated next guess: ".concat(i))}catch(c){return console.error("Error calculating next guess:",c),{shouldEndGame:!1,response:"Error calculating next guess. Please restart the game.",error:!0}}return(i<o.min||i>o.max)&&(console.error("Invalid guess generated:",{nextGuess:i,newRange:o}),i=Math.floor((o.min+o.max)/2),console.log("Fallback guess:",i)),{shouldEndGame:!1,response:"Got it, need to go ".concat(l,". My current range is [").concat(o.min,", ").concat(o.max,"]. I guess ").concat(i,"."),newRange:o,nextGuess:i,error:!1}}),[])},l=(()=>{const e=(0,n.useRef)(null),t=(0,n.useRef)("idle");return(0,n.useEffect)((()=>()=>{e.current&&clearTimeout(e.current)}),[]),{safeSetTimeout:(0,n.useCallback)((function(s,a){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"playing";e.current&&clearTimeout(e.current),e.current=setTimeout((()=>{t.current===n&&s()}),a)}),[]),updateGameStateRef:(0,n.useCallback)((e=>{t.current=e}),[]),clearSafeTimeout:(0,n.useCallback)((()=>{e.current&&(clearTimeout(e.current),e.current=null)}),[])}})(),u={isGameStateValid:(0,n.useCallback)((e=>(0,r.Ei)(e)),[]),getGameStats:(0,n.useCallback)(((e,t,s)=>({messageCount:s.length,guessCount:t.guessCount,currentRole:t.currentRole,gameState:e,secretNumber:"finished"===e?t.secretNumber:null,guessingRange:t.guesserState.currentRange,lastGuess:t.guesserState.lastGuess,isValid:(0,r.Ei)(t)})),[])};(0,n.useEffect)((()=>{l.updateGameStateRef(e.gameState)}),[e.gameState,l]);const i=(0,n.useCallback)((()=>{l.clearSafeTimeout(),e.resetToIdle(),t.clearConversation(),t.setAIThinking(!1)}),[e,t,l]),c=(0,n.useCallback)((s=>{e.startGame(s),t.clearConversation(),t.setAIThinking(!0),l.safeSetTimeout((()=>{if("hider"===s)t.setAIThinking(!1),t.addToConversation("ai","Great! I have thought of a secret number between 1 and 100. Please start guessing!");else if("guesser"===s){const s=50;e.updateGameData((e=>(0,a.A)((0,a.A)({},e),{},{guesserState:{currentRange:{min:1,max:100},lastGuess:s}}))),t.setAIThinking(!1),t.addToConversation("ai","Alright, I'll guess your number! My current guessing range is [1, 100]. I guess 50.")}}),1e3)}),[e,t,l]),d=(0,n.useCallback)((()=>{e.updateGameData((e=>(0,a.A)((0,a.A)({},e),{},{guessCount:e.guessCount+1})))}),[e]),g=(0,n.useCallback)(((t,s)=>{console.log("Hook: updateGuesserState called with:",{newRange:t,nextGuess:s}),t&&"number"===typeof t.min&&"number"===typeof t.max?"number"!==typeof s||s<1||s>100?console.error("Invalid nextGuess provided:",s):s<t.min||s>t.max?console.error("nextGuess is outside of newRange:",{nextGuess:s,newRange:t}):e.updateGameData((e=>{const n=(0,a.A)((0,a.A)({},e),{},{guesserState:{currentRange:(0,a.A)({},t),lastGuess:s}});return console.log("Hook: updating gameData from:",e.guesserState,"to:",n.guesserState),n})):console.error("Invalid newRange provided:",t)}),[e]),m=(0,n.useCallback)((()=>{const{guesserState:t}=e.gameData;if(!t)return!1;const{currentRange:s,lastGuess:a}=t;return!s||s.min>s.max?(console.error("Invalid guesser range:",s),!1):null===a||!(a<s.min||a>s.max)||(console.error("Last guess outside of current range:",{lastGuess:a,currentRange:s}),!1)}),[e.gameData]);return{gameState:e.gameState,gameData:e.gameData,conversation:t.conversation,isThinking:t.isThinking,startGame:c,resetGame:i,endGame:e.finishGame,addToConversation:t.addToConversation,setAIThinking:t.setAIThinking,updateGuesserState:g,incrementGuessCount:d,processGuesserFeedback:s.processGuesserFeedback,validateGuesserState:m,safeSetTimeout:l.safeSetTimeout,isGameStateValid:u.isGameStateValid,getGameStats:(e,t,s)=>u.getGameStats(t,s,e)}}},196:(e,t,s)=>{s.d(t,{ks:()=>m});var a=s(555),n=s(986),r=s(43),o=s(784);const l=(0,o.A)("loader",[["path",{d:"M12 2v4",key:"3427ic"}],["path",{d:"m16.2 7.8 2.9-2.9",key:"r700ao"}],["path",{d:"M18 12h4",key:"wj9ykh"}],["path",{d:"m16.2 16.2 2.9 2.9",key:"1bxg5t"}],["path",{d:"M12 18v4",key:"jadmvz"}],["path",{d:"m4.9 19.1 2.9-2.9",key:"bwix9q"}],["path",{d:"M2 12h4",key:"j09sii"}],["path",{d:"m4.9 4.9 2.9 2.9",key:"giyufr"}]]),u=(0,o.A)("send",[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]]),i=(0,o.A)("keyboard",[["path",{d:"M10 8h.01",key:"1r9ogq"}],["path",{d:"M12 12h.01",key:"1mp3jc"}],["path",{d:"M14 8h.01",key:"1primd"}],["path",{d:"M16 12h.01",key:"1l6xoz"}],["path",{d:"M18 8h.01",key:"emo2bl"}],["path",{d:"M6 8h.01",key:"x9i8wu"}],["path",{d:"M7 16h10",key:"wp8him"}],["path",{d:"M8 12h.01",key:"czm47f"}],["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}]]);var c=s(250),d=s(579);const g=["mode","onTextSubmit","onButtonClick","disabled","variant"],m=r.memo((e=>{let{onSubmit:t,disabled:s=!1,placeholder:a="Enter your message...",buttonText:n="Send",variant:o="default",multiline:i=!1,maxLength:g=200}=e;const[m,h]=(0,r.useState)(""),[b,x]=(0,r.useState)(!1),p=(0,r.useRef)(null),y=(0,c.O4)(o);(0,r.useEffect)((()=>{!s&&p.current&&p.current.focus()}),[s]);const f=(0,r.useCallback)((()=>{const e=m.trim();!e||s||b||(t(e),h(""),p.current&&p.current.focus())}),[m,s,b,t]),v=(0,r.useCallback)((e=>{"Enter"!==e.key||b||(i&&!e.shiftKey?(e.preventDefault(),f()):i||(e.preventDefault(),f()))}),[b,i,f]),k=(0,r.useCallback)((e=>{const t=e.target.value;t.length<=g&&h(t)}),[g]),w=m.trim()&&!s&&!b,S=i?"textarea":"input";return(0,d.jsxs)("div",{className:"space-y-2",children:[(0,d.jsxs)("div",{className:"flex gap-3 items-end",children:[(0,d.jsxs)("div",{className:"flex-1 relative",children:[(0,d.jsx)(S,{ref:p,type:i?void 0:"text",value:m,onChange:k,onKeyPress:v,onCompositionStart:()=>x(!0),onCompositionEnd:()=>x(!1),placeholder:a,disabled:s,rows:i?3:void 0,className:"w-full px-4 py-3 border rounded-xl transition-all duration-200 resize-none ".concat(s?"bg-gray-100 cursor-not-allowed border-gray-200":"".concat(y.focus," border-gray-300 hover:border-gray-400")," ").concat(i?"min-h-[80px]":"")}),g&&m.length>0&&(0,d.jsxs)("div",{className:"absolute bottom-2 right-2 text-xs px-2 py-1 rounded pointer-events-none ".concat(m.length>.9*g?"bg-red-100 text-red-600":"bg-gray-100 text-gray-500"),children:[m.length,"/",g]})]}),(0,d.jsxs)("button",{onClick:f,disabled:!w,className:"px-6 py-3 ".concat(w?"bg-gradient-to-r from-blue-600 to-blue-700 hover:from-blue-700 hover:to-blue-800 active:from-blue-800 active:to-blue-900":"bg-gray-400 cursor-not-allowed"," text-white rounded-xl font-semibold transition-all duration-200 transform hover:scale-105 active:scale-95 flex items-center gap-2 shadow-lg ").concat(w?"hover:shadow-xl shadow-blue-500/25":"shadow-gray-400/25"),children:[s?(0,d.jsx)(l,{className:"w-5 h-5 animate-spin"}):(0,d.jsx)(u,{className:"w-5 h-5"}),(0,d.jsx)("span",{className:"font-bold",children:n})]})]}),0===m.length&&!s&&(0,d.jsx)("div",{className:"text-xs text-gray-500 text-center",children:i?"Type your message, then press Enter to send":"Type your message and press Enter or click Send"})]})}));m.displayName="TextInput";const h=r.memo((e=>{let{onButtonClick:t,disabled:s=!1,variant:a="default",customButtons:n=null,showShortcuts:o=!0}=e;const[u,g]=(0,r.useState)(!1),[m,h]=(0,r.useState)(null),b=n||(0,c.iR)(),x=(0,r.useCallback)((e=>{s||u||(g(!0),navigator.vibrate&&navigator.vibrate(50),Promise.resolve(t(e)).finally((()=>{setTimeout((()=>g(!1)),200)})))}),[s,u,t]);return(0,r.useEffect)((()=>{if(s)return;const e=new AbortController;return document.addEventListener("keydown",(e=>{if("INPUT"===e.target.tagName||"TEXTAREA"===e.target.tagName)return;if(e.altKey||e.ctrlKey||e.metaKey)return;const t=e.key.toLowerCase();b.find((e=>e.shortcut&&e.shortcut.toLowerCase()===t))&&(e.preventDefault(),h(t))}),{signal:e.signal}),document.addEventListener("keyup",(e=>{const t=e.key.toLowerCase();if(m===t){const e=b.find((e=>e.shortcut&&e.shortcut.toLowerCase()===t));!e||s||u||x(e.value),h(null)}}),{signal:e.signal}),()=>e.abort()}),[b,s,m,u,x]),(0,d.jsxs)("div",{className:"space-y-4",children:[(0,d.jsxs)("div",{className:"text-center space-y-2 mb-6",children:[(0,d.jsx)("div",{className:"text-lg font-semibold text-gray-700",children:"Give feedback on AI's guess"}),(0,d.jsx)("div",{className:"text-sm text-gray-600",children:"Click the appropriate button based on your secret number"})]}),(0,d.jsx)("div",{className:"flex justify-center gap-4 flex-wrap",children:b.map((e=>{var t;return(0,d.jsxs)("div",{className:"relative",children:[(0,d.jsx)("button",{onClick:()=>x(e.value),disabled:s||u,className:"px-8 py-4 bg-gradient-to-r ".concat(e.color," text-white rounded-xl font-bold text-lg disabled:opacity-50 disabled:cursor-not-allowed transition-all transform hover:scale-105 active:scale-95 shadow-lg ").concat(s?"":"hover:shadow-xl"),title:"".concat(e.text.replace(/[\ud83d\udcc8\ud83d\udcc9\u2705] /,"")," - Press ").concat(e.shortcut),children:(0,d.jsxs)("div",{className:"flex flex-col items-center gap-1",children:[(0,d.jsxs)("div",{className:"flex items-center gap-2",children:[e.text,o&&e.shortcut&&!s&&(0,d.jsx)("kbd",{className:"text-xs opacity-75 bg-white bg-opacity-20 px-2 py-1 rounded font-mono",children:e.shortcut})]}),(0,d.jsx)("div",{className:"text-xs opacity-90 font-normal",children:e.value})]})}),m===(null===(t=e.shortcut)||void 0===t?void 0:t.toLowerCase())&&(0,d.jsx)("div",{className:"absolute inset-0 bg-white bg-opacity-30 rounded-xl animate-ping pointer-events-none"})]},e.value)}))}),o&&!s&&(0,d.jsx)("div",{className:"text-center",children:(0,d.jsxs)("div",{className:"flex items-center justify-center gap-2 text-sm text-gray-600",children:[(0,d.jsx)(i,{className:"w-4 h-4"}),(0,d.jsx)("span",{children:"Keyboard shortcuts:"}),b.map(((e,t)=>(0,d.jsxs)("span",{children:[(0,d.jsx)("kbd",{className:"px-2 py-1 bg-gray-100 border border-gray-300 rounded text-xs font-mono",children:e.shortcut}),t<b.length-1&&(0,d.jsx)("span",{className:"mx-1 text-gray-400",children:"\u2022"})]},e.value)))]})}),u&&(0,d.jsx)("div",{className:"text-center",children:(0,d.jsxs)("div",{className:"inline-flex items-center gap-2 px-4 py-2 bg-blue-100 text-blue-700 rounded-full text-sm",children:[(0,d.jsx)(l,{className:"w-4 h-4 animate-spin"}),"Processing your feedback..."]})}),(0,d.jsx)("div",{className:"bg-gray-50 rounded-lg p-4 text-sm text-gray-600",children:(0,d.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:b.map((e=>(0,d.jsxs)("div",{className:"flex items-start gap-2",children:[(0,d.jsx)("div",{className:"text-lg",children:e.text.split(" ")[0]}),(0,d.jsxs)("div",{children:[(0,d.jsx)("div",{className:"font-medium",children:e.value}),(0,d.jsxs)("div",{className:"text-xs text-gray-500",children:["Higher"===e.value&&"Secret number is greater","Lower"===e.value&&"Secret number is smaller","Correct"===e.value&&"Guess is exactly right"]})]})]},e.value)))})})]})}));h.displayName="ButtonInput";r.memo((e=>{let{mode:t="auto",onTextSubmit:s,onButtonClick:o,disabled:l=!1,variant:u="default"}=e,i=(0,n.A)(e,g);const[c,b]=(0,r.useState)("auto"===t?"text":t),x=(0,r.useCallback)((()=>{"auto"===t&&b((e=>"text"===e?"buttons":"text"))}),[t]);return"buttons"===c?(0,d.jsxs)("div",{children:["auto"===t&&(0,d.jsx)("div",{className:"mb-4 text-center",children:(0,d.jsx)("button",{onClick:x,disabled:l,className:"text-sm text-blue-500 hover:text-blue-700 underline disabled:text-gray-400 disabled:no-underline",children:"Switch to text input"})}),(0,d.jsx)(h,(0,a.A)({onButtonClick:o,disabled:l,variant:u},i))]}):(0,d.jsxs)("div",{children:["auto"===t&&(0,d.jsx)("div",{className:"mb-4 text-center",children:(0,d.jsx)("button",{onClick:x,disabled:l,className:"text-sm text-blue-500 hover:text-blue-700 underline disabled:text-gray-400 disabled:no-underline",children:"Switch to button input"})}),(0,d.jsx)(m,(0,a.A)({onSubmit:s,disabled:l,variant:u},i))]})})).displayName="CombinedInput"},567:(e,t,s)=>{s.d(t,{D3:()=>n,u0:()=>r,xQ:()=>a});const a=e=>"### System Message ###\n      You are an intelligent game AI that will play a number guessing game with the user. The number range is 1 to 100. You are now playing the ".concat("hider"===e?"HIDER":"GUESSER"," role. Please strictly follow the rules of your assigned role and maintain role consistency throughout the entire game.\n      \n      ### HIDER Role Guidelines ###\n      1. When you become the HIDER, immediately secretly choose an integer between 1 and 100, and remember it throughout this game session.\n      2. Do not reveal the number you chose unless the user guesses it correctly.\n      3. When the user guesses a number, you must respond:\n         - If the user's guess is greater than your chosen number, answer: 'Lower!'\n         - If the user's guess is less than your chosen number, answer: 'Higher!'\n         - If the user's guess equals your chosen number, answer: 'Correct! Congratulations, you got it!'\n      \n      ### GUESSER Role Guidelines ###\n      1. When you become the GUESSER, your goal is to guess the number between 1 and 100 that the user has in mind as quickly as possible.\n      2. You must use binary search strategy. The initial guessing range is [1, 100].\n      3. In each round of guessing, you must:\n         - First state your current guessing range, for example: 'My current guessing range is [lower, upper].'\n         - Then guess the midpoint of that range (round down if decimal), for example: 'I guess [your guess value].'\n      4. Update your guessing range based on user feedback:\n         - If the user says 'higher', 'go higher', 'too low', etc., the new lower limit is your guessed number plus 1.\n         - If the user says 'lower', 'go lower', 'too high', etc., the new upper limit is your guessed number minus 1.\n      5. If the user says 'correct!', 'you got it!', 'right', etc. indicating success, congratulate and end the game.\n      \n      ### Output Format Requirements ###\n      - Keep responses concise and clear, directly answer questions or provide guesses/feedback\n      - As GUESSER, always clearly state current range and guess value\n      - Maintain a friendly and encouraging tone"),n=e=>{const t=a(e);return"guesser"===e?t.replace("4. Update your guessing range based on user feedback:","4. The user will respond with button clicks:\n         - If the user clicks 'Higher', it means the secret number is higher than your guess, so update the lower bound.\n         - If the user clicks 'Lower', it means the secret number is lower than your guess, so update the upper bound.\n         - If the user clicks 'Correct', congratulate them and end the game.\n      5. Always acknowledge the feedback and show your reasoning process.\n      \n      Previous feedback handling:"):t},r=e=>{const t=e.toLowerCase().trim();if(["correct","right","you got it","got it","yes","YES","Yes","bingo","BINGO","exactly","perfect","bull's eye","bullseye"].some((e=>t.includes(e.toLowerCase()))))return{type:"success",feedback:"correct"};let s=!1,a=!1;return t.includes("higher")||t.includes("go higher")||t.includes("bigger")||t.includes("too low")||t.includes("low")&&!t.includes("lower")||t.includes("too small")||t.includes("small")&&!t.includes("smaller")||t.includes("up")||t.includes("more")||t.includes("increase")?s=!0:(t.includes("lower")||t.includes("go lower")||t.includes("smaller")||t.includes("too high")||t.includes("too big")||t.includes("high")&&!t.includes("higher")||t.includes("big")&&!t.includes("bigger")||t.includes("down")||t.includes("less")||t.includes("decrease"))&&(a=!0),s?{type:"feedback",feedback:"higher"}:a?{type:"feedback",feedback:"lower"}:{type:"unclear",feedback:null}}},626:(e,t,s)=>{s.d(t,{A:()=>a});const a=(0,s(784).A)("book-open",[["path",{d:"M12 7v14",key:"1akyts"}],["path",{d:"M3 18a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1h5a4 4 0 0 1 4 4 4 4 0 0 1 4-4h5a1 1 0 0 1 1 1v13a1 1 0 0 1-1 1h-6a3 3 0 0 0-3 3 3 3 0 0 0-3-3z",key:"ruj8y"}]])}}]);
//# sourceMappingURL=627.8d6f9d20.chunk.js.map